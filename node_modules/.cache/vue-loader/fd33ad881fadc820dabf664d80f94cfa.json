{"remainingRequest":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\visualplace\\zhihuiguanqu\\src\\warm\\warm-export\\reservoirhour.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\src\\warm\\warm-export\\reservoirhour.vue","mtime":1669188921356},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n        import WarmDataConfig from \"@/assets/commonJS/WarmDataConfig\";\n        import App from \"@/App.vue\";\n\texport default {\n        data(){\n            return{\n                loading:false,\n                theight:window.innerHeight-231,\n                form:{\n                    date:''\n                },\n                date:'',\n                data:[],\n                cols: [],\n                totaldata:{},\n                expireTimeOption:{\n                    disabledDate(date) {\n\t\t\t          \t//disabledDate 文档上：设置禁用状态，参数为当前日期，要求返回 Boolean\n                          var nowdate = new Date();\n                          nowdate.setMinutes(0);\n                          nowdate.setSeconds(0);\n\t\t\t\t\t\treturn date.getTime() > nowdate.getTime();\n\t\t\t\t\t}\n                }\n            }\n        },\n                // 引入过滤方法到此组件\n        mixins: [WarmDataConfig],\n        mounted(){\n            var date = new Date();\n          var Month = date.getMonth()+1;\n          var datelist = new Array();\n          var Hours = date.getHours()-1;\n          if(Hours<0){\n              Hours=0;\n          }\n          var Minutes = date.getMinutes();\n          var Seconds = date.getSeconds();\n          var Dateday=date.getDate();\n          if (Hours<10) {\n            Hours = `0${Hours}`\n          }\n          if (Minutes<10) {\n            Minutes = `0${Minutes}`\n          }\n          if (Seconds<10) {\n            Seconds = `0${Seconds}`\n          }\n          if (Month<10) {\n            Month = `0${Month}`\n          }\n          if(Dateday<10){\n            Dateday = `0${Dateday}`\n          }\n          datelist[1] = `${date.getFullYear()}-${Month}-${Dateday} ${Hours}:59:59`;\n          datelist[0] = `${date.getFullYear()}-${Month}-${Dateday} 00:00:00`;\n          this.form.date=datelist;\n            this.Reload();\n        },\n        methods:{\n            timechange(date){\n                this.form.date = date;\n                this.Reload();\n            },\n            Reload(){\n                this.loading = true;\n                var lastbtime1=new Date(this.form.date[0]);\n                var lastbtime2=new Date(lastbtime1.setHours(lastbtime1.getHours()-1));\n                var lastetime1=new Date(this.form.date[1]);\n                var lastetime2=new Date(lastetime1.setHours(lastetime1.getHours()-1));\n                var lasttime=new Array();\n                lasttime.push(lastbtime2);\n                lasttime.push(lastetime2);\n                var lastcon=this.datetimeFilter(lasttime);\n                this.axios.get('/fieldinfo/getskhourinfo',{params:{begintime:this.form.date[0],endtime:this.form.date[1],addtion1:lastcon[0],addtion2:lastcon[1]}}).then((res)=>{\n                    this.loading = false;\n                    this.totaldata=res.data.total;\n                    this.cols=res.data.header;\n                    this.data = res.data.rows;\n                });\n            },\n            exportSkHour(){\n                var lastbtime1=new Date(this.form.date[0]);\n                var lastbtime2=new Date(lastbtime1.setHours(lastbtime1.getHours()-1));\n                var lastetime1=new Date(this.form.date[1]);\n                var lastetime2=new Date(lastetime1.setHours(lastetime1.getHours()-1));\n                var lasttime=new Array();\n                lasttime.push(lastbtime2);\n                lasttime.push(lastetime2);\n                var lastcon=this.datetimeFilter(lasttime);\n                var params='begintime='+this.form.date[0]+'&endtime='+this.form.date[1]+'&addtion1='+lastcon[0]+'&addtion2='+lastcon[1];\n                window.location.href='/excel/exportskhour?'+params;\n            },                \n        },\n    }\n",{"version":3,"sources":["reservoirhour.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"reservoirhour.vue","sourceRoot":"src/warm/warm-export","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<Content class=\"searchcon\">\r\n                    <Row type=\"flex\" :gutter=\"16\" class=\"rowtocol\">\r\n                        <Col>\r\n                        时间：\r\n                        <el-date-picker\r\n                        v-model=\"form.date\"\r\n                        type=\"datetimerange\"\r\n                        range-separator=\"至\"\r\n                        start-placeholder=\"开始日期\"\r\n                        end-placeholder=\"结束日期\"\r\n                        align=\"right\"\r\n                        style=\"width: 380px\"\r\n                        value-format=\"yyyy-MM-dd HH:mm:ss\"\r\n                        :picker-options=\"expireTimeOption\"\r\n                        @change=\"timechange\"\r\n                        :clearable=\"false\"\r\n                        :editable=\"false\"\r\n                        size=\"small\"\r\n                        >\r\n                        </el-date-picker>\r\n                        </Col> \r\n                        <Col align=\"left\" fixed=\"left\">\r\n                         <Button type=\"primary\" style=\"width: auto;margin-right: 20px;\" @click=\"exportSkHour\">导出</Button>\r\n                         </Col> \r\n                    </Row>\r\n                    <Row class=\"fgline\"></Row>\r\n                    <div style=\"padding-bottom:5px;\">\r\n                        总站数：1  单位：水位 m，流量 m³/s，水量 万m³        <span style=\"float:right;font-weight:bold;font-size:14px;\">总入库水量：{{totaldata.INW}}万m³&nbsp;&nbsp;&nbsp;&nbsp;总出库水量：{{totaldata.OUTW}}万m³</span> \r\n                    </div>\r\n                    <el-table\r\n                        :data=\"data\"\r\n                        border\r\n                        :height=\"theight\"\r\n                        v-loading=\"loading\"\r\n                        style=\"width: 100%\"\r\n                        >\r\n                        <el-table-column label=\"站点\" min-width=\"100\" align=\"center\">\r\n                            <el-table-column label=\"汛限水位\" min-width=\"100\" align=\"center\">\r\n                                <el-table-column label=\"正常蓄水位\" min-width=\"100\" align=\"center\">\r\n                                   <el-table-column label=\"时间\" min-width=\"100\" prop=\"DT\" align=\"center\">\r\n\r\n                                   </el-table-column>\r\n                                </el-table-column>\r\n                            </el-table-column>\r\n                        </el-table-column>\r\n                        <template v-for=\"item in cols\">\r\n                            <el-table-column :label=\"item.STNM\" align=\"center\">\r\n                                <el-table-column :label=\"item.FWL\" align=\"center\">\r\n                                    <el-table-column :label=\"item.ZCWL\" align=\"center\">\r\n                                        <el-table-column label=\"平均水位\" min-width=\"100\" prop=\"RZ\" align=\"center\">\r\n                                       </el-table-column>\r\n                                       <el-table-column label=\"水势\" min-width=\"80\" prop=\"CV\" align=\"center\">\r\n                                           <template scope=\"scope\">\r\n                                                <span v-if=\"scope.row.CV==='↑'\" style=\"color:#FF0000\">↑</span>\r\n                                                <span v-else-if=\"scope.row.CV==='↓'\" style=\"color:#0000FF\">↓</span>\r\n                                                <span v-else style=\"color: #000000\">-</span>\r\n                                            </template>\r\n                                       </el-table-column>\r\n                                       <el-table-column label=\"平均入库流量\" min-width=\"100\" prop=\"INQ\" align=\"center\">\r\n                                       </el-table-column>\r\n                                       <el-table-column label=\"平均出库流量\" min-width=\"100\" prop=\"OTQ\" align=\"center\">\r\n                                       </el-table-column>\r\n                                       <el-table-column label=\"当前库容\" min-width=\"100\" prop=\"KR\" align=\"center\">\r\n                                       </el-table-column>\r\n                                    </el-table-column>\r\n                                </el-table-column>\r\n                            </el-table-column>\r\n                        </template>\r\n                      </el-table>\r\n                </Content>\r\n\t</div>\r\n</template>\r\n<script type=\"text/javascript\">\r\n        import WarmDataConfig from \"@/assets/commonJS/WarmDataConfig\";\r\n        import App from \"@/App.vue\";\r\n\texport default {\r\n        data(){\r\n            return{\r\n                loading:false,\r\n                theight:window.innerHeight-231,\r\n                form:{\r\n                    date:''\r\n                },\r\n                date:'',\r\n                data:[],\r\n                cols: [],\r\n                totaldata:{},\r\n                expireTimeOption:{\r\n                    disabledDate(date) {\r\n\t\t\t          \t//disabledDate 文档上：设置禁用状态，参数为当前日期，要求返回 Boolean\r\n                          var nowdate = new Date();\r\n                          nowdate.setMinutes(0);\r\n                          nowdate.setSeconds(0);\r\n\t\t\t\t\t\treturn date.getTime() > nowdate.getTime();\r\n\t\t\t\t\t}\r\n                }\r\n            }\r\n        },\r\n                // 引入过滤方法到此组件\r\n        mixins: [WarmDataConfig],\r\n        mounted(){\r\n            var date = new Date();\r\n          var Month = date.getMonth()+1;\r\n          var datelist = new Array();\r\n          var Hours = date.getHours()-1;\r\n          if(Hours<0){\r\n              Hours=0;\r\n          }\r\n          var Minutes = date.getMinutes();\r\n          var Seconds = date.getSeconds();\r\n          var Dateday=date.getDate();\r\n          if (Hours<10) {\r\n            Hours = `0${Hours}`\r\n          }\r\n          if (Minutes<10) {\r\n            Minutes = `0${Minutes}`\r\n          }\r\n          if (Seconds<10) {\r\n            Seconds = `0${Seconds}`\r\n          }\r\n          if (Month<10) {\r\n            Month = `0${Month}`\r\n          }\r\n          if(Dateday<10){\r\n            Dateday = `0${Dateday}`\r\n          }\r\n          datelist[1] = `${date.getFullYear()}-${Month}-${Dateday} ${Hours}:59:59`;\r\n          datelist[0] = `${date.getFullYear()}-${Month}-${Dateday} 00:00:00`;\r\n          this.form.date=datelist;\r\n            this.Reload();\r\n        },\r\n        methods:{\r\n            timechange(date){\r\n                this.form.date = date;\r\n                this.Reload();\r\n            },\r\n            Reload(){\r\n                this.loading = true;\r\n                var lastbtime1=new Date(this.form.date[0]);\r\n                var lastbtime2=new Date(lastbtime1.setHours(lastbtime1.getHours()-1));\r\n                var lastetime1=new Date(this.form.date[1]);\r\n                var lastetime2=new Date(lastetime1.setHours(lastetime1.getHours()-1));\r\n                var lasttime=new Array();\r\n                lasttime.push(lastbtime2);\r\n                lasttime.push(lastetime2);\r\n                var lastcon=this.datetimeFilter(lasttime);\r\n                this.axios.get('/fieldinfo/getskhourinfo',{params:{begintime:this.form.date[0],endtime:this.form.date[1],addtion1:lastcon[0],addtion2:lastcon[1]}}).then((res)=>{\r\n                    this.loading = false;\r\n                    this.totaldata=res.data.total;\r\n                    this.cols=res.data.header;\r\n                    this.data = res.data.rows;\r\n                });\r\n            },\r\n            exportSkHour(){\r\n                var lastbtime1=new Date(this.form.date[0]);\r\n                var lastbtime2=new Date(lastbtime1.setHours(lastbtime1.getHours()-1));\r\n                var lastetime1=new Date(this.form.date[1]);\r\n                var lastetime2=new Date(lastetime1.setHours(lastetime1.getHours()-1));\r\n                var lasttime=new Array();\r\n                lasttime.push(lastbtime2);\r\n                lasttime.push(lastetime2);\r\n                var lastcon=this.datetimeFilter(lasttime);\r\n                var params='begintime='+this.form.date[0]+'&endtime='+this.form.date[1]+'&addtion1='+lastcon[0]+'&addtion2='+lastcon[1];\r\n                window.location.href='/excel/exportskhour?'+params;\r\n            },                \r\n        },\r\n    }\r\n</script>"]}]}