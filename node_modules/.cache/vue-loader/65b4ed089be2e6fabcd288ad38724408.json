{"remainingRequest":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\visualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-import.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-import.vue","mtime":1645514326432},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n        data(){\r\n            return{\r\n                href:'',\r\n                filename:'',\r\n                form:{\r\n                    tm:'',\r\n                    upMan:'',\r\n                    meTm:'',\r\n                    meMan:'',\r\n                    memo:''\r\n                },\r\n            }\r\n        },\r\n        mounted(){\r\n            this.href='/strealmanage/uploadfile';\r\n            var date = new Date();\r\n            var Month = date.getMonth() + 1;\r\n            Month=Month<10?\"0\"+Month:Month;\r\n            var day=date.getDate();\r\n            day=day<10?\"0\"+day:day;\r\n            this.form.tm = date.getFullYear() + '-' + Month + '-' + day;\r\n            this.form.meTm=date.getFullYear() + '-' + Month + '-' + day;\r\n        },\r\n        methods:{\r\n            upLoadSuccess(response, file, fileList) {\r\n                if(response==\"ok\"){\r\n                    this.$message({ type: 'success', message: '上传文件成功！' }); \r\n                    this.$emit('closeupload',1); \r\n                }else{\r\n                    this.$message({ type: 'warning', message: response });\r\n                }\r\n                             \r\n            },\r\n            onSubmit(){\r\n                if(this.form.upMan==''){\r\n                    this.$message({ type: 'warning', message: '请输入上传人员！' });\r\n                    return false; \r\n                }\r\n                if(this.form.meMan==''){\r\n                    this.$message({ type: 'warning', message: '请输入测量人员！' });\r\n                    return false; \r\n                }\r\n                if(this.filename==''){\r\n                    this.$message({ type: 'warning', message: '请选择文件！' });\r\n                    return false;\r\n                }\r\n                this.axios.get('/strealmanage/existfile',{params:{fileName:this.filename}}).then((res)=>{\r\n                   var sign=res.data;\r\n                   if(sign==\"1\"){\r\n                       this.$message({ type: 'warning', message: '此文件已上传！' });\r\n                       return false;\r\n                   }else{\r\n                       this.$refs.upload.submit(); \r\n                   }\r\n                });                           \r\n            },\r\n            exceedHander(){\r\n                this.$message.warning('请勿上传多个文件!');\r\n            },\r\n            onCanle(){\r\n            this.$emit('closeupload',0);\r\n            },\r\n            testOnchange(file, fileList){\r\n                this.filename=file.name;\r\n            }\r\n        },\r\n}\r\n",{"version":3,"sources":["Detail-import.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail-import.vue","sourceRoot":"src/warm/warm-detail","sourcesContent":["<template>\r\n\t<div style=\"width:540px;\">\r\n            <el-form ref=\"form\" :inline=\"true\" :model=\"form\" label-width=\"90px\" size=\"small\" class=\"demo-form-inline\">\r\n                <el-form-item label=\"上传日期：\">\r\n                        <el-date-picker\r\n                            style=\"width: 160px\"\r\n                            v-model=\"form.tm\"\r\n                            type=\"date\"\r\n                            placeholder=\"选择日期\"\r\n                            format=\"yyyy 年 MM 月 dd 日\"\r\n                            value-format=\"yyyy-MM-dd\"\r\n                            size=\"small\"\r\n                            :clearable=\"false\">\r\n                    </el-date-picker>\r\n                    <span style=\"color:red\">*</span>\r\n                </el-form-item>\r\n                <el-form-item label=\"上传人员：\">\r\n                    <Input v-model=\"form.upMan\" :value=\"form.upMan\" clearable style=\"width:160px\"/>\r\n                    <span style=\"color:red\">*</span>\r\n                </el-form-item>\r\n                <el-form-item label=\"测量日期：\">\r\n                    <el-date-picker\r\n                            style=\"width: 160px\"\r\n                            v-model=\"form.meTm\"\r\n                            type=\"date\"\r\n                            placeholder=\"选择日期\"\r\n                            format=\"yyyy 年 MM 月 dd 日\"\r\n                            value-format=\"yyyy-MM-dd\"\r\n                            size=\"small\"\r\n                            :clearable=\"false\">\r\n                    </el-date-picker>\r\n                    <span style=\"color:red\">*</span>\r\n                </el-form-item>\r\n                <el-form-item label=\"测量人：\">\r\n                    <Input v-model=\"form.meMan\" :value=\"form.meMan\" clearable style=\"width:160px\"/>\r\n                    <span style=\"color:red\">*</span>\r\n                </el-form-item>\r\n                <el-form-item label=\"备注：\">\r\n                    <Input type=\"textarea\" v-model=\"form.memo\" :rows=\"2\" :value=\"form.memo\" clearable style=\"width:425px\" />\r\n                </el-form-item>\r\n                <el-form-item label=\"文件路径：\" style=\"width:512px\">\r\n                   <el-upload\r\n                    class=\"upload-demo\"\r\n                    ref=\"upload\"\r\n                    :limit=\"1\"\r\n                    :action=\"href\"\r\n                    :data=\"form\"\r\n                    :auto-upload=\"false\"\r\n                    :on-success=\"upLoadSuccess\"\r\n                    :on-change=\"testOnchange\"\r\n                    :on-exceed=\"exceedHander\"\r\n                    accept=\".xls,.xlsx\">\r\n                    <el-button slot=\"trigger\" size=\"small\" type=\"primary\">选取文件</el-button>\r\n                    <div slot=\"tip\" class=\"el-upload__tip\">只能上传Excel文件</div>\r\n                    </el-upload>\r\n                </el-form-item>\r\n                <el-form-item style=\"width:425px;padding-left:90px;\">\r\n                    <Button  type=\"primary\" @click=\"onSubmit\" icon=\"md-cloud-upload\">上传</Button>\r\n                    <Button  @click=\"onCanle\" style=\"margin-left:20px;\" icon=\"md-trash\">取消</Button>\r\n                </el-form-item>\r\n            </el-form>\r\n    </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nexport default {\r\n        data(){\r\n            return{\r\n                href:'',\r\n                filename:'',\r\n                form:{\r\n                    tm:'',\r\n                    upMan:'',\r\n                    meTm:'',\r\n                    meMan:'',\r\n                    memo:''\r\n                },\r\n            }\r\n        },\r\n        mounted(){\r\n            this.href='/strealmanage/uploadfile';\r\n            var date = new Date();\r\n            var Month = date.getMonth() + 1;\r\n            Month=Month<10?\"0\"+Month:Month;\r\n            var day=date.getDate();\r\n            day=day<10?\"0\"+day:day;\r\n            this.form.tm = date.getFullYear() + '-' + Month + '-' + day;\r\n            this.form.meTm=date.getFullYear() + '-' + Month + '-' + day;\r\n        },\r\n        methods:{\r\n            upLoadSuccess(response, file, fileList) {\r\n                if(response==\"ok\"){\r\n                    this.$message({ type: 'success', message: '上传文件成功！' }); \r\n                    this.$emit('closeupload',1); \r\n                }else{\r\n                    this.$message({ type: 'warning', message: response });\r\n                }\r\n                             \r\n            },\r\n            onSubmit(){\r\n                if(this.form.upMan==''){\r\n                    this.$message({ type: 'warning', message: '请输入上传人员！' });\r\n                    return false; \r\n                }\r\n                if(this.form.meMan==''){\r\n                    this.$message({ type: 'warning', message: '请输入测量人员！' });\r\n                    return false; \r\n                }\r\n                if(this.filename==''){\r\n                    this.$message({ type: 'warning', message: '请选择文件！' });\r\n                    return false;\r\n                }\r\n                this.axios.get('/strealmanage/existfile',{params:{fileName:this.filename}}).then((res)=>{\r\n                   var sign=res.data;\r\n                   if(sign==\"1\"){\r\n                       this.$message({ type: 'warning', message: '此文件已上传！' });\r\n                       return false;\r\n                   }else{\r\n                       this.$refs.upload.submit(); \r\n                   }\r\n                });                           \r\n            },\r\n            exceedHander(){\r\n                this.$message.warning('请勿上传多个文件!');\r\n            },\r\n            onCanle(){\r\n            this.$emit('closeupload',0);\r\n            },\r\n            testOnchange(file, fileList){\r\n                this.filename=file.name;\r\n            }\r\n        },\r\n}\r\n</script>"]}]}