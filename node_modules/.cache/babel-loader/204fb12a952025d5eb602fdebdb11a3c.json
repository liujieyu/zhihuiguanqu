{"remainingRequest":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js!D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-dutyinfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-dutyinfo.vue","mtime":1645514326432},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\babel.config.js","mtime":1577669403468},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.to-string\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport WarmDataConfig from \"@/assets/commonJS/WarmDataConfig\";\nexport default {\n  props: {\n    info: {}\n  },\n  data: function data() {\n    var checkPhone = function checkPhone(rule, value, callback) {\n      if (!value) {\n        return callback(new Error('手机号不能为空'));\n      } else {\n        var reg = /^1[3|4|5|7|8][0-9]\\d{8}$/;\n        console.log(reg.test(value));\n\n        if (reg.test(value)) {\n          callback();\n        } else {\n          return callback(new Error('请输入正确的手机号'));\n        }\n      }\n    };\n\n    var validatePhone = function validatePhone(rule, value, callback) {\n      if (value != null && value !== '') {\n        var reg = /^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/;\n\n        if (!reg.test(value)) {\n          callback(new Error('请输入正确的办公电话'));\n        } else {\n          callback();\n        }\n      } else {\n        callback();\n      }\n\n      callback();\n    };\n\n    var checkwzpx = function checkwzpx(rule, value, callback) {\n      if (value != null && value !== '') {\n        var reg = /^[0-9]*$/;\n\n        if (!reg.test(value)) {\n          callback(new Error('请输入数字'));\n        } else {\n          callback();\n        }\n      }\n\n      callback();\n    };\n\n    return {\n      dutytypes: [],\n      form: {\n        yr: new Date().getFullYear().toString(),\n        nm: '',\n        mobile: '',\n        ophone: '',\n        unit: '',\n        position: '',\n        dutytype: '',\n        wzpx: '',\n        id: 0,\n        opsign: 1 // 1 add 2 update\n\n      },\n      rules: {\n        yr: [{\n          required: true,\n          message: '请选择年份',\n          trigger: 'change'\n        }],\n        nm: [{\n          required: true,\n          message: '请输入姓名',\n          trigger: 'blur'\n        }],\n        mobile: [{\n          required: true,\n          validator: checkPhone,\n          trigger: 'blur'\n        }],\n        ophone: [{\n          validator: validatePhone,\n          trigger: 'blur'\n        }],\n        wzpx: [{\n          validator: checkwzpx,\n          message: '请输入数字',\n          trigger: 'blur'\n        }]\n      }\n    };\n  },\n  // 引入过滤方法到此组件\n  mixins: [WarmDataConfig],\n  mounted: function mounted() {\n    var _this = this;\n\n    //if(this.info.sign==\"add\"){\n    //    this.form.yr=new Date().getFullYear().toString();\n    //}\n    //人员类型\n    this.Get_WrpFieldinfo('HHPDI_Duty_Plan', 'TYPE', function (data) {\n      _this.dutytypes = data;\n\n      if (_this.info.sign == \"update\") {\n        _this.form.yr = _this.info.YR.toString();\n        _this.form.nm = _this.info.NM;\n        _this.form.mobile = _this.info.MOBILE;\n        _this.form.ophone = _this.info.OPHONE;\n        _this.form.unit = _this.info.UNIT;\n        _this.form.position = _this.info.POSITION;\n        _this.form.dutytype = _this.info.DUTYTYPE == null ? '' : _this.info.DUTYTYPE.toString();\n        _this.form.wzpx = _this.info.WZPX;\n        _this.form.id = _this.info.ID;\n      }\n    });\n  },\n  methods: {\n    submitForm: function submitForm(formName) {\n      var _this2 = this;\n\n      this.$refs[formName].validate(function (valid) {\n        if (valid) {\n          if (_this2.info.sign == \"add\") {\n            _this2.form.opsign = 1;\n          } else {\n            _this2.form.opsign = 2;\n          }\n\n          var url = '/alarm/editdutyinfo';\n          var success;\n\n          if (_this2.info.sign == \"add\") {\n            success = '新增值班通讯录成功！';\n          } else {\n            success = '修改值班通讯录成功！';\n          }\n\n          _this2.axios.post(url, _this2.form).then(function (res) {\n            if (res.data == \"ok\") {\n              _this2.$message({\n                message: success,\n                type: 'success'\n              });\n\n              _this2.$emit('closedailog');\n\n              if (_this2.info.sign == \"add\") {\n                _this2.$refs['form'].resetFields();\n              }\n            }\n          });\n        } else {\n          return false;\n        }\n      });\n    },\n    resetForm: function resetForm(formName) {\n      this.$refs[formName].resetFields();\n    }\n  }\n};",{"version":3,"sources":["Detail-dutyinfo.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div>\r\n      <el-form ref=\"form\" :inline=\"true\" :model=\"form\" label-width=\"100px\" size=\"small\" class=\"demo-form-inline\" :rules=\"rules\" style=\"width:580px\">\r\n                <el-form-item label=\"年份：\" prop=\"yr\">\r\n                    <el-date-picker\r\n                            style=\"width: 180px;\"\r\n                            v-model=\"form.yr\"\r\n                            format=\"yyyy年\"\r\n                            value-format=\"yyyy\"\r\n                            type=\"year\"\r\n                            size=\"small\"\r\n                            :clearable=\"false\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item label=\"姓名：\" prop=\"nm\">\r\n                    <el-input v-model=\"form.nm\" :value=\"form.nm\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号码：\" prop=\"mobile\">\r\n                    <el-input v-model=\"form.mobile\" :value=\"form.mobile\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"办公电话：\" prop=\"ophone\">\r\n                    <el-input v-model=\"form.ophone\" :value=\"form.ophone\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>               \r\n                <el-form-item label=\"部门：\" prop=\"unit\">\r\n                    <el-input v-model=\"form.unit\" :value=\"form.unit\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"职务：\" prop=\"position\">\r\n                    <el-input v-model=\"form.position\" :value=\"form.position\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"人员类型：\" prop=\"dutytype\">\r\n                    <el-select v-model=\"form.dutytype\" placeholder=\"请选择人员类型\" style=\"width:180px\" clearable>\r\n                    <el-option v-for=\"item in dutytypes\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"位置排序：\" prop=\"wzpx\">\r\n                    <el-input v-model=\"form.wzpx\" :value=\"form.wzpx\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <Button  type=\"primary\" @click=\"submitForm('form')\" icon=\"md-cloud-upload\" style=\"margin-left:200px;\">提交</Button>\r\n                    <Button  @click=\"resetForm('form')\" style=\"margin-left:20px;\" icon=\"md-trash\" >重置</Button>\r\n                </el-form-item>\r\n      </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport WarmDataConfig from \"@/assets/commonJS/WarmDataConfig\";\r\nexport default {\r\n  props: {\r\n    info:{}\r\n  },\r\n  data(){\r\n    var checkPhone = (rule, value, callback) => {\r\n    if (!value) {\r\n        return callback(new Error('手机号不能为空'));\r\n    } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\r\n        console.log(reg.test(value));\r\n        if (reg.test(value)) {\r\n        callback();\r\n        } else {\r\n        return callback(new Error('请输入正确的手机号'));\r\n        }\r\n    }\r\n    };\r\n    var validatePhone = (rule, value, callback) => {\r\n        if (value !=null && value !== '') { \r\n            var reg =/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/;\r\n            if(!reg.test(value)){\r\n              callback(new Error('请输入正确的办公电话'));\r\n            }else{\r\n                callback();\r\n            }\r\n          }else{\r\n              callback();\r\n          }\r\n          callback();\r\n      };\r\n    var checkwzpx=(rule,value,callback)=>{\r\n        if(value !=null && value !== ''){\r\n            var reg=/^[0-9]*$/;\r\n            if(!reg.test(value)){\r\n                callback(new Error('请输入数字'));\r\n            }else{\r\n                callback();\r\n            }\r\n        }\r\n        callback();\r\n    };\r\n    return{        \r\n        dutytypes:[],\r\n        form:{\r\n            yr:new Date().getFullYear().toString(),\r\n            nm:'',\r\n            mobile:'',\r\n            ophone:'',\r\n            unit:'',\r\n            position:'',\r\n            dutytype:'',\r\n            wzpx:'',\r\n            id:0,\r\n            opsign:1  // 1 add 2 update\r\n        },\r\n        rules: {\r\n            yr:[\r\n                { required: true, message: '请选择年份', trigger: 'change' }\r\n            ],\r\n            nm:[\r\n                { required: true, message: '请输入姓名', trigger: 'blur' }\r\n            ],\r\n            mobile:[\r\n                {required: true, validator: checkPhone, trigger: 'blur'}\r\n            ],\r\n            ophone:[\r\n                {validator: validatePhone, trigger: 'blur'}\r\n            ],\r\n            wzpx:[\r\n                {validator:checkwzpx,message:'请输入数字',trigger:'blur'}\r\n            ],\r\n        }\r\n    }\r\n  },\r\n  // 引入过滤方法到此组件\r\n  mixins: [WarmDataConfig],\r\n  mounted(){\r\n           //if(this.info.sign==\"add\"){\r\n           //    this.form.yr=new Date().getFullYear().toString();\r\n           //}\r\n            //人员类型\r\n            this.Get_WrpFieldinfo('HHPDI_Duty_Plan','TYPE',data => {\r\n                this.dutytypes = data;\r\n                if(this.info.sign==\"update\"){\r\n                    this.form.yr=this.info.YR.toString();\r\n                    this.form.nm=this.info.NM;\r\n                    this.form.mobile=this.info.MOBILE;\r\n                    this.form.ophone=this.info.OPHONE;\r\n                    this.form.unit=this.info.UNIT;\r\n                    this.form.position=this.info.POSITION;\r\n                    this.form.dutytype=this.info.DUTYTYPE==null?'':this.info.DUTYTYPE.toString();\r\n                    this.form.wzpx=this.info.WZPX;\r\n                    this.form.id=this.info.ID;\r\n                }\r\n            });\r\n        },\r\n  methods:{\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            if(this.info.sign==\"add\"){\r\n                this.form.opsign=1;\r\n            }else{\r\n                this.form.opsign=2;\r\n            }\r\n            let url='/alarm/editdutyinfo';\r\n          let success;\r\n          if(this.info.sign==\"add\"){\r\n              success='新增值班通讯录成功！';\r\n          }else{\r\n              success='修改值班通讯录成功！';\r\n          }\r\n          this.axios.post(url,this.form).then((res)=>{\r\n            if(res.data==\"ok\"){\r\n                this.$message({message:success,type:'success'});\r\n                this.$emit('closedailog');\r\n                if(this.info.sign==\"add\"){\r\n                    this.$refs['form'].resetFields();\r\n                }\r\n            }                   \r\n        });\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      }\r\n  },\r\n}\r\n</script>"],"sourceRoot":"src/warm/warm-detail"}]}