(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4867"],{"3acf":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Content",{style:{padding:"24px 24px 20px 24px",background:"#fff"}},[a("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",gutter:16,justify:"start"}},[a("Col",[t._v("\n                时间:\n                "),a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"month",placeholder:"选择日期",format:"yyyy 年 MM 月","value-format":"yyyy-MM",size:"small",clearable:!1},on:{change:t.timechange},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("Col",[t._v("\n                行政区划:\n                "),a("el-cascader",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"请选择地址",options:t.form.adressList,"change-on-select":""},on:{change:t.XZQHsearch},model:{value:t.form.model_adress,callback:function(e){t.$set(t.form,"model_adress",e)},expression:"form.model_adress"}})],1),a("Col",[t._v("\n                渠道:\n                "),a("el-cascader",{staticStyle:{width:"150px"},attrs:{clearable:"",size:"small",placeholder:"请选择渠道",options:t.form.qudaoList,"change-on-select":""},on:{change:t.QDsearch},model:{value:t.form.model_qudao,callback:function(e){t.$set(t.form,"model_qudao",e)},expression:"form.model_qudao"}})],1),a("Col",{staticStyle:{display:"flex","justify-content":"flex-start","align-items":"center","margin-top":"10px"}},[t._v("\n                站点类型:\n                "),a("Select",{staticStyle:{width:"120px","margin-left":"5px","margin-right":"10px"},attrs:{clearable:""},on:{"on-change":t.TYPEsearch},model:{value:t.form.zdlx,callback:function(e){t.$set(t.form,"zdlx",e)},expression:"form.zdlx"}},t._l(t.zdlxlist,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1),a("Input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.form.searchmsg,callback:function(e){t.$set(t.form,"searchmsg",e)},expression:"form.searchmsg"}}),a("Button",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")]),a("Button",{staticStyle:{width:"auto","margin-right":"0px"},attrs:{type:"primary"},on:{click:t.optable}},[t._v("综合报表")])],1)],1),a("Divider"),a("Row",{staticStyle:{"font-size":"16px"}},[a("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("总站数："+t._s(t.Tables.total)+" \n                  单位：水深 m，流量 m³/s，水量 m³")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"",height:"450"},on:{"cell-click":t.cellclick,"sort-change":t.sort_change}},[a("el-table-column",{attrs:{label:" ",type:"index",align:"center",width:"65",index:t.indexMethod}}),a("el-table-column",{attrs:{prop:"stnm",label:"站名",sortable:"",align:"center",width:""}}),a("el-table-column",{attrs:{prop:"MA_Z",label:"平均水深",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"MA_Q",label:"平均流量",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"MWQ",label:"月累计水量",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"stype",label:"站点类型",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"canal_name",label:"渠道",sortable:"",align:"center"}}),a("el-table-column",{attrs:{prop:"adnm",label:"地址",sortable:"",align:"center"}})],1),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}})])],1),a("el-dialog",{attrs:{title:"综合报表",visible:t.dialog_detail_showing,width:"1200px","append-to-body":""},on:{"update:visible":function(e){t.dialog_detail_showing=e}}},[a("Row",[a("Col",{staticStyle:{"text-align":"center","font-size":"20px"}},[t._v("\n                    "+t._s(this.form.date)+" 渠道水情月表\n                  ")])],1),a("Row",[a("Col",[t._v("\n                  总站数:"+t._s(t.Tables.total)+",单位：水深 m，流量 m³/s，水量 m³\n                  ")]),a("Col",{staticStyle:{position:"absolute",right:"0",bottom:"0px"}},[a("Button",{staticStyle:{width:"auto","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")])],1)],1),a("Divider"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.Tables.data,border:"",height:"500"},on:{"sort-change":t.sort_change}},[a("el-table-column",{attrs:{prop:"canal_name",label:"渠道",sortable:"",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"stnm",label:"站名",sortable:"",align:"center",width:""}}),a("el-table-column",{attrs:{prop:"MA_Z",label:"平均水深",sortable:"",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"MA_Q",label:"平均流量",sortable:"",align:"center",width:"240"}}),a("el-table-column",{attrs:{prop:"MWQ",label:"月累计水量",sortable:"",align:"center",width:"240"}})],1)],1)],1)},s=[],i=a("f499"),o=a.n(i),r=a("aaf8"),n=a("a53b"),d=(a("3dfd"),{data:function(){return{loading:!1,dialog_detail_showing:!1,zdlxlist:[{value:"1",label:"明渠"},{value:"2",label:"堰槽"},{value:"3",label:"渡槽"},{value:"4",label:"管道"}],form:{adressList:[],qudaoList:[],model_adress:"",zdlx:"",model_qudao:"",date:"",searchmsg:"",xzqh:"",qd:"",YE:"",MON:"",field:""},date:"",data:[],xzqhdata:[],xzqh:"",list_input:{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1},Tables:{title:"",total:"",data:[]},searchs:"",search1:"&STNM=like,",search2:"&TM=",search3:"&",search4:"&",search5:"&",timesearch:""}},mixins:[r["a"],n["a"]],mounted:function(){var t=new Date,e=t.getMonth()+1;this.form.date=t.getFullYear()+"-"+e,this.form.YE=t.getFullYear(),this.form.MON=e,this.Reload()},methods:{sort_change:function(t){console.log(t),"ascending"==t.order&&(this.form.field=t.prop,this.Reload()),"descending"==t.order&&(this.form.field=t.prop+" desc",this.Reload()),null==t.order&&(this.form.field="",this.Reload())},optable:function(){this.dialog_detail_showing=!0},cellclick:function(t,e,a,l){var s=new Object;s.graphic=new Object,s.graphic.attributes=t,s.graphic.attributes.itype="qudaoshuiqing",s.graphic.attributes.rowinfo=JSON.parse(o()(t)),s.graphic.attributes.STNM=s.graphic.attributes.stnm,s.graphic.attributes.STCD=s.graphic.attributes.stcd,s.graphic.attributes.rowinfo.STNM=s.graphic.attributes.rowinfo.stnm,s.graphic.attributes.rowinfo.STCD=s.graphic.attributes.rowinfo.stcd,s.graphic.attributes.rowinfo.tableType={qdsq:"monthTable"};var i=new Object;i.itype="qudaoshuiqing",console.log("evt",s),this.$App.showDrawer(s,i)},err:function(){this.$Message.warning("该功能还在开发中...")},indexMethod:function(t){return t+1+this.list_input.pagesize*(this.list_input.current-1)},search:function(){""!=this.form.searchmsg?this.searchs="&STNM="+this.form.searchmsg:this.searchs="",this.Reload()},timechange:function(){console.log(this.form.date),this.form.YE=this.form.date.substring(0,4),this.form.MON=this.form.date.substring(6,7),this.Reload()},XZQHsearch:function(){console.log(this.form.model_adress),this.Reload()},QDsearch:function(){console.log(this.form.model_qudao),this.Reload()},TYPEsearch:function(){console.log(this.form.zdlx),""==this.form.zdlx&&this.form.zdlx,this.Reload()},Reload:function(){var t=this;if(this.loading=!0,0==this.form.model_adress.length&&(this.form.xzqh=""),1==this.form.model_adress.length){var e=this.form.model_adress[0];e=e.substring(0,6),this.form.xzqh=e}if(2==this.form.model_adress.length){var a=this.form.model_adress[1];a=a.substring(0,9),this.form.xzqh=a}if(3==this.form.model_adress.length){var l=this.form.model_adress[2];l=l.substring(0,12),this.form.xzqh=l}0==this.form.model_qudao.length&&(this.form.qd=""),1==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[0]),2==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[1]),this.axios.get("/guanqu/qudaoshuiqing/lishi_yuebiao?"+this.searchs,{params:{YE:this.form.YE,MON:this.form.MON,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,STYPE:this.form.zdlx}}).then(function(e){console.log(e),t.loading=!1,t.data=e.data.list,t.Tables.total=e.data.total,t.list_input.total=e.data.total,t.Tables.title=t.data[0].YE+"-"+t.data[0].MON;for(var a=0;a<t.data.length;a++)t.data[a].MA_Z=t.Z_Filter(t.data[a].MA_Z),t.data[a].MA_Q=t.Z_Filter(t.data[a].MA_Q,3),t.data[a].MWQ=t.Z_Filter(t.data[a].MWQ,3)}),this.axios.get("/guanqu/qudaoshuiqing/lishi_yuebiao?"+this.searchs,{params:{YE:this.form.YE,MON:this.form.MON,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,STYPE:this.form.zdlx}}).then(function(e){console.log(e),t.loading=!1,t.Tables.data=e.data.list;for(var a=0;a<t.data.length;a++)t.Tables.data[a].MA_Z=t.Z_Filter(t.Tables.data[a].MA_Z),t.Tables.data[a].MA_Q=t.Z_Filter(t.Tables.data[a].MA_Q,3),t.Tables.data[a].MWQ=t.Z_Filter(t.Tables.data[a].MWQ,3)}),this.getTableData_WRP_AD_B(function(e){t.form.adressList=e}),this.getTableData_WRP_IrrBTCanalSystem(function(e){t.form.qudaoList=e})},CurrentChange:function(t){this.list_input.current=t,this.data[0].ID=t*this.list_input.pagesize,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()}},components:{},created:function(){console.dir("showDrawer",this.$showDrawer)}}),h=d,c=a("2877"),m=Object(c["a"])(h,l,s,!1,null,null,null);e["default"]=m.exports}}]);