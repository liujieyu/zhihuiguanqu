{"remainingRequest":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\visualplace\\zhihuiguanqu\\src\\components\\Details\\Details-shipinzhan.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\src\\components\\Details\\Details-shipinzhan.vue","mtime":1662372195101},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport FilterMethods from \"../../assets/commonJS/FilterMethods\"; // 过滤方法\r\nimport GetDataMethods from \"../../assets/commonJS/GetDataMethods\"; // 获取数据方法\r\nimport { timingSafeEqual } from \"crypto\";\r\nexport default {\r\n  props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n      // 激活标签栏\r\n      activeName: \"shipin\",\r\n      // 站点信息\r\n      siteInfo: {},\r\n      //预警数据\r\n      yujingdata: {\r\n        FWL: null, // 4-6月汛限水位\r\n        FWL79: null, // 7-9月汛限水位\r\n        SJWL: null, // 设计洪水位\r\n        JYWL: null // 经验水位\r\n      },\r\n      //降雨预警\r\n      jiangyu_warm:{\r\n        LEVEL:null,//降雨预警等级\r\n        RAIN1:null,\r\n        RAIN3:null,\r\n        RAIN6:null,\r\n        RAIN12:null,\r\n        RAIN24:null,\r\n      },\r\n      // 表格数据\r\n      table: {\r\n        tuxiang: {\r\n          // 日期时间选择器的选项配置\r\n          datePickerOptions: {\r\n            shortcuts: [\r\n              {\r\n                text: \"最近6小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 6);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近12小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 12);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近24小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 24);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近36小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 36);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近72小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 72);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          // 日期时间选择器类型\r\n          datePickerType: \"datetimerange\",\r\n          // 日期时间选择器值\r\n          date: null,\r\n          // 表格是否加载中\r\n          loading: false,\r\n          // 当前页\r\n          currentPage: 1,\r\n          // 每页显示数量\r\n          pageSizes: 20,\r\n          // 总条数\r\n          total: true,\r\n          Rows: [\r\n          ]\r\n        }\r\n      },\r\n      //   列表对象\r\n      list: {\r\n        imageList: []\r\n      },\r\n      //   导出按钮加载控制\r\n      outPutLoading: false,\r\n      //   导出确认对话框控制\r\n      outPutModal: false,\r\n      //   整块区域加载控制\r\n      boxLoading: false\r\n    };\r\n  },\r\n  mixins: [FilterMethods, GetDataMethods],\r\n  methods: {\r\n    //   导出站点信息\r\n    outPutSiteInfo() {\r\n      //   关闭导出确认对话框\r\n      this.outPutModal = false;\r\n      //   按钮加载\r\n      this.outPutLoading = true;\r\n      setTimeout(() => {\r\n        this.outPutLoading = false;\r\n        this.$Modal.success({\r\n          title: \"关于导出\",\r\n          content: \"站点信息表导出成功\"\r\n        });\r\n      }, 500);\r\n    },\r\n    developing_tip() {\r\n      this.$Message.warning(\"从功能正在开发中...\");\r\n    },\r\n    //   确认导出\r\n    outPutSure() {\r\n      this.outPutSiteInfo();\r\n    },\r\n    // 搜索\r\n    search() {\r\n      // 表格加载中\r\n      this.table.loading = true;\r\n      setTimeout(() => {\r\n        // var newList = this.featrue.Rows.map((val, index) => {\r\n        //   return val.attributes;\r\n        // });\r\n\r\n        // this.table.Rows = newList;\r\n        // 取消表格加载\r\n        this.table.loading = false;\r\n      }, 1000);\r\n    },\r\n    // 设置水库水情预警信息\r\n    set_SKSQ_alarmInfo(STCD) {\r\n      console.warn(\"set_SKSQ_alarmInfo\",STCD)\r\n      this.$GetData.Survey_History_SKSQ(\r\n        \"alarmTable\",\r\n        {\r\n          STCD: STCD,\r\n        },\r\n        true,\r\n        data => {\r\n          var yujingdata = data.data[0];\r\n\r\n          this.yujingdata.FWL = yujingdata.FWL;\r\n          this.yujingdata.FWL79 = yujingdata.FWL79;\r\n          this.yujingdata.SJWL = yujingdata.SJWL;\r\n          this.yujingdata.JYWL = yujingdata.JYWL;\r\n        }\r\n      );\r\n    },\r\n        search() {\r\n      // 表格加载中\r\n      this.table.loading = true;\r\n      setTimeout(() => {\r\n        // var newList = this.featrue.Rows.map((val, index) => {\r\n        //   return val.attributes;\r\n        // });\r\n\r\n        // this.table.Rows = newList;\r\n        // 取消表格加载\r\n        this.table.loading = false;\r\n      }, 1000);\r\n    },\r\n    // 加载表格数据\r\n    loadTableData(list, data) {\r\n      this.table[list].Rows = data;\r\n    },\r\n    // 加载站点数据\r\n    loadSiteData(data) {\r\n      this.siteInfo = data;\r\n    },\r\n    // 根据行政区划编码获取行政区划\r\n    getCompartmentByADDVCD(callback) {\r\n      var ADDVCD = this.info.rowinfo.ADDVCD;\r\n      if (ADDVCD && ADDVCD != \"\") {\r\n        this.axios\r\n          .get(`/guanqu/admin/WRP_AD_B`, {\r\n            params: {\r\n              AD_CD: ADDVCD\r\n            }\r\n          })\r\n          .then(res => {\r\n            var data = res.data.rows;\r\n            if (typeof callback == \"function\") {\r\n              callback(data);\r\n            }\r\n          });\r\n      }\r\n    },\r\n    // 查询历史图像数据\r\n    search_tuxiang() {\r\n      this.$TableMethods.tableLoading(this.table.tuxiang);\r\n\r\n      // 传递站码参数\r\n      var body = {\r\n        STCD: this.siteInfo.STCD,\r\n        _page: this.table.tuxiang.currentPage,\r\n        _page_size: this.table.tuxiang.pageSizes,\r\n        _orderby: `TM desc`\r\n      };\r\n\r\n      // 如果有选择日期进行查询，根据表格类型传递参数\r\n      if (this.table.tuxiang.date) {\r\n        var DTT = this.$FilterData\r\n              .elDatePicker_Filter(this.table.tuxiang.date, \"include_seconds\")\r\n              .split(\",\");\r\n            body.Time_min = DTT[1];\r\n            body.Time_max = DTT[2];\r\n      }\r\n\r\n      this.$GetData.Survey_History_TX(body, true, data => {\r\n        this.$TableMethods.setTableTotal(this.table.tuxiang, data.total);\r\n        this.$TableMethods.setTableData(this.table.tuxiang, data.data);\r\n        this.$TableMethods.cancelTableLoading(this.table.tuxiang);\r\n      });\r\n    },\r\n    // 处理页码切换_图像\r\n    handleCurrentChange_tuxiang(index) {\r\n      this.table[\"tuxiang\"].currentPage = index;\r\n      this.search_tuxiang();\r\n    },\r\n    // 处理每页显示条数切换_水情数据\r\n    handleSizeChange_tuxiang(pageSizes) {\r\n      this.table[\"tuxiang\"].pageSizes = pageSizes;\r\n      this.table[\"tuxiang\"].currentPage = 1;\r\n      this.search_tuxiang();\r\n    },\r\n    // 设置图像历史表默认查询日期\r\n    setTableDefaultDate_tuxiang() {\r\n      const end = new Date();\r\n      const start = zeroPointOfTheDay();\r\n      var timeSlot = [start, end];\r\n      this.table.tuxiang.date = timeSlot;\r\n      // this.setTableDate(\"tuxiang\", timeSlot);\r\n\r\n      function zeroPointOfTheDay() {\r\n        var date = new Date();\r\n        date.setHours(0);\r\n        date.setMinutes(0);\r\n        date.setSeconds(0);\r\n        date.setMilliseconds(0);\r\n        return date;\r\n      }\r\n    },\r\n    // 处理日期时间选择器确定事件_图像\r\n    handleDatePickerChange_tuxiang(item) {\r\n      this.table.tuxiang.currentPage = 1;\r\n      this.search_tuxiang();\r\n    },\r\n    // 设置 xx表格 时间选择器值\r\n    setTableDate(tableName, val) {\r\n      this.table[tableName].date = val;\r\n    },\r\n    // 根据行政区划编码获取行政区划\r\n    getCompartmentByADDVCD(callback) {\r\n      var ADDVCD = this.info.ADDVCD;\r\n      if (ADDVCD && ADDVCD != \"\") {\r\n        this.axios\r\n          .get(`/guanqu/admin/WRP_AD_B`, {\r\n            params: {\r\n              AD_CD: ADDVCD\r\n            }\r\n          })\r\n          .then(res => {\r\n            var data = res.data.rows;\r\n            if (typeof callback == \"function\") {\r\n              callback(data);\r\n            }\r\n          });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    //判断浏览器是否为ie\r\n    var u = navigator.userAgent;\r\n    if (u.indexOf('Trident') > -1) {\r\n      \r\n    }else{\r\n      this.$message({\r\n          message: '提示：请确保在IE浏览器下使用视频监控功能！',\r\n          type: 'warning'\r\n      });\r\n    }\r\n     var level=0,color=\"#606266\";\r\n    if(level<this.info.rowinfo.SIGN1){\r\n        level=this.info.rowinfo.SIGN1;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN3){\r\n        level=this.info.rowinfo.SIGN3;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN6){\r\n        level=this.info.rowinfo.SIGN6;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN12){\r\n        level=this.info.rowinfo.SIGN12;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN24){\r\n        level=this.info.rowinfo.SIGN24;\r\n    }\r\n    if(level==0){\r\n      this.jiangyu_warm.LEVEL=\"无\";\r\n      this.jiangyu_warm.COLOR=\"#606266\";\r\n    }\r\n    if(level==1){\r\n      this.jiangyu_warm.LEVEL=\"黄色预警\";\r\n      this.jiangyu_warm.COLOR=\"yellow\";\r\n    }\r\n    if(level==2){\r\n      this.jiangyu_warm.LEVEL=\"橙色预警\";\r\n      this.jiangyu_warm.COLOR=\"orange\";\r\n    }\r\n    if(level==3){\r\n      this.jiangyu_warm.LEVEL=\"红色预警\";\r\n      this.jiangyu_warm.COLOR=\"red\";\r\n    }\r\n    this.jiangyu_warm.SIGN1=this.info.rowinfo.SIGN1;\r\n    this.jiangyu_warm.SIGN3=this.info.rowinfo.SIGN3;\r\n    this.jiangyu_warm.SIGN6=this.info.rowinfo.SIGN6;\r\n    this.jiangyu_warm.SIGN12=this.info.rowinfo.SIGN12;\r\n    this.jiangyu_warm.SIGN24=this.info.rowinfo.SIGN24;\r\n    this.jiangyu_warm.RAIN1=this.info.rowinfo.RAIN1+\"mm\";\r\n    this.jiangyu_warm.RAIN3=this.info.rowinfo.RAIN3+\"mm\";\r\n    this.jiangyu_warm.RAIN6=this.info.rowinfo.RAIN6+\"mm\";\r\n    this.jiangyu_warm.RAIN12=this.info.rowinfo.RAIN12+\"mm\";\r\n    this.jiangyu_warm.RAIN24=this.info.rowinfo.RAIN24+\"mm\";\r\n    // 区域加载中\r\n    this.boxLoading = true;\r\n    // 获取详情数据\r\n    this.axios\r\n      .get(`/guanqu/gis/details?ID=${this.info.STCD}&pk=STCD`)\r\n      .then(res => {\r\n\r\n\r\n        this.getCompartmentByADDVCD(data => {\r\n          this.siteInfo.AD_NM = data[0].AD_NM;\r\n        });\r\n        // 根据河流编码获取河流名\r\n        this.$GetData.Base_R_I({\r\n          RVCD: this.info.RVCD\r\n        },true,(data) => {\r\n          this.siteInfo.RVCD = data.data[0].RVNM;\r\n        })\r\n\r\n        // 根据流域编码获取流域名\r\n        this.$GetData.Base_B_I({\r\n          CTCD: this.info.CTCD\r\n        },true,(data) => {\r\n          this.siteInfo.CTCD = data.data[0].CTNM;\r\n        });\r\n        \r\n        // 加载站点数据\r\n        this.loadSiteData(res.data);\r\n\r\n        var details_data = res.data;\r\n        // console.log(details_data);\r\n        if (details_data.CSTYPE==3) {\r\n          var video_iframe = document.getElementById(\"video\");\r\n          video_iframe.src = 'em-playvideo.html?61.187.248.226:8866'+','+details_data.PUID+','+details_data.IDX+','+details_data.STNM\r\n        }\r\n        if (details_data.CSTYPE==1) {\r\n          var video_iframe = document.getElementById(\"video\");\r\n          // details_data.WWWPath\r\n          video_iframe.src = 'webdemo/index.html?'+details_data.PUID;\r\n        }\r\n        // 设置水库水情预警信息\r\n        this.set_SKSQ_alarmInfo(this.siteInfo.STCD);\r\n        // 设置图像历史表默认查询日期\r\n        this.setTableDefaultDate_tuxiang();\r\n        // 查询图像历史表数据\r\n        this.search_tuxiang();\r\n        // 加载取消\r\n        this.boxLoading = false;\r\n      });\r\n  }\r\n};\r\n",{"version":3,"sources":["Details-shipinzhan.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Details-shipinzhan.vue","sourceRoot":"src/components/Details","sourcesContent":["<template>\r\n  <div v-loading=\"boxLoading\">\r\n    <el-tabs v-model=\"activeName\" type=\"border-card\">\r\n      <!-- 视频 -->\r\n      <el-tab-pane name=\"shipin\">\r\n        <span slot=\"label\">\r\n          <Icon type=\"md-videocam\" style=\"font-size:20px\"/>视频\r\n        </span>\r\n        <div class=\"drawer-profile\">\r\n          <div>\r\n            <!-- 视频监控区域 -->\r\n            <Row :gutter=\"16\">\r\n              <!-- 视频 -->\r\n              <Col span=\"24\">\r\n                <!-- <img src=\"img/shuizha.9d256eb4.jpg\" alt> -->\r\n                <iframe style=\"width: 100%;height:600px;border: 0;overflow:scroll hidden;\" id=\"video\" scrolling='auto'></iframe>\r\n              </Col>\r\n            </Row>\r\n            <!-- 分割线 -->\r\n            <div class=\"divider\"></div>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n      <!--图像-->\r\n      <el-tab-pane name=\"tuxiang\">\r\n        <span slot=\"label\">\r\n          <i class=\"el-icon-picture\"></i> 图像\r\n        </span>\r\n        <div class=\"drawer-profile\">\r\n          <!-- 导出按钮\r\n          <Button size=\"small\" class=\"outPutButton\" type=\"success\" @click=\"developing_tip\">\r\n            <div>导出</div>\r\n          </Button>\r\n           -->\r\n          <div>\r\n            <!-- 查询，导出行 -->\r\n            <Row :gutter=\"32\" type=\"flex\" align=\"center\">\r\n              <!-- 开始到结束时间选择 -->\r\n              <Col span=\"32\">\r\n                <el-date-picker\r\n                  v-model=\"table.tuxiang.date\"\r\n                  range-separator=\"至\"\r\n                  start-placeholder=\"开始日期\"\r\n                  end-placeholder=\"结束日期\"\r\n                  @change=\"handleDatePickerChange_tuxiang\"\r\n                  :picker-options=\"table.tuxiang.datePickerOptions\"\r\n                  unlink-panels\r\n                  :type=\"table.tuxiang.datePickerType\"\r\n                  size=\"mini\"\r\n                  style=\"min-width: 360px\"\r\n                ></el-date-picker>\r\n              </Col>\r\n            </Row>\r\n            <!-- 分割线 -->\r\n            <div class=\"divider\"></div>\r\n\r\n            <!-- 图片列表 -->\r\n            <div>\r\n              <Row\r\n                :gutter=\"32\"\r\n                type=\"flex\"\r\n                align=\"center\"\r\n                style=\"height:495px; overflow:auto\"\r\n                v-loading=\"table.tuxiang.loading\"\r\n              >\r\n                <Col v-if=\"table.tuxiang.Rows.length > 0\" span=\"5\" v-for=\"(item, index) in table.tuxiang.Rows\" style=\"position: relative;\">\r\n                  <img\r\n                    class=\"Img\"\r\n                    :src=\"item.url\"\r\n                    @click=\"$App.enlarge_img(table.tuxiang.Rows, index)\"\r\n                    width=\"210\"\r\n                    height=\"160\"\r\n                  />\r\n                </Col>\r\n                <Col span=\"19\" v-show=\"table.tuxiang.Rows.length == 0\">\r\n                <div style=\"height:100%;display:flex;align-items:center;width:100%;margin:auto 0;\">\r\n                  暂无数据\r\n                </div>\r\n                </Col>\r\n              </Row>\r\n              <!-- 分割线 -->\r\n              <div class=\"divider\"></div>\r\n              <Row :gutter=\"32\" type=\"flex\" align=\"center\">\r\n              <!-- 开始到结束时间选择 -->\r\n              <Col span=\"32\">\r\n              <!-- 分页器 -->\r\n              <el-pagination\r\n                background\r\n                :page-size=\"table.tuxiang.pageSizes\"\r\n                layout=\"sizes, total, prev, pager, next, jumper \"\r\n                :page-sizes=\"[20, 50, 100, 200]\"\r\n                :total=\"table.tuxiang.total\"\r\n                :pager-count=\"5\"\r\n                :current-page=\"table.tuxiang.currentPage\"\r\n                @current-change=\"handleCurrentChange_tuxiang\"\r\n                @size-change=\"handleSizeChange_tuxiang\"\r\n                class=\"pageController\"\r\n                small\r\n              ></el-pagination>\r\n              </Col>\r\n              </Row>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </el-tab-pane>\r\n      <!-- 站点信息 -->\r\n      <el-tab-pane name=\"zhandianxinxi\">\r\n        <span slot=\"label\">\r\n          <i class=\"el-icon-tickets\"></i> 站点信息\r\n        </span>\r\n        <div class=\"drawer-profile\">\r\n          <!-- 信息表 -->\r\n          <div>\r\n            <!-- 信息内容 -->\r\n            <div>\r\n              <!-- table start  table_detail-->\r\n              <table\r\n                style=\"border: 1px solid #EBEEF5\"\r\n                border\r\n                cellspacing=\"0\"\r\n                width=\"100%\"\r\n                class=\"site_detail\"\r\n              >\r\n              <tr>\r\n                <td colspan=\"4\" style=\"background-color:#DEDFE0;padding:2px;\">\r\n                  <el-tag type=\"info\" effect=\"dark\" size=\"small\">基本信息</el-tag>\r\n                </td>\r\n              </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">站名：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ siteInfo.STNM || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">国家定类：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                  >{{ this.STTP_Filter(siteInfo.STTP) || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">等级：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ this.$FilterData.STGR_Filter(siteInfo.STGR) || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">行政区划：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ siteInfo.AD_NM || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">经度：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ siteInfo.LGTD || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">纬度：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ siteInfo.LTTD || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">站址：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ siteInfo.STLC || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">水系：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ siteInfo.HNNM || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">流域：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ siteInfo.CTCD || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">河流：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ siteInfo.RVCD || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">建站日期：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ siteInfo.ESSTDT || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">建设单位：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ siteInfo.DLOG || \"&nbsp;\" }}</td>\r\n                </tr>\r\n              </table>\r\n               <table\r\n                style=\"border: 1px solid #EBEEF5\"\r\n                border\r\n                cellspacing=\"0\"\r\n                width=\"100%\"\r\n                class=\"site_detail\"\r\n              >              \r\n                  <tr>\r\n                <td colspan=\"4\" style=\"background-color:#DEDFE0;padding:2px;\">\r\n                  <el-tag type=\"info\" effect=\"dark\" size=\"small\">特征水位</el-tag>\r\n                </td>\r\n                  </tr>\r\n                  <tr>\r\n                  <td align=\"right\" class=\"dt_name\">4-6月汛限水位：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ `${$FilterData.Float_Filter(yujingdata.FWL)} m`  || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">7-9月汛限水位：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                  >{{ `${$FilterData.Float_Filter(yujingdata.FWL79)} m` || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">死水位：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ `2514.00m` || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">校核水位：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ `2524.12m` || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">正常蓄水位：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  >{{ `2520.20m` || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\"></td>\r\n                  <td align=\"center\" class=\"dt_vale\"></td>\r\n                </tr>\r\n               </table>\r\n                <table\r\n                style=\"border: 1px solid #EBEEF5\"\r\n                border\r\n                cellspacing=\"0\"\r\n                width=\"100%\"\r\n                class=\"site_detail\"\r\n              >\r\n              <tr>\r\n                <td colspan=\"4\" style=\"background-color:#DEDFE0;padding:2px;\">\r\n                  <el-tag  type=\"info\" effect=\"dark\" size=\"small\">实时降雨</el-tag>\r\n                </td>\r\n                  </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">预警等级：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  ><span :style=\"{'color':jiangyu_warm.COLOR}\">{{ jiangyu_warm.LEVEL || \"&nbsp;\" }}</span></td>\r\n                  <td align=\"right\" class=\"dt_name\">1小时降雨：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                  ><span :style=\"{\r\n                        color: jiangyu_warm.SIGN1 == 3?'red' :jiangyu_warm.SIGN1 == 2?'orange' : jiangyu_warm.SIGN1 == 1?'yellow' :'#606266',\r\n                        }\">{{ jiangyu_warm.RAIN1 || \"&nbsp;\" }}</span></td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">3小时降雨：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  ><span :style=\"{\r\n                        color: jiangyu_warm.SIGN3 == 3?'red' :jiangyu_warm.SIGN3 == 2?'orange' : jiangyu_warm.SIGN3 == 1?'yellow' :'#606266',\r\n                        }\">{{ jiangyu_warm.RAIN3 || \"&nbsp;\" }}</span></td>\r\n                  <td align=\"right\" class=\"dt_name\">6小时降雨：</td>\r\n                  <td align=\"center\" class=\"dt_vale\"><span :style=\"{\r\n                        color: jiangyu_warm.SIGN6 == 3?'red' :jiangyu_warm.SIGN6 == 2?'orange' : jiangyu_warm.SIGN6 == 1?'yellow' :'#606266',\r\n                        }\">{{ jiangyu_warm.RAIN6 || \"&nbsp;\" }}</span></td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">12小时降雨：</td>\r\n                  <td\r\n                    align=\"center\"\r\n                    class=\"dt_vale\"\r\n                    style=\"border-right: 1px solid #EBEEF5\"\r\n                  ><span :style=\"{\r\n                        color: jiangyu_warm.SIGN12 == 3?'red' :jiangyu_warm.SIGN12 == 2?'orange' : jiangyu_warm.SIGN12 == 1?'yellow' :'#606266',\r\n                        }\">{{ jiangyu_warm.RAIN12 || \"&nbsp;\" }}</span></td>\r\n                  <td align=\"right\" class=\"dt_name\">24小时降雨：</td>\r\n                  <td align=\"center\" class=\"dt_vale\"><span :style=\"{\r\n                        color: jiangyu_warm.SIGN24 == 3?'red' :jiangyu_warm.SIGN24 == 2?'orange' : jiangyu_warm.SIGN24 == 1?'yellow' :'#606266',\r\n                        }\">{{ jiangyu_warm.RAIN24 || \"&nbsp;\" }}</span></td>\r\n                </tr>\r\n               </table>\r\n            </div>\r\n            <!-- 分割线 -->\r\n            <div class=\"divider\"></div>\r\n            <Row>\r\n              <el-col class=\"dt_remark\">\r\n                <Col span=\"24\">备注：{{ siteInfo.COMMENTS || \"&nbsp;\" }}</Col>\r\n              </el-col>\r\n            </Row>\r\n          </div>\r\n          <!-- 分割线 -->\r\n          <div class=\"divider\"></div>\r\n\r\n          <!-- 分割线 -->\r\n          <div class=\"divider\"></div>\r\n          <!-- 关联渠道和闸门 -->\r\n        </div>\r\n      </el-tab-pane>\r\n    </el-tabs>\r\n\r\n    <!-- 导出提示对话框 -->\r\n    <Modal\r\n      v-model=\"outPutModal\"\r\n      v-loading=\"loading\"\r\n      title=\"关于导出\"\r\n      @on-ok=\"outPutSure\"\r\n      @on-cancel=\"cancel\"\r\n    >\r\n      <p>您确认导出该站点的信息表吗？</p>\r\n    </Modal>\r\n  </div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport FilterMethods from \"../../assets/commonJS/FilterMethods\"; // 过滤方法\r\nimport GetDataMethods from \"../../assets/commonJS/GetDataMethods\"; // 获取数据方法\r\nimport { timingSafeEqual } from \"crypto\";\r\nexport default {\r\n  props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n      // 激活标签栏\r\n      activeName: \"shipin\",\r\n      // 站点信息\r\n      siteInfo: {},\r\n      //预警数据\r\n      yujingdata: {\r\n        FWL: null, // 4-6月汛限水位\r\n        FWL79: null, // 7-9月汛限水位\r\n        SJWL: null, // 设计洪水位\r\n        JYWL: null // 经验水位\r\n      },\r\n      //降雨预警\r\n      jiangyu_warm:{\r\n        LEVEL:null,//降雨预警等级\r\n        RAIN1:null,\r\n        RAIN3:null,\r\n        RAIN6:null,\r\n        RAIN12:null,\r\n        RAIN24:null,\r\n      },\r\n      // 表格数据\r\n      table: {\r\n        tuxiang: {\r\n          // 日期时间选择器的选项配置\r\n          datePickerOptions: {\r\n            shortcuts: [\r\n              {\r\n                text: \"最近6小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 6);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近12小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 12);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近24小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 24);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近36小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 36);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              },\r\n              {\r\n                text: \"最近72小时\",\r\n                onClick(picker) {\r\n                  const end = new Date();\r\n                  const start = new Date();\r\n                  start.setTime(start.getTime() - 3600 * 1000 * 72);\r\n                  picker.$emit(\"pick\", [start, end]);\r\n                }\r\n              }\r\n            ]\r\n          },\r\n          // 日期时间选择器类型\r\n          datePickerType: \"datetimerange\",\r\n          // 日期时间选择器值\r\n          date: null,\r\n          // 表格是否加载中\r\n          loading: false,\r\n          // 当前页\r\n          currentPage: 1,\r\n          // 每页显示数量\r\n          pageSizes: 20,\r\n          // 总条数\r\n          total: true,\r\n          Rows: [\r\n          ]\r\n        }\r\n      },\r\n      //   列表对象\r\n      list: {\r\n        imageList: []\r\n      },\r\n      //   导出按钮加载控制\r\n      outPutLoading: false,\r\n      //   导出确认对话框控制\r\n      outPutModal: false,\r\n      //   整块区域加载控制\r\n      boxLoading: false\r\n    };\r\n  },\r\n  mixins: [FilterMethods, GetDataMethods],\r\n  methods: {\r\n    //   导出站点信息\r\n    outPutSiteInfo() {\r\n      //   关闭导出确认对话框\r\n      this.outPutModal = false;\r\n      //   按钮加载\r\n      this.outPutLoading = true;\r\n      setTimeout(() => {\r\n        this.outPutLoading = false;\r\n        this.$Modal.success({\r\n          title: \"关于导出\",\r\n          content: \"站点信息表导出成功\"\r\n        });\r\n      }, 500);\r\n    },\r\n    developing_tip() {\r\n      this.$Message.warning(\"从功能正在开发中...\");\r\n    },\r\n    //   确认导出\r\n    outPutSure() {\r\n      this.outPutSiteInfo();\r\n    },\r\n    // 搜索\r\n    search() {\r\n      // 表格加载中\r\n      this.table.loading = true;\r\n      setTimeout(() => {\r\n        // var newList = this.featrue.Rows.map((val, index) => {\r\n        //   return val.attributes;\r\n        // });\r\n\r\n        // this.table.Rows = newList;\r\n        // 取消表格加载\r\n        this.table.loading = false;\r\n      }, 1000);\r\n    },\r\n    // 设置水库水情预警信息\r\n    set_SKSQ_alarmInfo(STCD) {\r\n      console.warn(\"set_SKSQ_alarmInfo\",STCD)\r\n      this.$GetData.Survey_History_SKSQ(\r\n        \"alarmTable\",\r\n        {\r\n          STCD: STCD,\r\n        },\r\n        true,\r\n        data => {\r\n          var yujingdata = data.data[0];\r\n\r\n          this.yujingdata.FWL = yujingdata.FWL;\r\n          this.yujingdata.FWL79 = yujingdata.FWL79;\r\n          this.yujingdata.SJWL = yujingdata.SJWL;\r\n          this.yujingdata.JYWL = yujingdata.JYWL;\r\n        }\r\n      );\r\n    },\r\n        search() {\r\n      // 表格加载中\r\n      this.table.loading = true;\r\n      setTimeout(() => {\r\n        // var newList = this.featrue.Rows.map((val, index) => {\r\n        //   return val.attributes;\r\n        // });\r\n\r\n        // this.table.Rows = newList;\r\n        // 取消表格加载\r\n        this.table.loading = false;\r\n      }, 1000);\r\n    },\r\n    // 加载表格数据\r\n    loadTableData(list, data) {\r\n      this.table[list].Rows = data;\r\n    },\r\n    // 加载站点数据\r\n    loadSiteData(data) {\r\n      this.siteInfo = data;\r\n    },\r\n    // 根据行政区划编码获取行政区划\r\n    getCompartmentByADDVCD(callback) {\r\n      var ADDVCD = this.info.rowinfo.ADDVCD;\r\n      if (ADDVCD && ADDVCD != \"\") {\r\n        this.axios\r\n          .get(`/guanqu/admin/WRP_AD_B`, {\r\n            params: {\r\n              AD_CD: ADDVCD\r\n            }\r\n          })\r\n          .then(res => {\r\n            var data = res.data.rows;\r\n            if (typeof callback == \"function\") {\r\n              callback(data);\r\n            }\r\n          });\r\n      }\r\n    },\r\n    // 查询历史图像数据\r\n    search_tuxiang() {\r\n      this.$TableMethods.tableLoading(this.table.tuxiang);\r\n\r\n      // 传递站码参数\r\n      var body = {\r\n        STCD: this.siteInfo.STCD,\r\n        _page: this.table.tuxiang.currentPage,\r\n        _page_size: this.table.tuxiang.pageSizes,\r\n        _orderby: `TM desc`\r\n      };\r\n\r\n      // 如果有选择日期进行查询，根据表格类型传递参数\r\n      if (this.table.tuxiang.date) {\r\n        var DTT = this.$FilterData\r\n              .elDatePicker_Filter(this.table.tuxiang.date, \"include_seconds\")\r\n              .split(\",\");\r\n            body.Time_min = DTT[1];\r\n            body.Time_max = DTT[2];\r\n      }\r\n\r\n      this.$GetData.Survey_History_TX(body, true, data => {\r\n        this.$TableMethods.setTableTotal(this.table.tuxiang, data.total);\r\n        this.$TableMethods.setTableData(this.table.tuxiang, data.data);\r\n        this.$TableMethods.cancelTableLoading(this.table.tuxiang);\r\n      });\r\n    },\r\n    // 处理页码切换_图像\r\n    handleCurrentChange_tuxiang(index) {\r\n      this.table[\"tuxiang\"].currentPage = index;\r\n      this.search_tuxiang();\r\n    },\r\n    // 处理每页显示条数切换_水情数据\r\n    handleSizeChange_tuxiang(pageSizes) {\r\n      this.table[\"tuxiang\"].pageSizes = pageSizes;\r\n      this.table[\"tuxiang\"].currentPage = 1;\r\n      this.search_tuxiang();\r\n    },\r\n    // 设置图像历史表默认查询日期\r\n    setTableDefaultDate_tuxiang() {\r\n      const end = new Date();\r\n      const start = zeroPointOfTheDay();\r\n      var timeSlot = [start, end];\r\n      this.table.tuxiang.date = timeSlot;\r\n      // this.setTableDate(\"tuxiang\", timeSlot);\r\n\r\n      function zeroPointOfTheDay() {\r\n        var date = new Date();\r\n        date.setHours(0);\r\n        date.setMinutes(0);\r\n        date.setSeconds(0);\r\n        date.setMilliseconds(0);\r\n        return date;\r\n      }\r\n    },\r\n    // 处理日期时间选择器确定事件_图像\r\n    handleDatePickerChange_tuxiang(item) {\r\n      this.table.tuxiang.currentPage = 1;\r\n      this.search_tuxiang();\r\n    },\r\n    // 设置 xx表格 时间选择器值\r\n    setTableDate(tableName, val) {\r\n      this.table[tableName].date = val;\r\n    },\r\n    // 根据行政区划编码获取行政区划\r\n    getCompartmentByADDVCD(callback) {\r\n      var ADDVCD = this.info.ADDVCD;\r\n      if (ADDVCD && ADDVCD != \"\") {\r\n        this.axios\r\n          .get(`/guanqu/admin/WRP_AD_B`, {\r\n            params: {\r\n              AD_CD: ADDVCD\r\n            }\r\n          })\r\n          .then(res => {\r\n            var data = res.data.rows;\r\n            if (typeof callback == \"function\") {\r\n              callback(data);\r\n            }\r\n          });\r\n      }\r\n    },\r\n  },\r\n  mounted() {\r\n    //判断浏览器是否为ie\r\n    var u = navigator.userAgent;\r\n    if (u.indexOf('Trident') > -1) {\r\n      \r\n    }else{\r\n      this.$message({\r\n          message: '提示：请确保在IE浏览器下使用视频监控功能！',\r\n          type: 'warning'\r\n      });\r\n    }\r\n     var level=0,color=\"#606266\";\r\n    if(level<this.info.rowinfo.SIGN1){\r\n        level=this.info.rowinfo.SIGN1;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN3){\r\n        level=this.info.rowinfo.SIGN3;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN6){\r\n        level=this.info.rowinfo.SIGN6;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN12){\r\n        level=this.info.rowinfo.SIGN12;\r\n    }\r\n    if(level<this.info.rowinfo.SIGN24){\r\n        level=this.info.rowinfo.SIGN24;\r\n    }\r\n    if(level==0){\r\n      this.jiangyu_warm.LEVEL=\"无\";\r\n      this.jiangyu_warm.COLOR=\"#606266\";\r\n    }\r\n    if(level==1){\r\n      this.jiangyu_warm.LEVEL=\"黄色预警\";\r\n      this.jiangyu_warm.COLOR=\"yellow\";\r\n    }\r\n    if(level==2){\r\n      this.jiangyu_warm.LEVEL=\"橙色预警\";\r\n      this.jiangyu_warm.COLOR=\"orange\";\r\n    }\r\n    if(level==3){\r\n      this.jiangyu_warm.LEVEL=\"红色预警\";\r\n      this.jiangyu_warm.COLOR=\"red\";\r\n    }\r\n    this.jiangyu_warm.SIGN1=this.info.rowinfo.SIGN1;\r\n    this.jiangyu_warm.SIGN3=this.info.rowinfo.SIGN3;\r\n    this.jiangyu_warm.SIGN6=this.info.rowinfo.SIGN6;\r\n    this.jiangyu_warm.SIGN12=this.info.rowinfo.SIGN12;\r\n    this.jiangyu_warm.SIGN24=this.info.rowinfo.SIGN24;\r\n    this.jiangyu_warm.RAIN1=this.info.rowinfo.RAIN1+\"mm\";\r\n    this.jiangyu_warm.RAIN3=this.info.rowinfo.RAIN3+\"mm\";\r\n    this.jiangyu_warm.RAIN6=this.info.rowinfo.RAIN6+\"mm\";\r\n    this.jiangyu_warm.RAIN12=this.info.rowinfo.RAIN12+\"mm\";\r\n    this.jiangyu_warm.RAIN24=this.info.rowinfo.RAIN24+\"mm\";\r\n    // 区域加载中\r\n    this.boxLoading = true;\r\n    // 获取详情数据\r\n    this.axios\r\n      .get(`/guanqu/gis/details?ID=${this.info.STCD}&pk=STCD`)\r\n      .then(res => {\r\n\r\n\r\n        this.getCompartmentByADDVCD(data => {\r\n          this.siteInfo.AD_NM = data[0].AD_NM;\r\n        });\r\n        // 根据河流编码获取河流名\r\n        this.$GetData.Base_R_I({\r\n          RVCD: this.info.RVCD\r\n        },true,(data) => {\r\n          this.siteInfo.RVCD = data.data[0].RVNM;\r\n        })\r\n\r\n        // 根据流域编码获取流域名\r\n        this.$GetData.Base_B_I({\r\n          CTCD: this.info.CTCD\r\n        },true,(data) => {\r\n          this.siteInfo.CTCD = data.data[0].CTNM;\r\n        });\r\n        \r\n        // 加载站点数据\r\n        this.loadSiteData(res.data);\r\n\r\n        var details_data = res.data;\r\n        // console.log(details_data);\r\n        if (details_data.CSTYPE==3) {\r\n          var video_iframe = document.getElementById(\"video\");\r\n          video_iframe.src = 'em-playvideo.html?61.187.248.226:8866'+','+details_data.PUID+','+details_data.IDX+','+details_data.STNM\r\n        }\r\n        if (details_data.CSTYPE==1) {\r\n          var video_iframe = document.getElementById(\"video\");\r\n          // details_data.WWWPath\r\n          video_iframe.src = 'webdemo/index.html?'+details_data.PUID;\r\n        }\r\n        // 设置水库水情预警信息\r\n        this.set_SKSQ_alarmInfo(this.siteInfo.STCD);\r\n        // 设置图像历史表默认查询日期\r\n        this.setTableDefaultDate_tuxiang();\r\n        // 查询图像历史表数据\r\n        this.search_tuxiang();\r\n        // 加载取消\r\n        this.boxLoading = false;\r\n      });\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style lang=\"less\" scope>\r\n@import \"./common/common.less\";\r\n.site_detail {\r\n  td {\r\n    height: 32px;\r\n    border-top: none;\r\n    border-color: #EBEEF5;\r\n  }\r\n\r\n  .dt_name {\r\n    width: 20%;\r\n    border-left: none;\r\n  }\r\n\r\n  .dt_vale {\r\n    width: 30%;\r\n    border-right: none;\r\n    border-left: none;\r\n  }\r\n}\r\n.drawer-profile {\r\n  font-size: @siteInfoFontSize;\r\n  position: relative;\r\n\r\n  .relationRow {\r\n    margin-top: 1.25rem;\r\n    button,\r\n    span {\r\n      margin-right: 1.25rem;\r\n    }\r\n  }\r\n  .checkBoxItem {\r\n    margin: 0 0.9375rem;\r\n  }\r\n  .huansuanInput {\r\n    width: 60%;\r\n  }\r\n  .video {\r\n    width: 100%;\r\n  }\r\n  .flexBox {\r\n    display: flex;\r\n    flex-direction: column-reverse;\r\n    height: 13.125rem;\r\n  }\r\n}\r\n</style>\r\n"]}]}