{"remainingRequest":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\visualplace\\zhihuiguanqu\\src\\components\\BaseBox\\Tips\\Tips-qudaoshuiqing.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\src\\components\\BaseBox\\Tips\\Tips-qudaoshuiqing.vue","mtime":1577669404020},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n\r\nimport BaseBox_qudaoshuiqing from \"@/components/BaseBox/BaseBox-qudaoshuiqing\"; // 过滤方法\r\nimport FilterMethods from \"@/assets/commonJS/FilterMethods\"; // 过滤方法\r\nimport GetDataMethods from \"@/assets/commonJS/GetDataMethods\"; // 获取数据方法\r\n// import App from \"@/assets/commonJS/GetDataMethods\"; // 获取数据方法\r\nexport default {\r\n  props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n      historyTableData: []\r\n    };\r\n  },\r\n  mixins: [GetDataMethods, FilterMethods],\r\n  methods: {\r\n    chart(data) {\r\n      if (data.length > 0) {\r\n        var TM_List = new Array(); // 时间\r\n        var Q_List = new Array(); // 流量列表\r\n        var Z_List = new Array(); // 水位列表\r\n\r\n        data = data.slice(0, 3);\r\n        TM_List = data.map((val, index) => {\r\n          return this.dateFilter(val.TM);\r\n        });\r\n\r\n        Q_List = data.map((val, index) => {\r\n          return val.Q;\r\n        });\r\n\r\n        Z_List = data.map((val, index) => {\r\n          return val.Z;\r\n        });\r\n        console.log(\"TM_List\", TM_List);\r\n        console.log(\"Q_List\", Q_List);\r\n        console.log(\"Z_List\", Z_List);\r\n        let myChart = this.$echarts.init(document.getElementById(\"myChart\"));\r\n        myChart.setOption({\r\n          // title: {\r\n          //   text: this.info.STNM,\r\n          //   backgroundColor:\"rgb(200,200,200)\"\r\n          // },\r\n          tooltip: {\r\n            trigger: \"axis\"\r\n          },\r\n          legend: {\r\n            data: [\"流量\", \"水位\"],\r\n            y: \"bottom\"\r\n          },\r\n          // toolbox: {\r\n          //   show: true,\r\n          //   feature: {\r\n          //     mark: { show: true },\r\n          //     dataView: { show: true, readOnly: false },\r\n          //     magicType: { show: true, type: [\"line\", \"bar\"] },\r\n          //     restore: { show: true },\r\n          //     saveAsImage: { show: true }\r\n          //   }\r\n          // },\r\n          // calculable: true,\r\n          animation: false,\r\n          xAxis: [\r\n            {\r\n              type: \"category\",\r\n              boundaryGap: false,\r\n              data: TM_List\r\n            }\r\n          ],\r\n          yAxis: [\r\n            {\r\n              name: \"流量 m³/s\",\r\n              type: \"value\",\r\n              axisLabel: {\r\n                formatter: \"{value} \"\r\n              }\r\n            },\r\n            {\r\n              name: \"水位 m\",\r\n              type: \"value\",\r\n              axisLabel: {\r\n                formatter: \"{value} \"\r\n              }\r\n            }\r\n          ],\r\n          series: [\r\n            {\r\n              name: \"流量\",\r\n              type: \"line\",\r\n              data: Q_List,\r\n              // markPoint: {\r\n              //   data: [\r\n              //     { type: \"max\", name: \"最大值\" },\r\n              //     { type: \"min\", name: \"最小值\" }\r\n              //   ]\r\n              // },\r\n              markLine: {\r\n                data: [{ type: \"average\", name: \"平均值\" }]\r\n              }\r\n            },\r\n            {\r\n              name: \"水位\",\r\n              type: \"line\",\r\n              data: Z_List,\r\n              yAxisIndex: 1,\r\n              markLine: {\r\n                data: [{ type: \"average\", name: \"平均值\" }]\r\n              }\r\n            }\r\n          ]\r\n        });\r\n      } else {\r\n        var myChart = document.getElementById(\"myChart\");\r\n        myChart.innerHTML = \"暂无数据\";\r\n      }\r\n    },\r\n    // getHistoryTableData(callback) {\r\n    //   var body = new Object();\r\n    //   body.STCD = this.info.STCD;\r\n\r\n    //   body.TM = `gt,${this.getTodayDate()}`;\r\n    //   this.axios\r\n    //     .get(`/guanqu/admin/ST_Canal_R`, {\r\n    //       // params: body\r\n    //     })\r\n    //     .then(res => {\r\n    //       var data = res.data.rows;\r\n    //       if (typeof callback == \"function\") {\r\n    //         callback(data);\r\n    //       }\r\n    //     });\r\n    // }\r\n  },\r\n  created() {\r\n    // this.getHistoryTableData(data => {\r\n    //   this.historyTableData = data;\r\n    //   // this.$emit(\"chart\", {\r\n    //   //   chart: this.chart\r\n    //   // });\r\n    //   BaseBox_qudaoshuiqing.getChart = this.chart\r\n    // });\r\n    this.$emit(\"chart\", {\r\n      chart: this.chart\r\n    });\r\n  }\r\n};\r\n",{"version":3,"sources":["Tips-qudaoshuiqing.vue"],"names":[],"mappings":";;;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Tips-qudaoshuiqing.vue","sourceRoot":"src/components/BaseBox/Tips","sourcesContent":["<template>\r\n  <div id=\"myChart\" :style=\"{width: '340px', height: '250px', margin: 'auto'}\"></div>\r\n</template>\r\n\r\n\r\n\r\n<script>\r\nimport BaseBox_qudaoshuiqing from \"@/components/BaseBox/BaseBox-qudaoshuiqing\"; // 过滤方法\r\nimport FilterMethods from \"@/assets/commonJS/FilterMethods\"; // 过滤方法\r\nimport GetDataMethods from \"@/assets/commonJS/GetDataMethods\"; // 获取数据方法\r\n// import App from \"@/assets/commonJS/GetDataMethods\"; // 获取数据方法\r\nexport default {\r\n  props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n      historyTableData: []\r\n    };\r\n  },\r\n  mixins: [GetDataMethods, FilterMethods],\r\n  methods: {\r\n    chart(data) {\r\n      if (data.length > 0) {\r\n        var TM_List = new Array(); // 时间\r\n        var Q_List = new Array(); // 流量列表\r\n        var Z_List = new Array(); // 水位列表\r\n\r\n        data = data.slice(0, 3);\r\n        TM_List = data.map((val, index) => {\r\n          return this.dateFilter(val.TM);\r\n        });\r\n\r\n        Q_List = data.map((val, index) => {\r\n          return val.Q;\r\n        });\r\n\r\n        Z_List = data.map((val, index) => {\r\n          return val.Z;\r\n        });\r\n        console.log(\"TM_List\", TM_List);\r\n        console.log(\"Q_List\", Q_List);\r\n        console.log(\"Z_List\", Z_List);\r\n        let myChart = this.$echarts.init(document.getElementById(\"myChart\"));\r\n        myChart.setOption({\r\n          // title: {\r\n          //   text: this.info.STNM,\r\n          //   backgroundColor:\"rgb(200,200,200)\"\r\n          // },\r\n          tooltip: {\r\n            trigger: \"axis\"\r\n          },\r\n          legend: {\r\n            data: [\"流量\", \"水位\"],\r\n            y: \"bottom\"\r\n          },\r\n          // toolbox: {\r\n          //   show: true,\r\n          //   feature: {\r\n          //     mark: { show: true },\r\n          //     dataView: { show: true, readOnly: false },\r\n          //     magicType: { show: true, type: [\"line\", \"bar\"] },\r\n          //     restore: { show: true },\r\n          //     saveAsImage: { show: true }\r\n          //   }\r\n          // },\r\n          // calculable: true,\r\n          animation: false,\r\n          xAxis: [\r\n            {\r\n              type: \"category\",\r\n              boundaryGap: false,\r\n              data: TM_List\r\n            }\r\n          ],\r\n          yAxis: [\r\n            {\r\n              name: \"流量 m³/s\",\r\n              type: \"value\",\r\n              axisLabel: {\r\n                formatter: \"{value} \"\r\n              }\r\n            },\r\n            {\r\n              name: \"水位 m\",\r\n              type: \"value\",\r\n              axisLabel: {\r\n                formatter: \"{value} \"\r\n              }\r\n            }\r\n          ],\r\n          series: [\r\n            {\r\n              name: \"流量\",\r\n              type: \"line\",\r\n              data: Q_List,\r\n              // markPoint: {\r\n              //   data: [\r\n              //     { type: \"max\", name: \"最大值\" },\r\n              //     { type: \"min\", name: \"最小值\" }\r\n              //   ]\r\n              // },\r\n              markLine: {\r\n                data: [{ type: \"average\", name: \"平均值\" }]\r\n              }\r\n            },\r\n            {\r\n              name: \"水位\",\r\n              type: \"line\",\r\n              data: Z_List,\r\n              yAxisIndex: 1,\r\n              markLine: {\r\n                data: [{ type: \"average\", name: \"平均值\" }]\r\n              }\r\n            }\r\n          ]\r\n        });\r\n      } else {\r\n        var myChart = document.getElementById(\"myChart\");\r\n        myChart.innerHTML = \"暂无数据\";\r\n      }\r\n    },\r\n    // getHistoryTableData(callback) {\r\n    //   var body = new Object();\r\n    //   body.STCD = this.info.STCD;\r\n\r\n    //   body.TM = `gt,${this.getTodayDate()}`;\r\n    //   this.axios\r\n    //     .get(`/guanqu/admin/ST_Canal_R`, {\r\n    //       // params: body\r\n    //     })\r\n    //     .then(res => {\r\n    //       var data = res.data.rows;\r\n    //       if (typeof callback == \"function\") {\r\n    //         callback(data);\r\n    //       }\r\n    //     });\r\n    // }\r\n  },\r\n  created() {\r\n    // this.getHistoryTableData(data => {\r\n    //   this.historyTableData = data;\r\n    //   // this.$emit(\"chart\", {\r\n    //   //   chart: this.chart\r\n    //   // });\r\n    //   BaseBox_qudaoshuiqing.getChart = this.chart\r\n    // });\r\n    this.$emit(\"chart\", {\r\n      chart: this.chart\r\n    });\r\n  }\r\n};\r\n</script>\r\n\r\n\r\n<style scoped>\r\n</style>\r\n"]}]}