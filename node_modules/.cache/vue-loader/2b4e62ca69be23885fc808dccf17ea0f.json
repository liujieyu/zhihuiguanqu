{"remainingRequest":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-duty\\dutyplan-manage\\planmanage.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-duty\\dutyplan-manage\\planmanage.vue","mtime":1645514326432},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n  data()\r\n  {\r\n    return{\r\n        loading:false,\r\n        delsign:0,\r\n        datecon:'',\r\n        FullYear:'',\r\n        datearray:['','','','','','',''],\r\n        maninfos:[[[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]]],\r\n        pickerOptions: {\r\n          shortcuts: [{\r\n            text: '前一时段',\r\n            onClick(picker) {\r\n              const start = picker.date;\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit('pick', start);\r\n            }\r\n            }, {\r\n                text: '后一时段',\r\n                onClick(picker) {\r\n                const start = picker.date;\r\n                start.setTime(start.getTime() + 3600 * 1000 * 24 * 7);\r\n                picker.$emit('pick', start);\r\n                }\r\n            }]\r\n        },\r\n    }\r\n  },\r\n  mounted(){\r\n           var now=new Date();\r\n           var year=now.getFullYear();\r\n            var month=now.getMonth()+1;\r\n            if(month<10){\r\n                month='0'+month;\r\n            }\r\n            var day=now.getDate();\r\n            if(day<10){\r\n                day='0'+day;\r\n            }\r\n            this.datecon=year+'-'+month+'-'+day;\r\n           this.getDates(now);  \r\n           this.Reload();          \r\n        },\r\n  methods:{\r\n    Reload()\r\n    {\r\n        this.loading = true;\r\n        this.maninfos=[[[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]]];\r\n        //调用后台函数，传递参数\r\n      this.axios.get('/alarm/getdutyplan',{params:{begintime:this.datearray[0],endtime:this.datearray[6]}}).then((res)=>{\r\n                    this.loading = false;\r\n                    let tabledata = res.data;\r\n                    if(tabledata.length>0){\r\n                        this.delsign=1;\r\n                        for(var i=0;i<tabledata.length;i++){\r\n                            var h,s;\r\n                            for(var t=0;t<this.datearray.length;t++){\r\n                                if(tabledata[i].OLANDATE==this.datearray[t]){\r\n                                    h=t;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            s=tabledata[i].TYPE-1;\r\n                            var manarray=this.maninfos[h][s];\r\n                            if(manarray[0].name==''){\r\n                                manarray[0].name=tabledata[i].NAME;\r\n                                manarray[0].phone=tabledata[i].PHONE;\r\n                            }else{\r\n                                var obj_m=new Object();\r\n                                obj_m.name=tabledata[i].NAME;\r\n                                obj_m.phone=tabledata[i].PHONE;\r\n                                manarray.push(obj_m);\r\n                            }\r\n                            \r\n                        }\r\n                    }else{\r\n                        this.delsign=0;\r\n                    }\r\n                });\r\n    },\r\n    deleteItem(i,j,index){\r\n        this.maninfos[i][j].splice(index,1);\r\n    },\r\n    addItem(i,j){\r\n        var obj_i=new Object();\r\n        obj_i.name='';\r\n        obj_i.phone='';\r\n        this.maninfos[i][j].push(obj_i);\r\n    },\r\n    getDates(curdate){\r\n        var timesStamp = curdate.getTime();\r\n        var currenDay = curdate.getDay();\r\n        this.datearray = [];\r\n        for(var i = 0; i < 7; i++) {\r\n            var temp_date=new Date(timesStamp + 24 * 60 * 60 * 1000 * (i - (currenDay + 6) % 7));\r\n            var year=temp_date.getFullYear();\r\n            var month=temp_date.getMonth()+1;\r\n            if(month<10){\r\n                month='0'+month;\r\n            }\r\n            var day=temp_date.getDate();\r\n            if(day<10){\r\n                day='0'+day;\r\n            }\r\n            var weekday=year+'-'+month+'-'+day;\r\n            this.datearray.push(weekday);\r\n            if(i==0){\r\n                this.FullYear=year.toString();\r\n            }\r\n        }\r\n    },\r\n    timechange(date){\r\n        this.datecon=date;\r\n        let str = date.replace(/-/g, '/');\r\n        let curdate = new Date(str);\r\n        this.getDates(curdate);\r\n        this.Reload();\r\n    },\r\n    onSave(){\r\n        var postData=new Array();\r\n        for(var i=0;i<7;i++){\r\n            for(var j=0;j<3;j++){\r\n                var array=this.maninfos[i][j];\r\n                for(var h=0;h<array.length;h++){\r\n                    var obj_t=new Object();\r\n                    obj_t.name=array[h].name;\r\n                    obj_t.phone=array[h].phone;\r\n                    var reg =/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/;\r\n                    if(obj_t.name.length>10){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：姓名'+obj_t.name+'异常！',type:'warning'});\r\n                        return;\r\n                    }\r\n                    if(obj_t.phone!=null && obj_t.phone.trim()!='' && !reg.test(obj_t.phone)){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：手机号'+obj_t.phone+'异常！',type:'warning'});\r\n                        return;\r\n                    }\r\n                    if((obj_t.name==null || obj_t.name.trim()=='') && (obj_t.phone==null || obj_t.phone.trim()=='')){\r\n                        continue;\r\n                    }else if((obj_t.name!=null && obj_t.name.trim()!='') && (obj_t.phone==null || obj_t.phone.trim()=='')){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：'+obj_t.name+'对应的手机号码请输入！',type:'warning'});\r\n                        return;\r\n                    }else if((obj_t.name==null || obj_t.name.trim()=='') && (obj_t.phone!=null && obj_t.phone.trim()!='')){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：'+obj_t.phone+'对应的姓名请输入！',type:'warning'});\r\n                        return;\r\n                    }else{\r\n                        obj_t.olandate=this.datearray[i];\r\n                        obj_t.type=j+1;\r\n                        postData.push(obj_t);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(postData.length<1){\r\n            this.$message({message:'请输入人员值班安排信息！',type:'warning'});\r\n            return;\r\n        }\r\n        this.loading = true;\r\n        var postParam=new Object();\r\n        postParam[\"list\"]=postData;\r\n        postParam[\"delsign\"]=this.delsign;\r\n        postParam[\"begintime\"]=this.datearray[0];\r\n        postParam[\"endtime\"]=this.datearray[6];\r\n        this.axios.post('/alarm/adddutyplan',postParam).then((res)=>{\r\n                                if(res.data==\"ok\"){\r\n                                    this.loading = false;\r\n                                    if(this.delsign==0){\r\n                                        this.delsign=1;\r\n                                    }\r\n                                    this.$message({message:'人员值班安排信息保存成功！',type:'success'});\r\n                                }                   \r\n                            });\r\n    },\r\n    showdate(sign){\r\n        let str='';\r\n        switch(sign) {\r\n            case 0:\r\n                str='星期一';\r\n                break;\r\n            case 1:\r\n                str='星期二';\r\n                break;\r\n            case 2:\r\n                str='星期三';\r\n                break;\r\n            case 3:\r\n                str='星期四';\r\n                break;\r\n            case 4:\r\n                str='星期五';\r\n                break;\r\n            case 5:\r\n                str='星期六';\r\n                break;\r\n            case 6:\r\n                str='星期日';\r\n                break;\r\n        }\r\n        return str;\r\n    },\r\n    showtype(sign){\r\n        let str='';\r\n        switch(sign) {\r\n            case 0:\r\n                str='主管领导';\r\n                break;\r\n            case 1:\r\n                str='值班领导';\r\n                break;\r\n            case 2:\r\n                str='值班人员';\r\n                break;\r\n        }\r\n        return str;\r\n    },\r\n    showManinfo(i,j){\r\n        var obj_t=new Object();\r\n        obj_t.i=i;\r\n        obj_t.j=j;\r\n        obj_t.itype='zhibanrenyuan';\r\n        obj_t.list=[];\r\n        this.$emit('showdailog', obj_t);\r\n    },\r\n    showphone(dataobj){ \r\n        if(dataobj.list==null || dataobj.list.length==0){\r\n            return;\r\n        }\r\n        var curarray=this.maninfos[dataobj.i][dataobj.j];\r\n        var manlist=dataobj.list;\r\n        for(var h=0;h<manlist.length;h++){\r\n            if(curarray.length==1 && (curarray[0].name==null || curarray[0].name.trim()=='')){\r\n                curarray[0].name=manlist[h].NM;\r\n                curarray[0].phone=manlist[h].MOBILE;\r\n            }else{\r\n                var obj_t=new Object();\r\n                obj_t.name=manlist[h].NM;\r\n                obj_t.phone=manlist[h].MOBILE;\r\n                let write=0;\r\n                for(var s=0;s<curarray.length;s++){\r\n                    if(curarray[s].name==obj_t.name){\r\n                        if(curarray[s].phone==null || curarray[s].phone==''){\r\n                            curarray[s].phone=obj_t.phone;\r\n                        }else{\r\n                            write=1;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if(write==0){\r\n                    curarray.push(obj_t);\r\n                }\r\n            }\r\n        }\r\n    },\r\n  }\r\n}\r\n",{"version":3,"sources":["planmanage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqZA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"planmanage.vue","sourceRoot":"src/warm/warm-duty/dutyplan-manage","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<Content class=\"searchcon\">\r\n                    <Row type=\"flex\" :gutter=\"16\" class=\"rowtocol\">\r\n                        <Col>\r\n                        时间：\r\n                        <el-date-picker\r\n                        v-model=\"datecon\"\r\n                        type=\"date\"\r\n                        :picker-options=\"pickerOptions\"\r\n                        placeholder=\"选择日期\"\r\n                        format=\"yyyy 年 MM 月 dd 日\"\r\n                        value-format=\"yyyy-MM-dd\" \r\n                        size=\"small\"\r\n                        :clearable=\"false\"\r\n                        @change=\"timechange\"\r\n                        >\r\n                        </el-date-picker>\r\n                        </Col>\r\n                    </Row>\r\n                    <Row class=\"fgline\"></Row>\r\n                    <table  cellspacing=\"0\" cellpadding=\"0\" class=\"table_show\" v-loading=\"loading\">\r\n                         <caption>\r\n                             <h2>人员值班安排</h2>\r\n                         </caption>\r\n                        <thead>\r\n                            <tr>\r\n                                <th style=\"width:120px;\">{{FullYear}}年</th>\r\n                                <th style=\"width:326px;\">主管领导</th>\r\n                                <th style=\"width:326px;\">值班领导</th>\r\n                                <th style=\"width:326px;\">值班人员</th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tr>\r\n                            <td align=\"center\">{{datearray[0]}}&nbsp;星期一</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(0,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[0][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[0][0].length>1\"  @click=\"deleteItem(0,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(0,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(0,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[0][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[0][1].length>1\"  @click=\"deleteItem(0,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(0,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(0,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[0][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[0][2].length>1\"  @click=\"deleteItem(0,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(0,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td align=\"center\">{{datearray[1]}}&nbsp;星期二</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(1,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[1][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[1][0].length>1\"  @click=\"deleteItem(1,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(1,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(1,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[1][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[1][1].length>1\"  @click=\"deleteItem(1,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(1,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(1,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[1][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[1][2].length>1\"  @click=\"deleteItem(1,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(1,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                            <tr>\r\n                            <td align=\"center\">{{datearray[2]}}&nbsp;星期三</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(2,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[2][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[2][0].length>1\"  @click=\"deleteItem(2,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(2,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(2,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[2][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[2][1].length>1\"  @click=\"deleteItem(2,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(2,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(2,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[2][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[2][2].length>1\"  @click=\"deleteItem(2,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(2,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                        </tr>\r\n                        </tr>\r\n                        <tr>\r\n                            <td align=\"center\">{{datearray[3]}}&nbsp;星期四</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(3,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[3][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[3][0].length>1\"  @click=\"deleteItem(3,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(3,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(3,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[3][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[3][1].length>1\"  @click=\"deleteItem(3,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(3,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(3,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[3][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[3][2].length>1\"  @click=\"deleteItem(3,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(3,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td align=\"center\">{{datearray[4]}}&nbsp;星期五</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(4,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[4][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[4][0].length>1\"  @click=\"deleteItem(4,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(4,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(4,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[4][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[4][1].length>1\"  @click=\"deleteItem(4,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(4,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(4,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[4][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[4][2].length>1\"  @click=\"deleteItem(4,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(4,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td align=\"center\">{{datearray[5]}}&nbsp;星期六</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(5,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[5][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[5][0].length>1\"  @click=\"deleteItem(5,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(5,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(5,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[5][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[5][1].length>1\"  @click=\"deleteItem(5,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(5,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(5,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[5][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[5][2].length>1\"  @click=\"deleteItem(5,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(5,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                        </tr>\r\n                        <tr>\r\n                            <td align=\"center\">{{datearray[6]}}&nbsp;星期日</td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(6,0)\" style=\"margin-left:5px;margin-bottom:5px;\">选择主管领导</Button>\r\n                                    </li>\r\n                                    <li class=\"showdada\"  v-for=\"(item, itemIndex) in maninfos[6][0]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[6][0].length>1\"  @click=\"deleteItem(6,0,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(6,0)\">+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                                \r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(6,1)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班领导</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[6][1]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[6][1].length>1\"  @click=\"deleteItem(6,1,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(6,1)\" >+</Button>\r\n                                    </li>\r\n                                </ul>\r\n                            </td>\r\n                            <td style=\"vertical-align:top;\">\r\n                                <ul>\r\n                                    <li class=\"choose\">\r\n                                        <Button  type=\"info\"  @click=\"showManinfo(6,2)\" style=\"margin-left:5px;margin-bottom:5px;\">选择值班人员</Button>\r\n                                    </li>\r\n                                    <li   v-for=\"(item, itemIndex) in maninfos[6][2]\">\r\n                                        <Input v-model=\"item.name\" :value=\"item.name\" placeholder=\"请输入姓名\" clearable style=\"width:110px;\"/>\r\n                                        -\r\n                                        <Input v-model=\"item.phone\" :value=\"item.phone\" placeholder=\"请输入手机号码\" clearable style=\"width:110px;\"/>\r\n                                        <Button  type=\"primary\" v-if=\"maninfos[6][2].length>1\"  @click=\"deleteItem(6,2,itemIndex)\" style=\"margin-left:5px;\">-</Button>\r\n                                    </li>\r\n                                    <li style=\"margin-bottom:5px;\">\r\n                                        <Button  type=\"primary\"  @click=\"addItem(6,2)\" >+</Button>\r\n                                    </li>\r\n                                </ul>                               \r\n                            </td>\r\n                        </tr>\r\n                    </table>\r\n                    <div style=\"width:1098px;margin:0 auto;\">\r\n                    <Button  type=\"primary\"  @click=\"onSave()\" style=\"margin-left:486px;margin-top:30px;\" >保存值班安排信息</Button>\r\n                    </div>\r\n                </Content>\r\n\t</div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nexport default {\r\n  data()\r\n  {\r\n    return{\r\n        loading:false,\r\n        delsign:0,\r\n        datecon:'',\r\n        FullYear:'',\r\n        datearray:['','','','','','',''],\r\n        maninfos:[[[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]]],\r\n        pickerOptions: {\r\n          shortcuts: [{\r\n            text: '前一时段',\r\n            onClick(picker) {\r\n              const start = picker.date;\r\n              start.setTime(start.getTime() - 3600 * 1000 * 24 * 7);\r\n              picker.$emit('pick', start);\r\n            }\r\n            }, {\r\n                text: '后一时段',\r\n                onClick(picker) {\r\n                const start = picker.date;\r\n                start.setTime(start.getTime() + 3600 * 1000 * 24 * 7);\r\n                picker.$emit('pick', start);\r\n                }\r\n            }]\r\n        },\r\n    }\r\n  },\r\n  mounted(){\r\n           var now=new Date();\r\n           var year=now.getFullYear();\r\n            var month=now.getMonth()+1;\r\n            if(month<10){\r\n                month='0'+month;\r\n            }\r\n            var day=now.getDate();\r\n            if(day<10){\r\n                day='0'+day;\r\n            }\r\n            this.datecon=year+'-'+month+'-'+day;\r\n           this.getDates(now);  \r\n           this.Reload();          \r\n        },\r\n  methods:{\r\n    Reload()\r\n    {\r\n        this.loading = true;\r\n        this.maninfos=[[[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]],\r\n                  [[{name:'',phone:''}],[{name:'',phone:''}],[{name:'',phone:''}]]];\r\n        //调用后台函数，传递参数\r\n      this.axios.get('/alarm/getdutyplan',{params:{begintime:this.datearray[0],endtime:this.datearray[6]}}).then((res)=>{\r\n                    this.loading = false;\r\n                    let tabledata = res.data;\r\n                    if(tabledata.length>0){\r\n                        this.delsign=1;\r\n                        for(var i=0;i<tabledata.length;i++){\r\n                            var h,s;\r\n                            for(var t=0;t<this.datearray.length;t++){\r\n                                if(tabledata[i].OLANDATE==this.datearray[t]){\r\n                                    h=t;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            s=tabledata[i].TYPE-1;\r\n                            var manarray=this.maninfos[h][s];\r\n                            if(manarray[0].name==''){\r\n                                manarray[0].name=tabledata[i].NAME;\r\n                                manarray[0].phone=tabledata[i].PHONE;\r\n                            }else{\r\n                                var obj_m=new Object();\r\n                                obj_m.name=tabledata[i].NAME;\r\n                                obj_m.phone=tabledata[i].PHONE;\r\n                                manarray.push(obj_m);\r\n                            }\r\n                            \r\n                        }\r\n                    }else{\r\n                        this.delsign=0;\r\n                    }\r\n                });\r\n    },\r\n    deleteItem(i,j,index){\r\n        this.maninfos[i][j].splice(index,1);\r\n    },\r\n    addItem(i,j){\r\n        var obj_i=new Object();\r\n        obj_i.name='';\r\n        obj_i.phone='';\r\n        this.maninfos[i][j].push(obj_i);\r\n    },\r\n    getDates(curdate){\r\n        var timesStamp = curdate.getTime();\r\n        var currenDay = curdate.getDay();\r\n        this.datearray = [];\r\n        for(var i = 0; i < 7; i++) {\r\n            var temp_date=new Date(timesStamp + 24 * 60 * 60 * 1000 * (i - (currenDay + 6) % 7));\r\n            var year=temp_date.getFullYear();\r\n            var month=temp_date.getMonth()+1;\r\n            if(month<10){\r\n                month='0'+month;\r\n            }\r\n            var day=temp_date.getDate();\r\n            if(day<10){\r\n                day='0'+day;\r\n            }\r\n            var weekday=year+'-'+month+'-'+day;\r\n            this.datearray.push(weekday);\r\n            if(i==0){\r\n                this.FullYear=year.toString();\r\n            }\r\n        }\r\n    },\r\n    timechange(date){\r\n        this.datecon=date;\r\n        let str = date.replace(/-/g, '/');\r\n        let curdate = new Date(str);\r\n        this.getDates(curdate);\r\n        this.Reload();\r\n    },\r\n    onSave(){\r\n        var postData=new Array();\r\n        for(var i=0;i<7;i++){\r\n            for(var j=0;j<3;j++){\r\n                var array=this.maninfos[i][j];\r\n                for(var h=0;h<array.length;h++){\r\n                    var obj_t=new Object();\r\n                    obj_t.name=array[h].name;\r\n                    obj_t.phone=array[h].phone;\r\n                    var reg =/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/;\r\n                    if(obj_t.name.length>10){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：姓名'+obj_t.name+'异常！',type:'warning'});\r\n                        return;\r\n                    }\r\n                    if(obj_t.phone!=null && obj_t.phone.trim()!='' && !reg.test(obj_t.phone)){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：手机号'+obj_t.phone+'异常！',type:'warning'});\r\n                        return;\r\n                    }\r\n                    if((obj_t.name==null || obj_t.name.trim()=='') && (obj_t.phone==null || obj_t.phone.trim()=='')){\r\n                        continue;\r\n                    }else if((obj_t.name!=null && obj_t.name.trim()!='') && (obj_t.phone==null || obj_t.phone.trim()=='')){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：'+obj_t.name+'对应的手机号码请输入！',type:'warning'});\r\n                        return;\r\n                    }else if((obj_t.name==null || obj_t.name.trim()=='') && (obj_t.phone!=null && obj_t.phone.trim()!='')){\r\n                        this.$message({message:this.datearray[i]+' '+this.showdate(i)+this.showtype(j)+'：'+obj_t.phone+'对应的姓名请输入！',type:'warning'});\r\n                        return;\r\n                    }else{\r\n                        obj_t.olandate=this.datearray[i];\r\n                        obj_t.type=j+1;\r\n                        postData.push(obj_t);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        if(postData.length<1){\r\n            this.$message({message:'请输入人员值班安排信息！',type:'warning'});\r\n            return;\r\n        }\r\n        this.loading = true;\r\n        var postParam=new Object();\r\n        postParam[\"list\"]=postData;\r\n        postParam[\"delsign\"]=this.delsign;\r\n        postParam[\"begintime\"]=this.datearray[0];\r\n        postParam[\"endtime\"]=this.datearray[6];\r\n        this.axios.post('/alarm/adddutyplan',postParam).then((res)=>{\r\n                                if(res.data==\"ok\"){\r\n                                    this.loading = false;\r\n                                    if(this.delsign==0){\r\n                                        this.delsign=1;\r\n                                    }\r\n                                    this.$message({message:'人员值班安排信息保存成功！',type:'success'});\r\n                                }                   \r\n                            });\r\n    },\r\n    showdate(sign){\r\n        let str='';\r\n        switch(sign) {\r\n            case 0:\r\n                str='星期一';\r\n                break;\r\n            case 1:\r\n                str='星期二';\r\n                break;\r\n            case 2:\r\n                str='星期三';\r\n                break;\r\n            case 3:\r\n                str='星期四';\r\n                break;\r\n            case 4:\r\n                str='星期五';\r\n                break;\r\n            case 5:\r\n                str='星期六';\r\n                break;\r\n            case 6:\r\n                str='星期日';\r\n                break;\r\n        }\r\n        return str;\r\n    },\r\n    showtype(sign){\r\n        let str='';\r\n        switch(sign) {\r\n            case 0:\r\n                str='主管领导';\r\n                break;\r\n            case 1:\r\n                str='值班领导';\r\n                break;\r\n            case 2:\r\n                str='值班人员';\r\n                break;\r\n        }\r\n        return str;\r\n    },\r\n    showManinfo(i,j){\r\n        var obj_t=new Object();\r\n        obj_t.i=i;\r\n        obj_t.j=j;\r\n        obj_t.itype='zhibanrenyuan';\r\n        obj_t.list=[];\r\n        this.$emit('showdailog', obj_t);\r\n    },\r\n    showphone(dataobj){ \r\n        if(dataobj.list==null || dataobj.list.length==0){\r\n            return;\r\n        }\r\n        var curarray=this.maninfos[dataobj.i][dataobj.j];\r\n        var manlist=dataobj.list;\r\n        for(var h=0;h<manlist.length;h++){\r\n            if(curarray.length==1 && (curarray[0].name==null || curarray[0].name.trim()=='')){\r\n                curarray[0].name=manlist[h].NM;\r\n                curarray[0].phone=manlist[h].MOBILE;\r\n            }else{\r\n                var obj_t=new Object();\r\n                obj_t.name=manlist[h].NM;\r\n                obj_t.phone=manlist[h].MOBILE;\r\n                let write=0;\r\n                for(var s=0;s<curarray.length;s++){\r\n                    if(curarray[s].name==obj_t.name){\r\n                        if(curarray[s].phone==null || curarray[s].phone==''){\r\n                            curarray[s].phone=obj_t.phone;\r\n                        }else{\r\n                            write=1;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                if(write==0){\r\n                    curarray.push(obj_t);\r\n                }\r\n            }\r\n        }\r\n    },\r\n  }\r\n}\r\n</script>\r\n<style lang=\"less\" scoped>\r\nhtml, body {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\nul {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\nli {\r\n  float:left; \r\n  list-style:none;\r\n  margin-left:5px;\r\n  margin-top: 5px;\r\n}\r\n.choose{\r\n    margin-left:0px;\r\n    width: 326px;\r\n    border-bottom: solid 1px #C7CCD6;\r\n}\r\nli .showdada{\r\n    width: 272px;\r\n}\r\n.table_show {\r\nmargin: 0 auto;\r\n width: 1098px;\r\n border:1px solid #C7CCD6;\r\n border-collapse:collapse; \r\n color: #515A6E;\r\n th{background-color: #EFF2F6;color:#4b5469;}\r\n th, td {\r\n    height: 42px;\r\n    border-top: none;\r\n    border:1px solid #C7CCD6;\r\n  }\r\ntr:nth-child(even){     //偶数行\r\n    background:#F7FAFD;\r\n}\r\n}\r\n</style>"]}]}