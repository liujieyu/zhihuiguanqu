{"remainingRequest":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\thread-loader\\dist\\cjs.js!D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js!D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\huangcaiplace\\zhihuiguanqu\\src\\components\\Details\\Details-shipinzhan.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\huangcaiplace\\zhihuiguanqu\\src\\components\\Details\\Details-shipinzhan.vue","mtime":1583996482430},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport FilterMethods from \"../../assets/commonJS/FilterMethods\"; // 过滤方法\n\nimport GetDataMethods from \"../../assets/commonJS/GetDataMethods\"; // 获取数据方法\n\nimport { timingSafeEqual } from \"crypto\";\nexport default {\n  props: {\n    info: {}\n  },\n  data: function data() {\n    return {\n      // 激活标签栏\n      activeName: \"shipin\",\n      // 站点信息\n      siteInfo: {},\n      //   多选框对象\n      checkBox: {\n        shuiqingList: [{\n          value: \"historyTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"历史表\"\n        }, {\n          value: \"hourTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"小时表\"\n        }, {\n          value: \"dayTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"日表\"\n        }, {\n          value: \"nightTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"月表\"\n        }],\n        // 水情多选框绑定值\n        shuiqing_social: [\"historyTable\", \"hourTable\", \"dayTable\", \"nightTable\"]\n      },\n      //   选择框对象\n      select: {\n        searchList: [{\n          value: \"quick\",\n          label: \"快速查询\"\n        }, {\n          value: \"vague\",\n          label: \"模糊查询\"\n        }]\n      },\n      // 表格数据\n      table: {\n        // 水情\n        shuiqing: {\n          // 表头设置\n          columns: [{\n            title: \"序号\",\n            type: \"index\",\n            width: 80,\n            align: \"center\"\n          }, {\n            title: \"时间\",\n            key: \"date\",\n            // width: 100,\n            align: \"center\"\n          }, {\n            title: \"水位(m)\",\n            width: 110,\n            key: \"waterLever\",\n            align: \"center\"\n          }, {\n            width: 120,\n            title: \"流量(m³/s)\",\n            key: \"flowLever\",\n            align: \"center\"\n          }],\n          // 表体内容\n          Rows: [{\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }, {\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }, {\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }],\n          // 表格是否加载中\n          loading: false\n        },\n        // 关系曲线\n        guanxiquxian: {\n          // 表头设置\n          columns: [{\n            title: \"序号\",\n            key: \"index\",\n            width: 100,\n            align: \"center\"\n          }, {\n            title: \"测站编码\",\n            key: \"date\",\n            // width: 100,\n            align: \"center\"\n          }, {\n            title: \"水位\",\n            width: 100,\n            key: \"waterLever\",\n            align: \"center\"\n          }, {\n            title: \"流量(m³/s)\",\n            key: \"flowLever\",\n            align: \"center\"\n          }, {\n            width: 100,\n            title: \"启用标志\",\n            key: \"flowLever\",\n            align: \"center\"\n          }, {\n            width: 100,\n            title: \"备注\",\n            key: \"flowLever\",\n            align: \"center\"\n          }],\n          // 表体内容\n          Rows: [{\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }, {\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }, {\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }],\n          // 表格是否加载中\n          loading: false\n        },\n        // 特征水位\n        tezhengshuiqing: {\n          // 表头设置\n          columns: [{\n            title: \"序号\",\n            key: \"index\",\n            width: 100,\n            align: \"center\"\n          }, {\n            title: \"测站编码\",\n            key: \"date\",\n            // width: 100,\n            align: \"center\"\n          }, {\n            title: \"最大流量时间\",\n            width: 130,\n            key: \"waterLever\",\n            align: \"center\"\n          }, {\n            title: \"年最大流量(m³/s)\",\n            key: \"flowLever\",\n            align: \"center\"\n          }, {\n            width: 100,\n            title: \"水位\",\n            key: \"flowLever\",\n            align: \"center\"\n          }],\n          // 表体内容\n          Rows: [{\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }, {\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }, {\n            index: 1,\n            date: \"2019-4-18\",\n            waterLever: \"10\",\n            flowLever: \"11\"\n          }],\n          // 表格是否加载中\n          loading: false\n        }\n      },\n      //   日期数据\n      date: {\n        shuiqing: \"\"\n      },\n      // 输入框对象\n      input: {\n        // 关系曲线换算的\n        huansuan: {\n          waterLever: \"\",\n          flowLever: \"\"\n        }\n      },\n      //   列表对象\n      list: {\n        imageList: []\n      },\n      //   导出按钮加载控制\n      outPutLoading: false,\n      //   导出确认对话框控制\n      outPutModal: false,\n      //   整块区域加载控制\n      boxLoading: false\n    };\n  },\n  mixins: [FilterMethods, GetDataMethods],\n  methods: {\n    //   导出站点信息\n    outPutSiteInfo: function outPutSiteInfo() {\n      var _this = this;\n\n      //   关闭导出确认对话框\n      this.outPutModal = false; //   按钮加载\n\n      this.outPutLoading = true;\n      setTimeout(function () {\n        _this.outPutLoading = false;\n\n        _this.$Modal.success({\n          title: \"关于导出\",\n          content: \"站点信息表导出成功\"\n        });\n      }, 500);\n    },\n    developing_tip: function developing_tip() {\n      this.$Message.warning(\"从功能正在开发中...\");\n    },\n    //   确认导出\n    outPutSure: function outPutSure() {\n      this.outPutSiteInfo();\n    },\n    // 搜索\n    search: function search() {\n      var _this2 = this;\n\n      // 表格加载中\n      this.table.loading = true;\n      setTimeout(function () {\n        // var newList = this.featrue.Rows.map((val, index) => {\n        //   return val.attributes;\n        // });\n        // this.table.Rows = newList;\n        // 取消表格加载\n        _this2.table.loading = false;\n      }, 1000);\n    },\n    // 绘图\n    createChart: function createChart(idName) {\n      var myChart = this.$echarts.init(document.getElementById(idName));\n      myChart.setOption({\n        title: {\n          text: \"水位\"\n        },\n        tooltip: {},\n        xAxis: {\n          data: [\"闸阀前\", \"闸阀后\"]\n        },\n        yAxis: {\n          name: \"单位：米\"\n        },\n        series: [{\n          name: \"水位\",\n          type: \"bar\",\n          data: [5, 10]\n        }]\n      });\n    },\n    // 加载表格数据\n    loadTableData: function loadTableData(list, data) {\n      this.table[list].Rows = data;\n      console.log('表格', this.table[list].Rows);\n    },\n    // 加载站点数据\n    loadSiteData: function loadSiteData(data) {\n      this.siteInfo = data;\n      console.log('站点', this.siteInfo);\n    },\n    // 根据行政区划编码获取行政区划\n    getCompartmentByADDVCD: function getCompartmentByADDVCD(callback) {\n      var ADDVCD = this.info.ADDVCD;\n\n      if (ADDVCD && ADDVCD != \"\") {\n        this.axios.get(\"/guanqu/admin/WRP_AD_B\", {\n          params: {\n            AD_CD: ADDVCD\n          }\n        }).then(function (res) {\n          var data = res.data.rows;\n\n          if (typeof callback == \"function\") {\n            callback(data);\n          }\n        });\n      }\n    }\n  },\n  mounted: function mounted() {\n    var _this3 = this;\n\n    //判断浏览器是否为ie\n    var u = navigator.userAgent;\n\n    if (u.indexOf('Trident') > -1) {} else {\n      this.$message({\n        message: '提示：请确保在IE浏览器下使用视频监控功能！',\n        type: 'warning'\n      });\n    } // 区域加载中\n\n\n    this.boxLoading = true; // 获取详情数据\n\n    this.axios.get(\"/guanqu/gis/details?ID=\".concat(this.info.STCD, \"&pk=STCD\")).then(function (res) {\n      _this3.getCompartmentByADDVCD(function (data) {\n        _this3.siteInfo.AD_NM = data[0].AD_NM;\n      }); // 根据河流编码获取河流名\n\n\n      _this3.$GetData.Base_R_I({\n        RVCD: _this3.info.RVCD\n      }, true, function (data) {\n        _this3.siteInfo.RVCD = data.data[0].RVNM;\n      }); // 根据流域编码获取流域名\n\n\n      _this3.$GetData.Base_B_I({\n        CTCD: _this3.info.CTCD\n      }, true, function (data) {\n        _this3.siteInfo.CTCD = data.data[0].CTNM;\n      }); // 加载站点数据\n\n\n      _this3.loadSiteData(res.data);\n\n      var details_data = res.data; // console.log(details_data);\n\n      if (details_data.CSTYPE == 3) {\n        var video_iframe = document.getElementById(\"video\");\n        video_iframe.src = 'em-playvideo.html?61.187.248.226:8866' + ',' + details_data.PUID + ',' + details_data.IDX + ',' + details_data.STNM;\n      }\n\n      if (details_data.CSTYPE == 1) {\n        var video_iframe = document.getElementById(\"video\"); // details_data.WWWPath\n\n        video_iframe.src = 'webdemo/index.html?' + details_data.PUID;\n      } // 取数据的条数\n      // var count = 0\n      // for (let key in res.data) {\n      //   count++\n      // }\n      // alert(count)\n      // 加载取消\n\n\n      _this3.boxLoading = false;\n    });\n  }\n};",null]}