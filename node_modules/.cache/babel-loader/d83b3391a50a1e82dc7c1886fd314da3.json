{"remainingRequest":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js!D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\visualplace\\zhihuiguanqu\\src\\warm\\warm-water\\water-use\\usewater.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\src\\warm\\warm-water\\water-use\\usewater.vue","mtime":1645607966800},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\babel.config.js","mtime":1577669403468},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\visualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import _parseFloat from \"D:\\\\work2022\\\\visualplace\\\\zhihuiguanqu\\\\node_modules\\\\@babel\\\\runtime-corejs2/core-js/parse-float\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport FilterMethods from \"@/assets/commonJS/FilterMethods\";\nexport default {\n  data: function data() {\n    return {\n      loading: false,\n      show1: true,\n      span1: '19',\n      span2: '5',\n      theight: window.innerHeight - 370,\n      searchmsg: '',\n      Treedata: [],\n      defaultProps: {\n        children: 'children',\n        label: 'CANAL_NANME'\n      },\n      keys: [],\n      data1: [],\n      yearlist: [],\n      STinfo: {},\n      Menu: {\n        show_Controller: false\n      },\n      form: {\n        year: ''\n      },\n      columns: [{\n        text: \"名称\",\n        value: \"STNM\",\n        minwidth: 100,\n        fixed: \"left\",\n        algin: \"center\"\n      }, {\n        text: \"一月\",\n        value: \"ONE\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"二月\",\n        value: \"TWO\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"三月\",\n        value: \"THREE\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"四月\",\n        value: \"FOUR\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"五月\",\n        value: \"FIVE\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"六月\",\n        value: \"SIX\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"七月\",\n        value: \"SEVEN\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"八月\",\n        value: \"EIGHT\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"九月\",\n        value: \"NINE\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"十月\",\n        value: \"TEN\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"十一月\",\n        value: \"ELEVEN\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"十二月\",\n        value: \"TWELVE\",\n        minwidth: 80,\n        algin: \"center\"\n      }, {\n        text: \"年度总计\",\n        value: \"SUMW\",\n        minwidth: 100,\n        fixed: \"right\",\n        algin: \"center\"\n      }],\n      data: []\n    };\n  },\n  // 引入过滤方法到此组件\n  mixins: [FilterMethods],\n  mounted: function mounted() {\n    var _this = this;\n\n    //年份\n    var now = new Date();\n    var year = now.getFullYear();\n\n    for (var i = 0; i < 10; i++) {\n      var yobj = new Object();\n      yobj.value = year - i;\n      yobj.label = year - i + '年';\n      this.yearlist.push(yobj);\n    }\n\n    this.form.year = year;\n    this.axios.get('/waterplan/managetree', {\n      params: {\n        canalname: this.searchmsg\n      }\n    }).then(function (res) {\n      debugger;\n      var root = res.data.tree;\n      var keyarry = [];\n\n      if (root.children.length > 0) {\n        keyarry.push(root.ID, root.children[0].ID, root.children[0].children[0].ID);\n      }\n\n      _this.Treedata.push(root);\n\n      _this.keys = keyarry;\n\n      if (root.children.length > 0) {\n        _this.STinfo = root.children[0].children[0];\n      }\n\n      _this.Reload();\n    });\n  },\n  methods: {\n    Menu_toggle: function Menu_toggle() {\n      this.Menu.show_Controller = !this.Menu.show_Controller;\n      this.show1 = !this.show1;\n\n      if (this.show1 == true) {\n        this.span1 = '19';\n        this.span2 = '5';\n        this.data2 = {};\n      } else {\n        this.span1 = '24';\n        this.span2 = '0';\n        this.data2 = {};\n      }\n\n      this.Reload();\n    },\n    Reload: function Reload() {\n      var _this2 = this;\n\n      var obj = {\n        organCode: this.STinfo.CANAL_CODE,\n        year: this.form.year\n      };\n      this.loading = true;\n      this.axios.get('/waterplan/useinfo', {\n        params: obj\n      }).then(function (res) {\n        _this2.data1 = res.data;\n        _this2.loading = false;\n        var echartData = {\n          x: new Object(),\n          y1: new Object(),\n          y2: new Object(),\n          y3: new Object()\n        };\n        var quota = res.data[0];\n        var real = res.data[1];\n        var usel = res.data[2];\n        echartData.x.list = ['1月', '2月', '3月', '4月', '5月', '6月', '7月', '8月', '9月', '10月', '11月', '12月'];\n        echartData.y1.list = [quota[\"ONE\"], quota[\"TWO\"], quota[\"THREE\"], quota[\"FOUR\"], quota[\"FIVE\"], quota[\"SIX\"], quota[\"SEVEN\"], quota[\"EIGHT\"], quota[\"NINE\"], quota[\"TEN\"], quota[\"ELEVEN\"], quota[\"TWELVE\"]];\n        echartData.y2.list = [real[\"ONE\"], real[\"TWO\"], real[\"THREE\"], real[\"FOUR\"], real[\"FIVE\"], real[\"SIX\"], real[\"SEVEN\"], real[\"EIGHT\"], real[\"NINE\"], real[\"TEN\"], real[\"ELEVEN\"], real[\"TWELVE\"]];\n        echartData.y3.list = [_parseFloat(usel[\"ONE\"]).toFixed(1), _parseFloat(usel[\"TWO\"]).toFixed(1), _parseFloat(usel[\"THREE\"]).toFixed(1), _parseFloat(usel[\"FOUR\"]).toFixed(1), _parseFloat(usel[\"FIVE\"]).toFixed(1), _parseFloat(usel[\"SIX\"]).toFixed(1), _parseFloat(usel[\"SEVEN\"]).toFixed(1), _parseFloat(usel[\"EIGHT\"]).toFixed(1), _parseFloat(usel[\"NINE\"]).toFixed(1), _parseFloat(usel[\"TEN\"]).toFixed(1), _parseFloat(usel[\"ELEVEN\"]).toFixed(1), _parseFloat(usel[\"TWELVE\"]).toFixed(1)];\n        var max1 = 0,\n            max2 = 100;\n\n        for (var i = 0; i < 12; i++) {\n          if (echartData.y1.list[i] > max1) {\n            max1 = echartData.y1.list[i];\n          }\n\n          if (echartData.y2.list[i] > max1) {\n            max1 = echartData.y2.list[i];\n          }\n\n          if (_parseFloat(echartData.y3.list[i]) > max2) {\n            max2 = _parseFloat(echartData.y3.list[i]);\n          }\n        }\n\n        var maxint = Math.ceil(max1 / 9.8);\n        echartData.y1.max = maxint * 10;\n        var maxint2 = Math.ceil(max2 / 9.8);\n        echartData.y3.max = maxint2 * 10;\n\n        _this2.drawchart(echartData);\n      });\n    },\n    type_tree: function type_tree(data) {\n      if (data.ID > 100) {\n        this.STinfo = data;\n        this.Reload();\n      }\n    },\n    search: function search() {\n      var _this3 = this;\n\n      this.Treedata = [];\n      this.axios.get('/waterplan/managetree', {\n        params: {\n          canalname: this.searchmsg\n        }\n      }).then(function (res) {\n        var root = res.data.tree;\n        var keyarry = [];\n        keyarry.push(root.ID, root.children[0].ID, root.children[0].children[0].ID);\n\n        _this3.Treedata.push(root);\n\n        _this3.keys = keyarry;\n        _this3.STinfo = root.children[0].children[0];\n\n        _this3.Reload();\n      });\n    },\n    exportExcel: function exportExcel() {\n      var params = 'year=' + this.form.year + '&organCode=' + this.STinfo.CANAL_CODE + '&canalname=' + this.STinfo.CANAL_NANME;\n      window.location.href = '/excel/exportusewater?' + params;\n    },\n    drawchart: function drawchart(echartData) {\n      var achart = this.$echarts.init(this.$refs.achart);\n      console.log(achart);\n      achart.resize();\n      achart.setOption({\n        tooltip: {\n          trigger: \"axis\"\n        },\n        color: ['#FF4000', '#2A93FC', '#027802'],\n        legend: {\n          data: ['用水定额', '实际用水', '用水率']\n        },\n        grid: {\n          left: '1%',\n          //图表距边框的距离\n          right: '1%',\n          bottom: '1%',\n          containLabel: true\n        },\n        xAxis: [{\n          type: 'category',\n          data: echartData.x.list,\n          axisLabel: {\n            interval: 0\n          }\n        }],\n        yAxis: [{\n          type: 'value',\n          name: ' 用水量(万m³)',\n          min: 0,\n          max: echartData.y1.max,\n          splitNumber: 5,\n          interval: echartData.y1.max / 5\n        }, {\n          type: 'value',\n          name: '百分比(%)',\n          min: 0,\n          max: echartData.y3.max,\n          splitNumber: 5,\n          interval: echartData.y3.max / 5\n        }],\n        series: [{\n          name: '用水定额',\n          type: 'bar',\n          barGap: 0,\n          data: echartData.y1.list\n        }, {\n          name: '实际用水',\n          type: 'bar',\n          data: echartData.y2.list\n        }, {\n          name: '用水率',\n          type: 'line',\n          yAxisIndex: 1,\n          data: echartData.y3.list\n        }]\n      });\n    }\n  },\n  components: {}\n};",{"version":3,"sources":["usewater.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA,OAAA,aAAA,MAAA,iCAAA;AACA,eAAA;AACA,EAAA,IADA,kBACA;AACA,WAAA;AACA,MAAA,OAAA,EAAA,KADA;AAEA,MAAA,KAAA,EAAA,IAFA;AAGA,MAAA,KAAA,EAAA,IAHA;AAIA,MAAA,KAAA,EAAA,GAJA;AAKA,MAAA,OAAA,EAAA,MAAA,CAAA,WAAA,GAAA,GALA;AAMA,MAAA,SAAA,EAAA,EANA;AAOA,MAAA,QAAA,EAAA,EAPA;AAQA,MAAA,YAAA,EAAA;AACA,QAAA,QAAA,EAAA,UADA;AAEA,QAAA,KAAA,EAAA;AAFA,OARA;AAYA,MAAA,IAAA,EAAA,EAZA;AAaA,MAAA,KAAA,EAAA,EAbA;AAcA,MAAA,QAAA,EAAA,EAdA;AAeA,MAAA,MAAA,EAAA,EAfA;AAgBA,MAAA,IAAA,EAAA;AAAA,QAAA,eAAA,EAAA;AAAA,OAhBA;AAiBA,MAAA,IAAA,EAAA;AACA,QAAA,IAAA,EAAA;AADA,OAjBA;AAoBA,MAAA,OAAA,EAAA,CACA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,QAAA,EAAA,GAHA;AAIA,QAAA,KAAA,EAAA,MAJA;AAKA,QAAA,KAAA,EAAA;AALA,OADA,EAQA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,KAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OARA,EAcA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,KAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OAdA,EAoBA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,OAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OApBA,EA0BA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OA1BA,EAgCA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OAhCA,EAsCA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,KAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OAtCA,EA4CA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,OAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OA5CA,EAkDA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,OAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OAlDA,EAwDA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OAxDA,EA8DA;AACA,QAAA,IAAA,EAAA,IADA;AAEA,QAAA,KAAA,EAAA,KAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OA9DA,EAoEA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA,QAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OApEA,EA0EA;AACA,QAAA,IAAA,EAAA,KADA;AAEA,QAAA,KAAA,EAAA,QAFA;AAGA,QAAA,QAAA,EAAA,EAHA;AAIA,QAAA,KAAA,EAAA;AAJA,OA1EA,EAgFA;AACA,QAAA,IAAA,EAAA,MADA;AAEA,QAAA,KAAA,EAAA,MAFA;AAGA,QAAA,QAAA,EAAA,GAHA;AAIA,QAAA,KAAA,EAAA,OAJA;AAKA,QAAA,KAAA,EAAA;AALA,OAhFA,CApBA;AA4GA,MAAA,IAAA,EAAA;AA5GA,KAAA;AA8GA,GAhHA;AAiHA;AACA,EAAA,MAAA,EAAA,CAAA,aAAA,CAlHA;AAmHA,EAAA,OAnHA,qBAmHA;AAAA;;AACA;AACA,QAAA,GAAA,GAAA,IAAA,IAAA,EAAA;AACA,QAAA,IAAA,GAAA,GAAA,CAAA,WAAA,EAAA;;AACA,SAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,EAAA,EAAA,CAAA,EAAA,EAAA;AACA,UAAA,IAAA,GAAA,IAAA,MAAA,EAAA;AACA,MAAA,IAAA,CAAA,KAAA,GAAA,IAAA,GAAA,CAAA;AACA,MAAA,IAAA,CAAA,KAAA,GAAA,IAAA,GAAA,CAAA,GAAA,GAAA;AACA,WAAA,QAAA,CAAA,IAAA,CAAA,IAAA;AACA;;AACA,SAAA,IAAA,CAAA,IAAA,GAAA,IAAA;AACA,SAAA,KAAA,CAAA,GAAA,CAAA,uBAAA,EAAA;AAAA,MAAA,MAAA,EAAA;AAAA,QAAA,SAAA,EAAA,KAAA;AAAA;AAAA,KAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA;AACA,UAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,UAAA,OAAA,GAAA,EAAA;;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,EAAA,EAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA,CAAA,CAAA,EAAA,EAAA;AACA;;AACA,MAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,MAAA,KAAA,CAAA,IAAA,GAAA,OAAA;;AACA,UAAA,IAAA,CAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,QAAA,KAAA,CAAA,MAAA,GAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA,CAAA,CAAA,CAAA;AACA;;AACA,MAAA,KAAA,CAAA,MAAA;AACA,KAbA;AAcA,GA5IA;AA6IA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,WAAA,IAAA,CAAA,eAAA,GAAA,CAAA,KAAA,IAAA,CAAA,eAAA;AACA,WAAA,KAAA,GAAA,CAAA,KAAA,KAAA;;AACA,UAAA,KAAA,KAAA,IAAA,IAAA,EAAA;AACA,aAAA,KAAA,GAAA,IAAA;AACA,aAAA,KAAA,GAAA,GAAA;AACA,aAAA,KAAA,GAAA,EAAA;AACA,OAJA,MAIA;AACA,aAAA,KAAA,GAAA,IAAA;AACA,aAAA,KAAA,GAAA,GAAA;AACA,aAAA,KAAA,GAAA,EAAA;AACA;;AACA,WAAA,MAAA;AACA,KAdA;AAeA,IAAA,MAfA,oBAeA;AAAA;;AACA,UAAA,GAAA,GAAA;AACA,QAAA,SAAA,EAAA,KAAA,MAAA,CAAA,UADA;AAEA,QAAA,IAAA,EAAA,KAAA,IAAA,CAAA;AAFA,OAAA;AAIA,WAAA,OAAA,GAAA,IAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,oBAAA,EAAA;AAAA,QAAA,MAAA,EAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,QAAA,MAAA,CAAA,KAAA,GAAA,GAAA,CAAA,IAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,YAAA,UAAA,GAAA;AACA,UAAA,CAAA,EAAA,IAAA,MAAA,EADA;AAEA,UAAA,EAAA,EAAA,IAAA,MAAA,EAFA;AAGA,UAAA,EAAA,EAAA,IAAA,MAAA,EAHA;AAIA,UAAA,EAAA,EAAA,IAAA,MAAA;AAJA,SAAA;AAMA,YAAA,KAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,YAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,YAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA,QAAA,UAAA,CAAA,CAAA,CAAA,IAAA,GAAA,CAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,IAAA,EAAA,KAAA,EAAA,KAAA,EAAA,KAAA,CAAA;AACA,QAAA,UAAA,CAAA,EAAA,CAAA,IAAA,GAAA,CAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,OAAA,CAAA,EAAA,KAAA,CAAA,MAAA,CAAA,EAAA,KAAA,CAAA,MAAA,CAAA,EAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,OAAA,CAAA,EAAA,KAAA,CAAA,OAAA,CAAA,EAAA,KAAA,CAAA,MAAA,CAAA,EAAA,KAAA,CAAA,KAAA,CAAA,EAAA,KAAA,CAAA,QAAA,CAAA,EAAA,KAAA,CAAA,QAAA,CAAA,CAAA;AACA,QAAA,UAAA,CAAA,EAAA,CAAA,IAAA,GAAA,CAAA,IAAA,CAAA,KAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,EAAA,IAAA,CAAA,OAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,EAAA,IAAA,CAAA,OAAA,CAAA,EAAA,IAAA,CAAA,OAAA,CAAA,EAAA,IAAA,CAAA,MAAA,CAAA,EAAA,IAAA,CAAA,KAAA,CAAA,EAAA,IAAA,CAAA,QAAA,CAAA,EAAA,IAAA,CAAA,QAAA,CAAA,CAAA;AACA,QAAA,UAAA,CAAA,EAAA,CAAA,IAAA,GAAA,CAAA,YAAA,IAAA,CAAA,KAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,KAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,OAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,MAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,MAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,KAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,OAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,OAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,MAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,KAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,QAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,EAAA,YAAA,IAAA,CAAA,QAAA,CAAA,EAAA,OAAA,CAAA,CAAA,CAAA,CAAA;AACA,YAAA,IAAA,GAAA,CAAA;AAAA,YAAA,IAAA,GAAA,GAAA;;AACA,aAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,EAAA,EAAA,CAAA,EAAA,EAAA;AACA,cAAA,UAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,IAAA,IAAA,EAAA;AACA,YAAA,IAAA,GAAA,UAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA;;AACA,cAAA,UAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,IAAA,IAAA,EAAA;AACA,YAAA,IAAA,GAAA,UAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA;AACA;;AACA,cAAA,YAAA,UAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA,IAAA,IAAA,EAAA;AACA,YAAA,IAAA,GAAA,YAAA,UAAA,CAAA,EAAA,CAAA,IAAA,CAAA,CAAA,CAAA,CAAA;AACA;AACA;;AACA,YAAA,MAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,GAAA,CAAA;AACA,QAAA,UAAA,CAAA,EAAA,CAAA,GAAA,GAAA,MAAA,GAAA,EAAA;AACA,YAAA,OAAA,GAAA,IAAA,CAAA,IAAA,CAAA,IAAA,GAAA,GAAA,CAAA;AACA,QAAA,UAAA,CAAA,EAAA,CAAA,GAAA,GAAA,OAAA,GAAA,EAAA;;AACA,QAAA,MAAA,CAAA,SAAA,CAAA,UAAA;AACA,OAjCA;AAkCA,KAvDA;AAwDA,IAAA,SAxDA,qBAwDA,IAxDA,EAwDA;AACA,UAAA,IAAA,CAAA,EAAA,GAAA,GAAA,EAAA;AACA,aAAA,MAAA,GAAA,IAAA;AACA,aAAA,MAAA;AACA;AACA,KA7DA;AA8DA,IAAA,MA9DA,oBA8DA;AAAA;;AACA,WAAA,QAAA,GAAA,EAAA;AACA,WAAA,KAAA,CAAA,GAAA,CAAA,uBAAA,EAAA;AAAA,QAAA,MAAA,EAAA;AAAA,UAAA,SAAA,EAAA,KAAA;AAAA;AAAA,OAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,IAAA,GAAA,GAAA,CAAA,IAAA,CAAA,IAAA;AACA,YAAA,OAAA,GAAA,EAAA;AACA,QAAA,OAAA,CAAA,IAAA,CAAA,IAAA,CAAA,EAAA,EAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,EAAA,EAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA,CAAA,CAAA,EAAA,EAAA;;AACA,QAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,IAAA;;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,OAAA;AACA,QAAA,MAAA,CAAA,MAAA,GAAA,IAAA,CAAA,QAAA,CAAA,CAAA,EAAA,QAAA,CAAA,CAAA,CAAA;;AACA,QAAA,MAAA,CAAA,MAAA;AACA,OARA;AASA,KAzEA;AA0EA,IAAA,WA1EA,yBA0EA;AACA,UAAA,MAAA,GAAA,UAAA,KAAA,IAAA,CAAA,IAAA,GAAA,aAAA,GAAA,KAAA,MAAA,CAAA,UAAA,GAAA,aAAA,GAAA,KAAA,MAAA,CAAA,WAAA;AACA,MAAA,MAAA,CAAA,QAAA,CAAA,IAAA,GAAA,2BAAA,MAAA;AACA,KA7EA;AA8EA,IAAA,SA9EA,qBA8EA,UA9EA,EA8EA;AACA,UAAA,MAAA,GAAA,KAAA,QAAA,CAAA,IAAA,CAAA,KAAA,KAAA,CAAA,MAAA,CAAA;AACA,MAAA,OAAA,CAAA,GAAA,CAAA,MAAA;AACA,MAAA,MAAA,CAAA,MAAA;AACA,MAAA,MAAA,CAAA,SAAA,CAAA;AACA,QAAA,OAAA,EAAA;AACA,UAAA,OAAA,EAAA;AADA,SADA;AAIA,QAAA,KAAA,EAAA,CAAA,SAAA,EAAA,SAAA,EAAA,SAAA,CAJA;AAKA,QAAA,MAAA,EAAA;AACA,UAAA,IAAA,EAAA,CAAA,MAAA,EAAA,MAAA,EAAA,KAAA;AADA,SALA;AAQA,QAAA,IAAA,EAAA;AACA,UAAA,IAAA,EAAA,IADA;AACA;AACA,UAAA,KAAA,EAAA,IAFA;AAGA,UAAA,MAAA,EAAA,IAHA;AAIA,UAAA,YAAA,EAAA;AAJA,SARA;AAcA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,UADA;AAEA,UAAA,IAAA,EAAA,UAAA,CAAA,CAAA,CAAA,IAFA;AAGA,UAAA,SAAA,EAAA;AAAA,YAAA,QAAA,EAAA;AAAA;AAHA,SADA,CAdA;AAqBA,QAAA,KAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,IAAA,EAAA,WAFA;AAGA,UAAA,GAAA,EAAA,CAHA;AAIA,UAAA,GAAA,EAAA,UAAA,CAAA,EAAA,CAAA,GAJA;AAKA,UAAA,WAAA,EAAA,CALA;AAMA,UAAA,QAAA,EAAA,UAAA,CAAA,EAAA,CAAA,GAAA,GAAA;AANA,SADA,EAUA;AACA,UAAA,IAAA,EAAA,OADA;AAEA,UAAA,IAAA,EAAA,QAFA;AAGA,UAAA,GAAA,EAAA,CAHA;AAIA,UAAA,GAAA,EAAA,UAAA,CAAA,EAAA,CAAA,GAJA;AAKA,UAAA,WAAA,EAAA,CALA;AAMA,UAAA,QAAA,EAAA,UAAA,CAAA,EAAA,CAAA,GAAA,GAAA;AANA,SAVA,CArBA;AAyCA,QAAA,MAAA,EAAA,CACA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,IAAA,EAAA,KAFA;AAGA,UAAA,MAAA,EAAA,CAHA;AAIA,UAAA,IAAA,EAAA,UAAA,CAAA,EAAA,CAAA;AAJA,SADA,EAOA;AACA,UAAA,IAAA,EAAA,MADA;AAEA,UAAA,IAAA,EAAA,KAFA;AAGA,UAAA,IAAA,EAAA,UAAA,CAAA,EAAA,CAAA;AAHA,SAPA,EAYA;AACA,UAAA,IAAA,EAAA,KADA;AAEA,UAAA,IAAA,EAAA,MAFA;AAGA,UAAA,UAAA,EAAA,CAHA;AAIA,UAAA,IAAA,EAAA,UAAA,CAAA,EAAA,CAAA;AAJA,SAZA;AAzCA,OAAA;AA6DA;AA/IA,GA7IA;AA8RA,EAAA,UAAA,EAAA;AA9RA,CAAA","sourcesContent":["<template>\r\n  <div>\r\n    <Content :style=\"{padding: '20px', background: '#fff'}\">\r\n      <Row :gutter=\"16\">\r\n        <Col :span=\"span1\">\r\n          <Row :gutter=\"16\" type=\"flex\" justify=\"start\" z style=\"margin-top: 10px;line-height: 32px;\">\r\n            <Col>\r\n              年份:\r\n                <Select v-model=\"form.year\" :clearable=\"false\" @on-change=\"Yearsearch\" style=\"width:100px;margin-left: 5px;margin-right: 20px;\">\r\n                    <Option\r\n                    v-for=\"obj in yearlist\"\r\n                    :key=\"obj.value\"\r\n                    :label=\"obj.label\"\r\n                    :value=\"obj.value\">\r\n                    </Option>\r\n                </Select>\r\n            </Col>\r\n            <Col>\r\n               <Button type=\"primary\" style=\"width: auto;margin-right: 10px;\" @click=\"exportExcel\">导出</Button> \r\n            </Col>\r\n            <Col>\r\n            </Col>\r\n            <Col>\r\n            </Col>\r\n            <Col> \r\n                       \r\n            </Col>\r\n          </Row>\r\n          <div class=\"switch\" @click=\"Menu_toggle\">\r\n            <i class=\"el-icon-d-arrow-left\" v-if=\"Menu.show_Controller\"></i>\r\n            <i class=\"el-icon-d-arrow-right\" v-if=\"!Menu.show_Controller\"></i>\r\n          </div>\r\n          <Divider/>\r\n          <Row>\r\n                <Col style='font-size: 14px;' class=\"borsLine\">支渠名称：{{STinfo.CANAL_NANME}}&nbsp;&nbsp;&nbsp;&nbsp;单位：用水量（万m³）&nbsp;&nbsp;用水率（%）</Col>\r\n           </Row>\r\n          <Row :gutter=\"24\" style=\"display: flex;\">\r\n            <Col style=\"width:100%;\">\r\n              <el-table\r\n              :data=\"data1\"\r\n              border\r\n              height=\"156\"\r\n              v-loading=\"loading\"\r\n              style=\"width: 100%;\">\r\n                <el-table-column v-for=\"(column, index) in columns\" :prop=\"column.value\" :label=\"column.text\" :min-width=\"column.minwidth\" :fixed=\"column.fixed\" :align=\"column.algin\" :key=\"Math.random()\">\r\n                </el-table-column>\r\n              </el-table>\r\n            <div ref=\"achart\" :style=\"{'width': '100%','height': (theight-120)+'px','margin-top':'5px'}\"></div> \r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n        <transition name=\"el-fade-in-linear\">\r\n        <Col :span=\"span2\" v-show=\"show1\">\r\n        <Row>\r\n          <Input search enter-button suffix=\"ios-search\" placeholder=\"请输入站名\" style=\"width: auto;margin-left: 20px;\" @on-search=\"search\" v-model=\"searchmsg\" />    \r\n          </Row>\r\n          <Row style=\"margin-top: 10px;margin-left: 20px;\">\r\n            <Col :style=\"{'height': (theight+125)+'px','overflow-y': 'auto'}\">\r\n              <el-tree\r\n                class=\"filter-tree\"\r\n                :data=\"Treedata\"\r\n                :props=\"defaultProps\"\r\n                highlight-current=\"true\"\r\n                @node-click=\"type_tree\"\r\n                node-key=\"ID\"\r\n               :default-expanded-keys=\"keys\"\r\n                ref=\"tree\">\r\n              </el-tree>\r\n            </Col>\r\n          </Row>\r\n        </Col>\r\n      </transition>\r\n      </Row>\r\n    </Content>\r\n  </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nimport FilterMethods from \"@/assets/commonJS/FilterMethods\";\r\nexport default {\r\n        data() {\r\n        return {\r\n            loading:false,\r\n            show1:true,\r\n            span1:'19',\r\n            span2:'5',\r\n            theight:window.innerHeight-370,\r\n            searchmsg:'',\r\n            Treedata: [],\r\n            defaultProps: {\r\n                children: 'children',\r\n                label: 'CANAL_NANME'\r\n              },\r\n            keys:[],\r\n            data1: [],\r\n            yearlist:[],\r\n            STinfo:{},\r\n            Menu: { show_Controller: false },\r\n                form:{\r\n                    year:'',\r\n                }, \r\n            columns: [\r\n        {\r\n          text: \"名称\",\r\n          value: \"STNM\",\r\n          minwidth: 100,\r\n          fixed:\"left\",\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"一月\",\r\n          value: \"ONE\",\r\n          minwidth: 80, \r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"二月\",\r\n          value: \"TWO\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"三月\",\r\n          value: \"THREE\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"四月\",\r\n          value: \"FOUR\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"五月\",\r\n          value: \"FIVE\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"六月\",\r\n          value: \"SIX\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"七月\",\r\n          value: \"SEVEN\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"八月\",\r\n          value: \"EIGHT\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"九月\",\r\n          value: \"NINE\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"十月\",\r\n          value: \"TEN\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"十一月\",\r\n          value: \"ELEVEN\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"十二月\",\r\n          value: \"TWELVE\",\r\n          minwidth: 80,\r\n          algin:\"center\",\r\n        },\r\n        {\r\n          text: \"年度总计\",\r\n          value: \"SUMW\",\r\n          minwidth: 100,\r\n          fixed:\"right\",\r\n          algin:\"center\",\r\n        },\r\n      ],\r\n      data: []\r\n        };\r\n      },\r\n      // 引入过滤方法到此组件\r\n      mixins: [FilterMethods],\r\n      mounted() {\r\n            //年份\r\n            var now=new Date();\r\n            var year=now.getFullYear();\r\n            for(var i=0;i<10;i++){\r\n                var yobj=new Object();\r\n                yobj.value=year-i;\r\n                yobj.label=(year-i)+'年';\r\n                this.yearlist.push(yobj);\r\n            }\r\n            this.form.year=year;\r\n            this.axios.get('/waterplan/managetree',{params:{canalname:this.searchmsg}}).then(res => {\r\n              debugger;\r\n              var root=res.data.tree;\r\n              var keyarry=[];\r\n              if(root.children.length>0){\r\n              keyarry.push(root.ID,root.children[0].ID,root.children[0].children[0].ID);\r\n              }\r\n              this.Treedata.push(root);\r\n              this.keys=keyarry;\r\n              if(root.children.length>0){\r\n              this.STinfo=root.children[0].children[0];\r\n              }\r\n              this.Reload();\r\n            });\r\n      },\r\n      methods: {\r\n         Menu_toggle() {\r\n          this.Menu.show_Controller = !this.Menu.show_Controller;\r\n          this.show1 = !this.show1;\r\n          if (this.show1 == true ) {\r\n            this.span1 = '19';\r\n            this.span2 = '5';\r\n            this.data2 = {};\r\n          }else{\r\n            this.span1 = '24';\r\n            this.span2 = '0';\r\n            this.data2 = {}\r\n          }\r\n          this.Reload();\r\n        },\r\n          Reload(){\r\n              let obj = {\r\n                  organCode:this.STinfo.CANAL_CODE,\r\n                  year:this.form.year\r\n              };\r\n              this.loading = true;\r\n              this.axios.get('/waterplan/useinfo',{params:obj}).then((res)=>{                \r\n                    this.data1 = res.data;\r\n                    this.loading = false;\r\n                    var echartData = {\r\n                        x: new Object(),\r\n                        y1: new Object(),\r\n                        y2: new Object(),\r\n                        y3: new Object()\r\n                    }\r\n                    var quota=res.data[0];\r\n                    var real=res.data[1];\r\n                    var usel=res.data[2];\r\n                    echartData.x.list=['1月','2月','3月','4月','5月','6月','7月','8月','9月','10月','11月','12月'];\r\n                    echartData.y1.list=[quota[\"ONE\"],quota[\"TWO\"],quota[\"THREE\"],quota[\"FOUR\"],quota[\"FIVE\"],quota[\"SIX\"],quota[\"SEVEN\"],quota[\"EIGHT\"],quota[\"NINE\"],quota[\"TEN\"],quota[\"ELEVEN\"],quota[\"TWELVE\"]];\r\n                    echartData.y2.list=[real[\"ONE\"],real[\"TWO\"],real[\"THREE\"],real[\"FOUR\"],real[\"FIVE\"],real[\"SIX\"],real[\"SEVEN\"],real[\"EIGHT\"],real[\"NINE\"],real[\"TEN\"],real[\"ELEVEN\"],real[\"TWELVE\"]];\r\n                    echartData.y3.list=[parseFloat(usel[\"ONE\"]).toFixed(1),parseFloat(usel[\"TWO\"]).toFixed(1),parseFloat(usel[\"THREE\"]).toFixed(1),parseFloat(usel[\"FOUR\"]).toFixed(1),parseFloat(usel[\"FIVE\"]).toFixed(1),parseFloat(usel[\"SIX\"]).toFixed(1),parseFloat(usel[\"SEVEN\"]).toFixed(1),parseFloat(usel[\"EIGHT\"]).toFixed(1),parseFloat(usel[\"NINE\"]).toFixed(1),parseFloat(usel[\"TEN\"]).toFixed(1),parseFloat(usel[\"ELEVEN\"]).toFixed(1),parseFloat(usel[\"TWELVE\"]).toFixed(1)];\r\n                    var max1=0,max2=100;\r\n                    for(var i=0;i<12;i++){\r\n                      if(echartData.y1.list[i]>max1){\r\n                        max1=echartData.y1.list[i];\r\n                      }\r\n                      if(echartData.y2.list[i]>max1){\r\n                        max1=echartData.y2.list[i];\r\n                      }\r\n                      if(parseFloat(echartData.y3.list[i])>max2){\r\n                        max2=parseFloat(echartData.y3.list[i]);\r\n                      }\r\n                    }\r\n                    let maxint = Math.ceil(max1 / 9.8);\r\n                    echartData.y1.max=maxint * 10;\r\n                    let maxint2=Math.ceil(max2 / 9.8);\r\n                    echartData.y3.max=maxint2*10;\r\n                    this.drawchart(echartData);\r\n                });\r\n          },\r\n          type_tree(data){\r\n            if (data.ID >100) {\r\n              this.STinfo = data;\r\n              this.Reload();             \r\n            }\r\n          },\r\n          search(){\r\n            this.Treedata=[];\r\n            this.axios.get('/waterplan/managetree',{params:{canalname:this.searchmsg}}).then(res => {\r\n              var root=res.data.tree;\r\n              var keyarry=[];\r\n              keyarry.push(root.ID,root.children[0].ID,root.children[0].children[0].ID);\r\n              this.Treedata.push(root);\r\n              this.keys=keyarry;\r\n              this.STinfo=root.children[0].children[0];\r\n              this.Reload();\r\n            });\r\n          },\r\n          exportExcel(){\r\n               var params='year='+this.form.year+'&organCode='+this.STinfo.CANAL_CODE+'&canalname='+this.STinfo.CANAL_NANME;\r\n                window.location.href='/excel/exportusewater?'+params; \r\n          },\r\n          drawchart(echartData) {\r\n            var achart = this.$echarts.init(this.$refs.achart);\r\n            console.log(achart);\r\n            achart.resize();\r\n            achart.setOption({\r\n    tooltip: {\r\n            trigger: \"axis\",\r\n          },\r\n    color:['#FF4000','#2A93FC','#027802'],\r\n    legend: {\r\n        data:['用水定额','实际用水','用水率']\r\n    },\r\n    grid: {  \r\n                left: '1%',   //图表距边框的距离\r\n                right: '1%',\r\n                bottom:'1%',\r\n                containLabel: true\r\n            },\r\n    xAxis: [\r\n        {\r\n            type: 'category',\r\n            data: echartData.x.list,\r\n            axisLabel:{interval:0}\r\n        }\r\n    ],\r\n    yAxis: [\r\n        {\r\n            type: 'value',\r\n            name: ' 用水量(万m³)',\r\n            min: 0,\r\n            max: echartData.y1.max,\r\n            splitNumber: 5,\r\n            interval: echartData.y1.max/5,\r\n\r\n        },\r\n        {\r\n            type: 'value',\r\n            name: '百分比(%)',\r\n            min: 0,\r\n            max: echartData.y3.max,\r\n            splitNumber: 5,\r\n            interval: echartData.y3.max/5,\r\n\r\n        }\r\n    ],\r\n    series: [\r\n        {\r\n            name:'用水定额',\r\n            type:'bar',\r\n            barGap: 0,\r\n            data:echartData.y1.list\r\n        },\r\n        {\r\n            name:'实际用水',\r\n            type:'bar',\r\n            data:echartData.y2.list\r\n        },\r\n        {\r\n            name:'用水率',\r\n            type:'line',\r\n            yAxisIndex: 1,\r\n            data:echartData.y3.list\r\n        }\r\n    ]\r\n});\r\n       },\r\n       },\r\n      components: {   \r\n      }\r\n    }\r\n</script>\r\n<style type=\"text/css\" lang=\"less\">\r\n.switch{\r\n  position: absolute;\r\n  right: 0;\r\n  top: 0;\r\n  height: 55px;\r\n  display: flex;\r\n  align-items: center;\r\n  background: white;\r\n  border-top-left-radius: 5px;\r\n  border-bottom-left-radius: 5px;\r\n  border: #7eb7f0 2px solid;\r\n  border-right: 0;\r\n}\r\n</style>"],"sourceRoot":"src/warm/warm-water/water-use"}]}