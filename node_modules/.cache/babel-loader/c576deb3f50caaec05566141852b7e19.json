{"remainingRequest":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\thread-loader\\dist\\cjs.js!D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js!D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\huangcaiplace\\zhihuiguanqu\\src\\components\\Details\\Details-tuxiangzhan.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\huangcaiplace\\zhihuiguanqu\\src\\components\\Details\\Details-tuxiangzhan.vue","mtime":1577669404027},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\thread-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.regexp.split\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { setTimeout } from \"timers\";\nimport FilterMethods from \"../../assets/commonJS/FilterMethods\"; // 过滤方法\n\nimport GetDataMethods from \"../../assets/commonJS/GetDataMethods\"; // 获取数据方法\n\nimport { timingSafeEqual } from \"crypto\";\nexport default {\n  props: {\n    info: {}\n  },\n  data: function data() {\n    return {\n      //\n      activeName: \"tuxiang\",\n      siteInfo: {},\n      //   多选框对象\n      checkBox: {\n        shuiqingList: [{\n          value: \"historyTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"历史表\"\n        }, {\n          value: \"hourTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"小时表\"\n        }, {\n          value: \"dayTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"日表\"\n        }, {\n          value: \"nightTable\",\n          size: \"large\",\n          // iconType: \"logo-facebook\",\n          title: \"月表\"\n        }],\n        // 水情多选框绑定值\n        shuiqing_social: [\"historyTable\", \"hourTable\", \"dayTable\", \"nightTable\"]\n      },\n      //   选择框对象\n      select: {\n        searchList: [{\n          value: \"quick\",\n          label: \"快速查询\"\n        }, {\n          value: \"vague\",\n          label: \"模糊查询\"\n        }]\n      },\n      // 表格数据\n      table: {\n        // 图像\n        tuxiang: {\n          // 日期时间选择器的选项配置\n          datePickerOptions: {\n            shortcuts: [{\n              text: \"最近6小时\",\n              onClick: function onClick(picker) {\n                var end = new Date();\n                var start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 6);\n                picker.$emit(\"pick\", [start, end]);\n              }\n            }, {\n              text: \"最近12小时\",\n              onClick: function onClick(picker) {\n                var end = new Date();\n                var start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 12);\n                picker.$emit(\"pick\", [start, end]);\n              }\n            }, {\n              text: \"最近24小时\",\n              onClick: function onClick(picker) {\n                var end = new Date();\n                var start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 24);\n                picker.$emit(\"pick\", [start, end]);\n              }\n            }, {\n              text: \"最近36小时\",\n              onClick: function onClick(picker) {\n                var end = new Date();\n                var start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 36);\n                picker.$emit(\"pick\", [start, end]);\n              }\n            }, {\n              text: \"最近72小时\",\n              onClick: function onClick(picker) {\n                var end = new Date();\n                var start = new Date();\n                start.setTime(start.getTime() - 3600 * 1000 * 72);\n                picker.$emit(\"pick\", [start, end]);\n              }\n            }]\n          },\n          // 日期时间选择器类型\n          datePickerType: \"datetimerange\",\n          // 日期时间选择器值\n          date: null,\n          // 表格是否加载中\n          loading: false,\n          // 当前页\n          currentPage: 1,\n          // 每页显示数量\n          pageSizes: 20,\n          // 总条数\n          total: true,\n          Rows: [// {\n            //   url: `/guanqu/gis/pic_content?id=${info.STCD}`\n            // },\n            // {\n            //   url: `/guanqu/gis/pic_content?id=${info.STCD}`\n            // },\n            // {\n            //   url: `/guanqu/gis/pic_content?id=${info.STCD}`\n            // },\n            // {\n            //   url: `/guanqu/gis/pic_content?id=${info.STCD}`\n            // },\n          ]\n        }\n      },\n      //   日期数据\n      date: {\n        shuiqing: \"\"\n      },\n      // 输入框对象\n      input: {\n        // 关系曲线换算的\n        huansuan: {\n          waterLever: \"\",\n          flowLever: \"\"\n        }\n      },\n      //   列表对象\n      list: {\n        imageList: [{\n          imgUrl: \"img/shuizha.9d256eb4.jpg\"\n        }]\n      },\n      //   导出按钮加载控制\n      outPutLoading: false,\n      //   导出确认对话框控制\n      outPutModal: false,\n      // 区域加载控制\n      boxLoading: false\n    };\n  },\n  mixins: [FilterMethods, GetDataMethods],\n  methods: {\n    handleSizeChange: function handleSizeChange() {},\n    handleCurrentChange: function handleCurrentChange() {},\n    //   导出站点信息\n    outPutSiteInfo: function outPutSiteInfo() {\n      var _this = this;\n\n      //   关闭导出确认对话框\n      this.outPutModal = false; //   按钮加载\n\n      this.outPutLoading = true;\n      setTimeout(function () {\n        _this.outPutLoading = false;\n\n        _this.$Modal.success({\n          title: \"关于导出\",\n          content: \"站点信息表导出成功\"\n        });\n      }, 500);\n    },\n    //   确认导出\n    outPutSure: function outPutSure() {\n      this.outPutSiteInfo();\n    },\n    // 搜索\n    search: function search() {\n      var _this2 = this;\n\n      // 表格加载中\n      this.table.loading = true;\n      setTimeout(function () {\n        // var newList = this.featrue.Rows.map((val, index) => {\n        //   return val.attributes;\n        // });\n        // this.table.Rows = newList;\n        // 取消表格加载\n        _this2.table.loading = false;\n      }, 1000);\n    },\n    // 加载表格数据\n    loadTableData: function loadTableData(list, data) {\n      this.table[list].Rows = data;\n    },\n    // 加载站点数据\n    loadSiteData: function loadSiteData(data) {\n      this.siteInfo = data;\n    },\n    // 根据行政区划编码获取行政区划\n    getCompartmentByADDVCD: function getCompartmentByADDVCD(callback) {\n      var ADDVCD = this.info.rowinfo.ADDVCD;\n\n      if (ADDVCD && ADDVCD != \"\") {\n        this.axios.get(\"/guanqu/admin/WRP_AD_B\", {\n          params: {\n            AD_CD: ADDVCD\n          }\n        }).then(function (res) {\n          var data = res.data.rows;\n\n          if (typeof callback == \"function\") {\n            callback(data);\n          }\n        });\n      }\n    },\n    // 查询历史图像数据\n    search_tuxiang: function search_tuxiang() {\n      var _this3 = this;\n\n      this.$TableMethods.tableLoading(this.table.tuxiang); // 传递站码参数\n\n      var body = {\n        STCD: this.siteInfo.STCD,\n        _page: this.table.tuxiang.currentPage,\n        _page_size: this.table.tuxiang.pageSizes,\n        _orderby: \"TM desc\"\n      }; // 如果有选择日期进行查询，根据表格类型传递参数\n\n      if (this.table.tuxiang.date) {\n        var DTT = this.$FilterData.elDatePicker_Filter(this.table.tuxiang.date, \"include_seconds\").split(\",\");\n        body.Time_min = DTT[1];\n        body.Time_max = DTT[2];\n      }\n\n      this.$GetData.Survey_History_TX(body, true, function (data) {\n        _this3.$TableMethods.setTableTotal(_this3.table.tuxiang, data.total);\n\n        _this3.$TableMethods.setTableData(_this3.table.tuxiang, data.data);\n\n        _this3.$TableMethods.cancelTableLoading(_this3.table.tuxiang);\n      });\n    },\n    // 处理页码切换_图像\n    handleCurrentChange_tuxiang: function handleCurrentChange_tuxiang(index) {\n      this.table[\"tuxiang\"].currentPage = index;\n      this.search_tuxiang();\n    },\n    // 处理每页显示条数切换_水情数据\n    handleSizeChange_tuxiang: function handleSizeChange_tuxiang(pageSizes) {\n      this.table[\"tuxiang\"].pageSizes = pageSizes;\n      this.table[\"tuxiang\"].currentPage = 1;\n      this.search_tuxiang();\n    },\n    // 设置图像历史表默认查询日期\n    setTableDefaultDate_tuxiang: function setTableDefaultDate_tuxiang() {\n      var end = new Date();\n      var start = zeroPointOfTheDay();\n      var timeSlot = [start, end];\n      this.table.tuxiang.date = timeSlot; // this.setTableDate(\"tuxiang\", timeSlot);\n\n      function zeroPointOfTheDay() {\n        var date = new Date();\n        date.setHours(0);\n        date.setMinutes(0);\n        date.setSeconds(0);\n        date.setMilliseconds(0);\n        return date;\n      }\n    },\n    // 处理日期时间选择器确定事件_图像\n    handleDatePickerChange_tuxiang: function handleDatePickerChange_tuxiang(item) {\n      this.table.tuxiang.currentPage = 1;\n      this.search_tuxiang();\n    },\n    // 设置 xx表格 时间选择器值\n    setTableDate: function setTableDate(tableName, val) {\n      this.table[tableName].date = val;\n    }\n  },\n  mounted: function mounted() {\n    var _this4 = this;\n\n    // //设置默认时间\n    // var newdate = new Array();\n    // var end = new Date();\n    // var start = new Date();\n    // var Month = start.getMonth()+1;\n    // newdate[0] = start.getFullYear()+'-'+Month+'-'+start.getDate()+' 00:00:00.000';\n    // newdate[1] = end;\n    // this.table.tuxiang.date = newdate;\n    // 区域加载中\n    this.boxLoading = true; // console.log(\"图像\",this.info)\n\n    this.getCompartmentByADDVCD(function (data) {\n      _this4.siteInfo.AD_NM = data[0].AD_NM;\n    }); // 根据河流编码获取河流名\n\n    this.$GetData.Base_R_I({\n      RVCD: this.info.rowinfo.RVCD\n    }, true, function (data) {\n      _this4.siteInfo.RVCD = data.data[0].RVNM;\n    }); // 根据流域编码获取流域名\n\n    this.$GetData.Base_B_I({\n      CTCD: this.info.rowinfo.CTCD\n    }, true, function (data) {\n      _this4.siteInfo.CTCD = data.data[0].CTNM;\n    }); // 获取详情数据\n\n    this.loadSiteData(this.info);\n    setTimeout(function () {\n      _this4.boxLoading = false;\n    }, 500); // 设置图像历史表默认查询日期\n\n    this.setTableDefaultDate_tuxiang(); // 查询图像历史表数据\n\n    this.search_tuxiang(); // this.axios.get(`/guanqu/gis/details?ID=${this.info.ID}`).then(res => {\n    //   // 加载站点数据\n    //   // this.loadSiteData(res.data);\n    //   // 加载取消\n    //   this.boxLoading = false;\n    // });\n  }\n};",null]}