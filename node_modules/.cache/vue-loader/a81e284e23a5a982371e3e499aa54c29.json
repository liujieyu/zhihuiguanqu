{"remainingRequest":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-dutyinfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-dutyinfo.vue","mtime":1645514326432},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport WarmDataConfig from \"@/assets/commonJS/WarmDataConfig\";\r\nexport default {\r\n  props: {\r\n    info:{}\r\n  },\r\n  data(){\r\n    var checkPhone = (rule, value, callback) => {\r\n    if (!value) {\r\n        return callback(new Error('手机号不能为空'));\r\n    } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\r\n        console.log(reg.test(value));\r\n        if (reg.test(value)) {\r\n        callback();\r\n        } else {\r\n        return callback(new Error('请输入正确的手机号'));\r\n        }\r\n    }\r\n    };\r\n    var validatePhone = (rule, value, callback) => {\r\n        if (value !=null && value !== '') { \r\n            var reg =/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/;\r\n            if(!reg.test(value)){\r\n              callback(new Error('请输入正确的办公电话'));\r\n            }else{\r\n                callback();\r\n            }\r\n          }else{\r\n              callback();\r\n          }\r\n          callback();\r\n      };\r\n    var checkwzpx=(rule,value,callback)=>{\r\n        if(value !=null && value !== ''){\r\n            var reg=/^[0-9]*$/;\r\n            if(!reg.test(value)){\r\n                callback(new Error('请输入数字'));\r\n            }else{\r\n                callback();\r\n            }\r\n        }\r\n        callback();\r\n    };\r\n    return{        \r\n        dutytypes:[],\r\n        form:{\r\n            yr:new Date().getFullYear().toString(),\r\n            nm:'',\r\n            mobile:'',\r\n            ophone:'',\r\n            unit:'',\r\n            position:'',\r\n            dutytype:'',\r\n            wzpx:'',\r\n            id:0,\r\n            opsign:1  // 1 add 2 update\r\n        },\r\n        rules: {\r\n            yr:[\r\n                { required: true, message: '请选择年份', trigger: 'change' }\r\n            ],\r\n            nm:[\r\n                { required: true, message: '请输入姓名', trigger: 'blur' }\r\n            ],\r\n            mobile:[\r\n                {required: true, validator: checkPhone, trigger: 'blur'}\r\n            ],\r\n            ophone:[\r\n                {validator: validatePhone, trigger: 'blur'}\r\n            ],\r\n            wzpx:[\r\n                {validator:checkwzpx,message:'请输入数字',trigger:'blur'}\r\n            ],\r\n        }\r\n    }\r\n  },\r\n  // 引入过滤方法到此组件\r\n  mixins: [WarmDataConfig],\r\n  mounted(){\r\n           //if(this.info.sign==\"add\"){\r\n           //    this.form.yr=new Date().getFullYear().toString();\r\n           //}\r\n            //人员类型\r\n            this.Get_WrpFieldinfo('HHPDI_Duty_Plan','TYPE',data => {\r\n                this.dutytypes = data;\r\n                if(this.info.sign==\"update\"){\r\n                    this.form.yr=this.info.YR.toString();\r\n                    this.form.nm=this.info.NM;\r\n                    this.form.mobile=this.info.MOBILE;\r\n                    this.form.ophone=this.info.OPHONE;\r\n                    this.form.unit=this.info.UNIT;\r\n                    this.form.position=this.info.POSITION;\r\n                    this.form.dutytype=this.info.DUTYTYPE==null?'':this.info.DUTYTYPE.toString();\r\n                    this.form.wzpx=this.info.WZPX;\r\n                    this.form.id=this.info.ID;\r\n                }\r\n            });\r\n        },\r\n  methods:{\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            if(this.info.sign==\"add\"){\r\n                this.form.opsign=1;\r\n            }else{\r\n                this.form.opsign=2;\r\n            }\r\n            let url='/alarm/editdutyinfo';\r\n          let success;\r\n          if(this.info.sign==\"add\"){\r\n              success='新增值班通讯录成功！';\r\n          }else{\r\n              success='修改值班通讯录成功！';\r\n          }\r\n          this.axios.post(url,this.form).then((res)=>{\r\n            if(res.data==\"ok\"){\r\n                this.$message({message:success,type:'success'});\r\n                this.$emit('closedailog');\r\n                if(this.info.sign==\"add\"){\r\n                    this.$refs['form'].resetFields();\r\n                }\r\n            }                   \r\n        });\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      }\r\n  },\r\n}\r\n",{"version":3,"sources":["Detail-dutyinfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail-dutyinfo.vue","sourceRoot":"src/warm/warm-detail","sourcesContent":["<template>\r\n  <div>\r\n      <el-form ref=\"form\" :inline=\"true\" :model=\"form\" label-width=\"100px\" size=\"small\" class=\"demo-form-inline\" :rules=\"rules\" style=\"width:580px\">\r\n                <el-form-item label=\"年份：\" prop=\"yr\">\r\n                    <el-date-picker\r\n                            style=\"width: 180px;\"\r\n                            v-model=\"form.yr\"\r\n                            format=\"yyyy年\"\r\n                            value-format=\"yyyy\"\r\n                            type=\"year\"\r\n                            size=\"small\"\r\n                            :clearable=\"false\"></el-date-picker>\r\n                </el-form-item>\r\n                <el-form-item label=\"姓名：\" prop=\"nm\">\r\n                    <el-input v-model=\"form.nm\" :value=\"form.nm\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"手机号码：\" prop=\"mobile\">\r\n                    <el-input v-model=\"form.mobile\" :value=\"form.mobile\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"办公电话：\" prop=\"ophone\">\r\n                    <el-input v-model=\"form.ophone\" :value=\"form.ophone\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>               \r\n                <el-form-item label=\"部门：\" prop=\"unit\">\r\n                    <el-input v-model=\"form.unit\" :value=\"form.unit\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"职务：\" prop=\"position\">\r\n                    <el-input v-model=\"form.position\" :value=\"form.position\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"人员类型：\" prop=\"dutytype\">\r\n                    <el-select v-model=\"form.dutytype\" placeholder=\"请选择人员类型\" style=\"width:180px\" clearable>\r\n                    <el-option v-for=\"item in dutytypes\" :label=\"item.label\" :value=\"item.value\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"位置排序：\" prop=\"wzpx\">\r\n                    <el-input v-model=\"form.wzpx\" :value=\"form.wzpx\"  style=\"width:180px\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <Button  type=\"primary\" @click=\"submitForm('form')\" icon=\"md-cloud-upload\" style=\"margin-left:200px;\">提交</Button>\r\n                    <Button  @click=\"resetForm('form')\" style=\"margin-left:20px;\" icon=\"md-trash\" >重置</Button>\r\n                </el-form-item>\r\n      </el-form>\r\n  </div>\r\n</template>\r\n<script>\r\nimport WarmDataConfig from \"@/assets/commonJS/WarmDataConfig\";\r\nexport default {\r\n  props: {\r\n    info:{}\r\n  },\r\n  data(){\r\n    var checkPhone = (rule, value, callback) => {\r\n    if (!value) {\r\n        return callback(new Error('手机号不能为空'));\r\n    } else {\r\n        const reg = /^1[3|4|5|7|8][0-9]\\d{8}$/\r\n        console.log(reg.test(value));\r\n        if (reg.test(value)) {\r\n        callback();\r\n        } else {\r\n        return callback(new Error('请输入正确的手机号'));\r\n        }\r\n    }\r\n    };\r\n    var validatePhone = (rule, value, callback) => {\r\n        if (value !=null && value !== '') { \r\n            var reg =/^(\\(\\d{3,4}\\)|\\d{3,4}-|\\s)?\\d{7,14}$/;\r\n            if(!reg.test(value)){\r\n              callback(new Error('请输入正确的办公电话'));\r\n            }else{\r\n                callback();\r\n            }\r\n          }else{\r\n              callback();\r\n          }\r\n          callback();\r\n      };\r\n    var checkwzpx=(rule,value,callback)=>{\r\n        if(value !=null && value !== ''){\r\n            var reg=/^[0-9]*$/;\r\n            if(!reg.test(value)){\r\n                callback(new Error('请输入数字'));\r\n            }else{\r\n                callback();\r\n            }\r\n        }\r\n        callback();\r\n    };\r\n    return{        \r\n        dutytypes:[],\r\n        form:{\r\n            yr:new Date().getFullYear().toString(),\r\n            nm:'',\r\n            mobile:'',\r\n            ophone:'',\r\n            unit:'',\r\n            position:'',\r\n            dutytype:'',\r\n            wzpx:'',\r\n            id:0,\r\n            opsign:1  // 1 add 2 update\r\n        },\r\n        rules: {\r\n            yr:[\r\n                { required: true, message: '请选择年份', trigger: 'change' }\r\n            ],\r\n            nm:[\r\n                { required: true, message: '请输入姓名', trigger: 'blur' }\r\n            ],\r\n            mobile:[\r\n                {required: true, validator: checkPhone, trigger: 'blur'}\r\n            ],\r\n            ophone:[\r\n                {validator: validatePhone, trigger: 'blur'}\r\n            ],\r\n            wzpx:[\r\n                {validator:checkwzpx,message:'请输入数字',trigger:'blur'}\r\n            ],\r\n        }\r\n    }\r\n  },\r\n  // 引入过滤方法到此组件\r\n  mixins: [WarmDataConfig],\r\n  mounted(){\r\n           //if(this.info.sign==\"add\"){\r\n           //    this.form.yr=new Date().getFullYear().toString();\r\n           //}\r\n            //人员类型\r\n            this.Get_WrpFieldinfo('HHPDI_Duty_Plan','TYPE',data => {\r\n                this.dutytypes = data;\r\n                if(this.info.sign==\"update\"){\r\n                    this.form.yr=this.info.YR.toString();\r\n                    this.form.nm=this.info.NM;\r\n                    this.form.mobile=this.info.MOBILE;\r\n                    this.form.ophone=this.info.OPHONE;\r\n                    this.form.unit=this.info.UNIT;\r\n                    this.form.position=this.info.POSITION;\r\n                    this.form.dutytype=this.info.DUTYTYPE==null?'':this.info.DUTYTYPE.toString();\r\n                    this.form.wzpx=this.info.WZPX;\r\n                    this.form.id=this.info.ID;\r\n                }\r\n            });\r\n        },\r\n  methods:{\r\n      submitForm(formName) {\r\n        this.$refs[formName].validate((valid) => {\r\n          if (valid) {\r\n            if(this.info.sign==\"add\"){\r\n                this.form.opsign=1;\r\n            }else{\r\n                this.form.opsign=2;\r\n            }\r\n            let url='/alarm/editdutyinfo';\r\n          let success;\r\n          if(this.info.sign==\"add\"){\r\n              success='新增值班通讯录成功！';\r\n          }else{\r\n              success='修改值班通讯录成功！';\r\n          }\r\n          this.axios.post(url,this.form).then((res)=>{\r\n            if(res.data==\"ok\"){\r\n                this.$message({message:success,type:'success'});\r\n                this.$emit('closedailog');\r\n                if(this.info.sign==\"add\"){\r\n                    this.$refs['form'].resetFields();\r\n                }\r\n            }                   \r\n        });\r\n          } else {\r\n            return false;\r\n          }\r\n        });\r\n      },\r\n      resetForm(formName) {\r\n        this.$refs[formName].resetFields();\r\n      }\r\n  },\r\n}\r\n</script>"]}]}