(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c506"],{f369:function(t,a,e){"use strict";e.r(a);var l=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("Content",{style:{padding:"24px",background:"#fff"}},[e("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",gutter:16,justify:"start"}},[e("Col",[t._v("\n                时间:\n                "),e("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"month",placeholder:"选择日期",format:"yyyy 年 MM 月","value-format":"yyyy-MM",size:"small",clearable:!1},on:{change:t.timechange},model:{value:t.form.date,callback:function(a){t.$set(t.form,"date",a)},expression:"form.date"}})],1),e("Col",[t._v("\n                行政区划:\n                "),e("el-cascader",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:"请选择地址",options:t.form.adressList,"change-on-select":""},on:{change:t.XZQHsearch},model:{value:t.form.model_adress,callback:function(a){t.$set(t.form,"model_adress",a)},expression:"form.model_adress"}})],1),e("Col",[t._v("\n                渠道:\n                "),e("el-cascader",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:"请选择渠道",options:t.form.qudaoList,"change-on-select":""},on:{change:t.QDsearch},model:{value:t.form.model_qudao,callback:function(a){t.$set(t.form,"model_qudao",a)},expression:"form.model_qudao"}})],1),e("Col",[t._v("\n                站点类型:\n                "),e("Select",{staticStyle:{width:"120px","margin-left":"5px"},attrs:{clearable:""},on:{"on-change":t.TYPEsearch},model:{value:t.form.zdlx,callback:function(a){t.$set(t.form,"zdlx",a)},expression:"form.zdlx"}},t._l(t.zdlxlist,function(a){return e("Option",{key:a.value,attrs:{value:a.value}},[t._v(t._s(a.label))])}),1)],1),e("Col",{staticClass:"btn_baobiao",staticStyle:{display:"flex","justify-content":"flex-start"}},[e("Input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.form.searchmsg,callback:function(a){t.$set(t.form,"searchmsg",a)},expression:"form.searchmsg"}}),e("Button",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")]),e("Button",{staticStyle:{width:"auto","margin-right":"0px"},attrs:{type:"primary"},on:{click:t.optable}},[t._v("综合报表")])],1)],1),e("Divider"),e("Row",{staticStyle:{"font-size":"16px"}},[e("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("总站数："+t._s(t.Tables.total)+" \n                单位：水深 m，流量 m³/s，水量 m³\n            ")])],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"",height:"480"},on:{"cell-click":t.cellclick,"sort-change":t.sort_change}},[e("el-table-column",{attrs:{label:" ",type:"index",align:"center",width:"65",index:t.indexMethod}}),e("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"MA_UPZ",label:"闸阀上水深",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"MA_DWZ",label:"闸阀下水深",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"MA_Q",label:"平均流量",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"MWQ",label:"月累计流量",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"CTYPE",label:"站点类型",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"Canal_Name",label:"渠道",sortable:"",align:"center"}}),e("el-table-column",{attrs:{prop:"AD_NM",label:"地址",sortable:"",align:"center"}})],1),e("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[e("div",{staticStyle:{float:"right"}})])],1),e("el-dialog",{attrs:{title:"综合报表",visible:t.dialog_detail_showing,width:"1200px","append-to-body":""},on:{"update:visible":function(a){t.dialog_detail_showing=a}}},[e("Row",[e("Col",{staticStyle:{"text-align":"center","font-size":"20px"}},[t._v("\n                "+t._s(this.form.date)+" 闸阀水情月表\n            ")])],1),e("Row",[e("Col",[t._v("总站数:"+t._s(t.Tables.total)+"，单位：水深 m，流量 m³/s，水量 m³")]),e("Col",{staticStyle:{position:"absolute",right:"0",bottom:"0px"}},[e("Button",{staticStyle:{width:"auto","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")])],1)],1),e("Divider"),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.Tables.data,border:"",height:"500"},on:{"sort-change":t.sort_change}},[e("el-table-column",{attrs:{prop:"Canal_Name",label:"渠道",sortable:"",align:"center",width:"130"}}),e("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"",align:"center",width:""}}),e("el-table-column",{attrs:{prop:"MA_UPZ",label:"闸阀上水深",sortable:"",align:"center",width:"140"}}),e("el-table-column",{attrs:{prop:"MA_DWZ",label:"闸阀下水深",sortable:"",align:"center",width:"140"}}),e("el-table-column",{attrs:{prop:"MA_Q",label:"平均流量",sortable:"",align:"center",width:"140"}}),e("el-table-column",{attrs:{prop:"MWQ",label:"月累计流量",sortable:"",align:"center",width:"150"}})],1)],1)],1)},o=[],i=e("f499"),s=e.n(i),r=(e("ac6a"),e("aaf8")),n=e("a53b"),d=(e("3dfd"),{data:function(){return{yujingdata:[],loading:!1,dialog_detail_showing:!1,zdlxlist:[{value:"1",label:"闸门"},{value:"2",label:"阀门"}],form:{adressList:[],qudaoList:[],model_adress:"",zdlx:"",model_qudao:"",date:"",searchmsg:"",field:""},date:"",data:[],xzqhdata:[],xzqh:"",list_input:{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1},Tables:{title:"",total:"",data:[]},searchs:"",search1:"&STNM=like,",search2:"&TM=",search3:"&",search4:"&",search5:"&",timesearch:""}},mixins:[r["a"],n["a"]],mounted:function(){var t=new Date,a=t.getMonth()+1;this.form.date=t.getFullYear()+"-"+a,this.form.YE=t.getFullYear(),this.form.MON=a,this.Reload()},methods:{sort_change:function(t){console.log(t),"ascending"==t.order&&(this.form.field=t.prop,this.Reload()),"descending"==t.order&&(this.form.field=t.prop+" desc",this.Reload()),null==t.order&&(this.form.field="",this.Reload())},optable:function(){this.dialog_detail_showing=!0},cellclick:function(t,a,e,l){var o=new Object;o.graphic=new Object,this.yujingdata.forEach(function(a){a.rowinfo.STCD===t.STCD&&(t.YUJING_EZ=a.rowinfo.YUJING_EZ,t.YUJING_JYEZ=a.rowinfo.YUJING_JYEZ,t.YUJING_JYQ=a.rowinfo.YUJING_JYQ,t.YUJING_JYSZ=a.rowinfo.YUJING_JYSZ,t.YUJING_Q=a.rowinfo.YUJING_Q,t.YUJING_SZ=a.rowinfo.YUJING_SZ)}),o.graphic.attributes=t,o.graphic.attributes.itype="zhafashuiqing",o.graphic.attributes.rowinfo=JSON.parse(s()(t)),o.graphic.attributes.STNM=o.graphic.attributes.STNM,o.graphic.attributes.STCD=o.graphic.attributes.STCD,o.graphic.attributes.rowinfo.STNM=o.graphic.attributes.rowinfo.STNM,o.graphic.attributes.rowinfo.STCD=o.graphic.attributes.rowinfo.STCD,o.graphic.attributes.rowinfo.tableType={zfsq:"monthTable"};var i=new Object;i.itype="zhafashuiqing",console.log("evt",o),this.$App.showDrawer(o,i)},err:function(){this.$Message.warning("该功能还在开发中...")},indexMethod:function(t){return t+1+this.list_input.pagesize*(this.list_input.current-1)},search:function(){""!=this.form.searchmsg?this.searchs="&STNM="+this.form.searchmsg:this.searchs="",this.Reload()},timechange:function(){console.log(this.form.date),this.form.YE=this.form.date.substring(0,4),this.form.MON=this.form.date.substring(6,7),this.Reload()},XZQHsearch:function(){console.log(this.form.model_adress),this.Reload()},QDsearch:function(){console.log(this.form.model_qudao),this.Reload()},TYPEsearch:function(){console.log(this.form.zdlx),void 0===this.form.zdlx?this.form.zdlx="":this.form.zdlx=this.form.zdlx,this.Reload()},Reload:function(){var t=this;if(this.loading=!0,0==this.form.model_adress.length&&(this.form.xzqh=""),1==this.form.model_adress.length){var a=this.form.model_adress[0];a=a.substring(0,6),this.form.xzqh=a}if(2==this.form.model_adress.length){var e=this.form.model_adress[1];e=e.substring(0,9),this.form.xzqh=e}if(3==this.form.model_adress.length){var l=this.form.model_adress[2];l=l.substring(0,12),this.form.xzqh=l}0==this.form.model_qudao.length&&(this.form.qd=""),1==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[0]),2==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[1]),this.axios.get("/guanqu/zhafashuiqing/lishi_yuebiao?"+this.searchs,{params:{YR:this.form.YE,MON:this.form.MON,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,CTYPE:this.form.zdlx}}).then(function(a){console.log(a),t.loading=!1,t.data=a.data.list,t.list_input.total=a.data.total,t.Tables.title=t.data[0].YE+"-"+t.data[0].MON;for(var e=0;e<t.data.length;e++)t.data[e].MA_UPZ=t.Z_Filter(t.data[e].MA_UPZ),t.data[e].MA_DWZ=t.Z_Filter(t.data[e].MA_DWZ),t.data[e].MWQ=t.Z_Filter(t.data[e].MWQ,3),t.data[e].MA_Q=t.Z_Filter(t.data[e].MA_Q,3),"1"==t.data[e].ctype&&(t.data[e].ctype="闸门"),"2"==t.data[e].ctype&&(t.data[e].ctype="阀门")}),this.axios.get("/guanqu/zhafashuiqing/lishi_yuebiao?"+this.searchs,{params:{YR:this.form.YE,MON:this.form.MON,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,CTYPE:this.form.zdlx}}).then(function(a){console.log(a),t.loading=!1,t.Tables.data=a.data.list,t.Tables.total=a.data.total;for(var e=0;e<t.Tables.data.length;e++)t.Tables.data[e].MA_UPZ=t.Z_Filter(t.Tables.data[e].MA_UPZ),t.Tables.data[e].MA_DWZ=t.Z_Filter(t.Tables.data[e].MA_DWZ),t.Tables.data[e].MWQ=t.Z_Filter(t.Tables.data[e].MWQ,3),t.Tables.data[e].MA_Q=t.Z_Filter(t.Tables.data[e].MA_Q,3);console.log(t.Tables.data)}),this.getTableData_WRP_AD_B(function(a){t.form.adressList=a}),this.getTableData_WRP_IrrBTCanalSystem(function(a){t.form.qudaoList=a}),this.axios.get("/guanqu/zhafashuiqing/gis").then(function(a){console.log("++++++++++++",a),t.yujingdata=a.data.features})},CurrentChange:function(t){this.list_input.current=t,this.data[0].ID=t*this.list_input.pagesize,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()}},components:{},created:function(){console.dir("showDrawer",this.$showDrawer)}}),h=d,c=e("2877"),m=Object(c["a"])(h,l,o,!1,null,null,null);a["default"]=m.exports}}]);