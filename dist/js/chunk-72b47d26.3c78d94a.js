(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-72b47d26"],{"33d1":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumb",{style:{margin:"0 0 24px 0"}},[a("BreadcrumbItem",[t._v("信息服务")]),a("BreadcrumbItem",[t._v("水情信息")]),a("BreadcrumbItem",[t._v("河道水情")])],1),a("Tabs",{attrs:{value:"hdhour"}},[a("TabPane",{attrs:{label:"小时表",name:"hdhour"}},[a("Tablehour")],1),a("TabPane",{attrs:{label:"日表",name:"hdday"}},[a("Tableday")],1),a("TabPane",{attrs:{label:"月表",name:"hdmonth"}},[a("Tablemonth")],1),a("TabPane",{attrs:{label:"历史表",name:"hdhistory"}},[a("Tablehistory")],1)],1)],1)},l=[],o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Content",{style:{padding:"24px",background:"#fff"}},[a("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",gutter:16,justify:"start"}},[a("Col",[t._v("\n                        时间:\n                        "),a("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,size:"small",width:"200"},on:{change:t.timechange},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("Col",[t._v("\n                            行政区划:\n                            "),a("el-cascader",{attrs:{clearable:"",size:"small",placeholder:"请选择地址",options:t.form.adressList,"change-on-select":""},on:{change:t.XZQHsearch},model:{value:t.form.model_adress,callback:function(e){t.$set(t.form,"model_adress",e)},expression:"form.model_adress"}})],1),a("Col",[t._v("\n                            渠道:\n                            "),a("el-cascader",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:"请选择渠道",options:t.form.qudaoList,"change-on-select":""},on:{change:t.QDsearch},model:{value:t.form.model_qudao,callback:function(e){t.$set(t.form,"model_qudao",e)},expression:"form.model_qudao"}})],1),a("Col",{staticStyle:{"margin-top":"10px"}},[t._v("\n                            归属单位:\n                            "),a("Select",{staticStyle:{width:"120px","margin-left":"5px"},attrs:{clearable:""},on:{"on-change":t.STGRsearch},model:{value:t.form.gsdw,callback:function(e){t.$set(t.form,"gsdw",e)},expression:"form.gsdw"}},t._l(t.gsdwlist,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("Col",{staticClass:"btn_baobiao",staticStyle:{display:"flex","justify-content":"flex-start"}},[a("Input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.form.searchmsg,callback:function(e){t.$set(t.form,"searchmsg",e)},expression:"form.searchmsg"}}),a("Button",{staticStyle:{width:"auto"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")])],1)],1),a("Divider"),a("Row",{staticStyle:{"font-size":"16px"}},[a("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("总站数："+t._s(t.cols1.length)+" \n                      单位：水位 m，流量 m³/s，累计流量 10⁶m³")])],1),a("div",{style:"width:"+t.wwww},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"",height:"480"},on:{"cell-click":t.cellclick}},[a("el-table-column",{attrs:{label:"站点",align:"center"}},[a("el-table-column",{attrs:{label:"警戒水位",align:"center"}},[a("el-table-column",{attrs:{fixed:"",label:"时间",align:"center",prop:"DT"}})],1)],1),t._l(t.cols1,function(e,s){return a("el-table-column",{key:s,attrs:{label:e.STNM,align:"center",width:""}},[a("el-table-column",{attrs:{label:t.Float_Filter(e.AWL),align:"center"}},[a("el-table-column",{attrs:{prop:e.STNM+"平均水位",label:"平均水位",align:"center"}}),a("el-table-column",{attrs:{prop:e.STNM+"水势",label:"水势",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:"↑"==e.row[e.column.property]?"red":"↓"==e.row[e.column.property]?"blue":"black"}},[t._v(t._s(e.row[e.column.property]))])]}}],null,!0)}),a("el-table-column",{attrs:{prop:e.STNM+"平均流量",label:"平均流量",align:"center"}}),a("el-table-column",{attrs:{prop:e.STNM+"小时流量",label:"小时流量",align:"center"}})],1)],1)})],2)],1),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}})])],1)],1)},i=[],r=a("f499"),n=a.n(r),c=(a("ac6a"),a("a481"),a("aaf8")),d=a("a53b"),h=(a("3dfd"),{data:function(){return{wwww:"1900px",gsdwlist:[{value:"1",label:"国家重要站"},{value:"2",label:"省级重要站"},{value:"3",label:"一般站"},{value:"4",label:"实验或专用站"},{value:"5",label:"山洪站"},{value:"6",label:"临时站"},{value:"7",label:"其他站"},{value:"8",label:"灌区站"}],form:{adressList:[],qudaoList:[],model_adress:"",gsdw:"",model_qudao:"",date:[],searchmsg:"",xzqh:"",qd:"",field:""},cols1:[],date:"",STinfo:{},xzqhdata:[],xzqh:"",loading:!1,list_input:{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1},data:[],searchs:"",timesearch:"",pickerOptions2:{shortcuts:[{text:"最近一周",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-6048e5),t.$emit("pick",[a,e])}},{text:"最近一个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-2592e6),t.$emit("pick",[a,e])}},{text:"最近三个月",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-7776e6),t.$emit("pick",[a,e])}}]}}},mixins:[c["a"],d["a"]],mounted:function(){var t=this;this.axios.get("/guanqu/table/qudao_tree?type=4").then(function(e){t.Treedata=t.QuDao_Tree_Filter(e.data).data,t.STinfo.CZMC=t.QuDao_Tree_Filter(e.data).siteinfo.canal_name,console.log(t.QuDao_Tree_Filter(e.data)),t.STinfo.STCD=t.QuDao_Tree_Filter(e.data).siteinfo.canal_code,t.Reload(),console.log("渠道",t.QuDao_Tree_Filter(e.data))});var e=new Date,a=e.getMonth()+1,s=new Array,l=e.getHours(),o=e.getMinutes(),i=e.getSeconds();l<10&&(l="0".concat(l)),o<10&&(o="0".concat(o)),i<10&&(i="0".concat(i)),a<10&&(a="0".concat(a)),s[0]="".concat(e.getFullYear(),"-").concat(a,"-").concat(e.getDate()," 00:00:00"),s[1]="".concat(e.getFullYear(),"-").concat(a,"-").concat(e.getDate()," ").concat(l,":").concat(o,":").concat(i),this.form.date=s,console.log(this.form.date),this.Reload()},methods:{cellclick:function(t,e,a,s){var l=this;console.log(t,e);var o=e.property.replace("平均水位","").replace("水势","").replace("平均流量","").replace("小时流量","");console.log(this.cols1),this.cols1.forEach(function(e,a,s){if(e.STNM==o){var i=e.STCD,r=new Object;r.graphic=new Object,r.graphic.attributes=new Object,r.graphic.attributes.itype="hedaoshuiqing",r.graphic.attributes.rowinfo=JSON.parse(n()(t)),r.graphic.attributes.STNM=o,r.graphic.attributes.STCD=i,r.graphic.attributes.itype={hdsq:"hourTable"},r.graphic.attributes.rowinfo.STNM=o,r.graphic.attributes.rowinfo.STCD=i,r.graphic.attributes.rowinfo.tableType={hdsq:"hourTable"};var c=new Object;c.itype="hedaoshuiqing",console.log("evt",r),l.$App.showDrawer(r,c)}})},timechange:function(){console.log(this.form.date),this.Reload()},XZQHsearch:function(){console.log(this.form.model_adress),this.Reload()},QDsearch:function(){console.log(this.form.model_qudao),this.Reload()},STGRsearch:function(){console.log(this.form.gsdw),this.Reload()},Reload:function(t){var e=this;if(this.loading=!0,0==this.form.model_adress.length&&(this.form.xzqh=""),1==this.form.model_adress.length){var a=this.form.model_adress[0];a=a.substring(0,6),this.form.xzqh=a}if(2==this.form.model_adress.length){var s=this.form.model_adress[1];s=s.substring(0,9),this.form.xzqh=s}if(3==this.form.model_adress.length){var l=this.form.model_adress[2];l=l.substring(0,12),this.form.xzqh=l}0==this.form.model_qudao.length&&(this.form.qd=""),1==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[0]),2==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[1]);var o={Time_min:this.form.date[0],Time_max:this.form.date[1],ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,STGR:this.form.gsdw,STNM:this.searchs};this.axios.get("/guanqu/hedaoshuiqing/lishi_xiaoshibiao?",{params:o}).then(function(t){e.loading=!1,console.log(t),e.cols1=t.data[0].zhandian,e.data=t.data[0].tongji.map(function(t,a){for(var s in t)/平均水位$/.test(s)?t[s]=e.Float_Filter(t[s],2):/水势$/.test(s)?t[s]=t[s]>0?"↑":t[s]<0?"↓":"-":/平均流量$/.test(s)||/小时流量$/.test(s)?t[s]=e.Float_Filter(t[s],3):0===t[s]&&(t[s]="");return t}),e.wwww="1900px",setTimeout(function(){e.wwww="100%"},1e3)}),this.getTableData_WRP_AD_B(function(t){e.form.adressList=t}),this.getTableData_WRP_IrrBTCanalSystem(function(t){e.form.qudaoList=t})},search:function(){""!=this.form.searchmsg?(this.searchs=this.form.searchmsg,this.Reload()):(this.searchs="",this.Reload())},CurrentChange:function(t){this.list_input.current=t,this.data[0].ID=t*this.list_input.pagesize,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()},err:function(){this.$Message.warning("该功能还在开发中...")}},components:{},created:function(){console.dir("showDrawer",this.$showDrawer)}}),u=h,m=(a("e4b5"),a("2877")),g=Object(m["a"])(u,o,i,!1,null,"491f6656",null),f=g.exports,p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Content",{style:{padding:"24px",background:"#fff"}},[a("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",gutter:16,justify:"start"}},[a("Col",[t._v("\n                        时间:\n                            "),a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"date",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日","value-format":"yyyy-MM-dd",size:"small",clearable:!1},on:{change:t.timechange},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("Col",[t._v("\n                            行政区划:\n                            "),a("el-cascader",{attrs:{clearable:"",size:"small",placeholder:"请选择地址",options:t.form.adressList,"change-on-select":""},on:{change:t.XZQHsearch},model:{value:t.form.model_adress,callback:function(e){t.$set(t.form,"model_adress",e)},expression:"form.model_adress"}})],1),a("Col",[t._v("\n                            渠道:\n                            "),a("el-cascader",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:"请选择渠道",options:t.form.qudaoList,"change-on-select":""},on:{change:t.QDsearch},model:{value:t.form.model_qudao,callback:function(e){t.$set(t.form,"model_qudao",e)},expression:"form.model_qudao"}})],1),a("Col",[t._v("\n                            归属单位:\n                            "),a("Select",{staticStyle:{width:"120px","margin-left":"5px"},attrs:{clearable:""},on:{"on-change":t.STGRsearch},model:{value:t.form.gsdw,callback:function(e){t.$set(t.form,"gsdw",e)},expression:"form.gsdw"}},t._l(t.gsdwlist,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("Col",{staticClass:"btn_baobiao",staticStyle:{display:"flex","justify-content":"flex-start"}},[a("Input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.form.searchmsg,callback:function(e){t.$set(t.form,"searchmsg",e)},expression:"form.searchmsg"}}),a("Button",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")]),a("Button",{staticStyle:{width:"auto","margin-right":"0px"},attrs:{type:"primary"},on:{click:t.optable}},[t._v("综合报表")])],1)],1),a("Divider",{staticStyle:{margin:"20px 0"}}),a("Row",{staticStyle:{"font-size":"16px"}},[a("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("总站数："+t._s(t.Tables.total)+" \n                      单位：水位 m，流量 m³/s，累计流量 10⁶m³")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"",height:"450"},on:{"cell-click":t.cellclick,"sort-change":t.sort_change}},[a("el-table-column",{attrs:{label:" ",type:"index",align:"center",width:"65",index:t.indexMethod}}),a("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"RZ",label:"平均水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"CV",label:"水势",sortable:"custom",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:"↑"==e.row.CV?"red":"↓"==e.row.CV?"blue":"black"}},[t._v(t._s(e.row.CV))])]}}])}),a("el-table-column",{attrs:{prop:"INQ",label:"平均流量",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"DW",label:"日流量",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Max_RZ",label:"日最高水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Max_TM",label:"日最高水位时刻",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Min_RZ",label:"日最低水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Min_TM",label:"日最低水位时刻",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"AWL",label:"警戒水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"STGR",label:"归属单位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Canal_Name",label:"渠道",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"AD_NM",label:"地址",sortable:"custom",align:"center"}})],1),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.list_input.total,current:t.list_input.current,"show-sizer":"","page-size":t.list_input.pagesize,"page-size-opts":t.list_input.pagesizeopts,"show-total":"","show-elevator":""},on:{"on-change":t.CurrentChange,"on-page-size-change":t.PagesizeChange}})],1)])],1),a("el-dialog",{attrs:{title:"综合报表",visible:t.dialog_detail_showing,width:"1200px","append-to-body":""},on:{"update:visible":function(e){t.dialog_detail_showing=e}}},[a("Row",[a("Col",{staticStyle:{"text-align":"center","font-size":"20px"}},[t._v("\n                        "+t._s(this.form.date)+" 河道水情日表\n                      ")])],1),a("Row",[a("Col",{staticStyle:{"text-align":"left"}},[t._v("\n                            总站数："+t._s(t.Tables.total)+"，单位：水位 m，流量 m³/s，累计流量 10⁶m³\n                      ")]),a("Col",{staticStyle:{position:"absolute",right:"0",bottom:"0px"}},[a("Button",{staticStyle:{width:"auto","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")])],1)],1),a("Divider"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.Tables.data,border:"",height:"500"},on:{"sort-change":t.sort_change}},[a("el-table-column",{attrs:{prop:"Canal_Name",label:"渠道",sortable:"custom",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"custom",align:"center",width:""}}),a("el-table-column",{attrs:{prop:"INQ",label:"平均流量",sortable:"custom",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"DW",label:"日流量",sortable:"custom",align:"center",width:"140"}})],1)],1)],1)},b=[],_=a("bd86"),x={data:function(){var t;return t={loading:!1,dialog_detail_showing:!1,gsdwlist:[{value:"1",label:"国家重要站"},{value:"2",label:"省级重要站"},{value:"3",label:"一般站"},{value:"4",label:"实验或专用站"},{value:"5",label:"山洪站"},{value:"6",label:"临时站"},{value:"7",label:"其他站"},{value:"8",label:"灌区站"}],Tables:{title:"",total:"",data:[]},form:{adressList:[],qudaoList:[],model_adress:"",zdlx:"",model_qudao:"",date:"",searchmsg:"",xzqh:"",qd:"",field:""}},Object(_["a"])(t,"Tables",{title:"",total:"",data:[]}),Object(_["a"])(t,"searchs",""),Object(_["a"])(t,"search1","&STNM=like,"),Object(_["a"])(t,"search2","&TM="),Object(_["a"])(t,"search3","&"),Object(_["a"])(t,"search4","&"),Object(_["a"])(t,"search5","&"),Object(_["a"])(t,"timesearch",""),Object(_["a"])(t,"data",[]),Object(_["a"])(t,"nodata",[]),Object(_["a"])(t,"list_input",{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1}),t},mounted:function(){var t=new Date,e=t.getMonth()+1;this.form.date=t.getFullYear()+"-"+e+"-"+t.getDate(),this.Reload()},mixins:[c["a"],d["a"]],methods:{sort_change:function(t){console.log(t),"ascending"==t.order&&(this.form.field=t.prop,this.Reload()),"descending"==t.order&&(this.form.field=t.prop+" desc",this.Reload()),null==t.order&&(this.form.field="",this.Reload())},optable:function(){this.dialog_detail_showing=!0},cellclick:function(t,e,a,s){var l=new Object;l.graphic=new Object,l.graphic.attributes=t,l.graphic.attributes.itype="hedaoshuiqing",l.graphic.attributes.rowinfo=JSON.parse(n()(t)),l.graphic.attributes.rowinfo.tableType={hdsq:"dayTable"};var o=new Object;o.itype="hedaoshuiqing",console.log("evt",l),this.$App.showDrawer(l,o)},err:function(){this.$Message.warning("该功能还在开发中...")},timechange:function(t){console.log(t),this.form.date=t,this.Reload()},indexMethod:function(t){return t+1+this.list_input.pagesize*(this.list_input.current-1)},search:function(){""!=this.form.searchmsg?this.searchs=this.form.searchmsg:this.searchs="",this.Reload()},XZQHsearch:function(){console.log(this.form.model_adress),this.Reload()},QDsearch:function(){console.log(this.form.model_qudao),this.Reload()},TYPEsearch:function(){console.log(this.form.zdlx),this.Reload()},Reload:function(){var t=this;if(this.loading=!0,0==this.form.model_adress.length&&(this.form.xzqh=""),1==this.form.model_adress.length){var e=this.form.model_adress[0];e=e.substring(0,6),this.form.xzqh=e}if(2==this.form.model_adress.length){var a=this.form.model_adress[1];a=a.substring(0,9),this.form.xzqh=a}if(3==this.form.model_adress.length){var s=this.form.model_adress[2];s=s.substring(0,12),this.form.xzqh=s}0==this.form.model_qudao.length&&(this.form.qd=""),1==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[0]),2==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[1]),this.axios.get("/guanqu/hedaoshuiqing/lishi_ribiao?_page_size="+this.list_input.pagesize+"&_page="+this.list_input.current,{params:{TM:this.form.date,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,STGR:this.form.zdlx,_orderby:this.form.field,STNM:this.searchs}}).then(function(e){console.log(e),t.loading=!1,t.data=e.data.list,t.list_input.total=e.data.total,t.Tables.total=e.data.total,t.Tables.title=t.data[0].TM;for(var a=0;a<t.data.length;a++)t.data[a].MA_UPZ=t.Z_Filter(t.data[a].MA_UPZ),t.data[a].Max_RZ=t.Z_Filter(t.data[a].Max_RZ),t.data[a].Min_RZ=t.Z_Filter(t.data[a].Min_RZ),t.data[a].AWL=t.Z_Filter(t.data[a].AWL),t.data[a].RZ=t.Z_Filter(t.data[a].RZ),t.data[a].MA_DWZ=t.Z_Filter(t.data[a].MA_DWZ),t.data[a].MWQ=t.Z_Filter(t.data[a].MWQ,3),t.data[a].MA_Q=t.Z_Filter(t.data[a].MA_Q,3),"1"==t.data[a].CTYPE&&(t.data[a].CTYPE="闸门"),"2"==t.data[a].CTYPE&&(t.data[a].CTYPE="阀门"),t.data[a].CV=t.data[a].CV>0?"↑":t.data[a].CV<0?"↓":0==t.data[a].CV?"-":" "}),this.getTableData_WRP_AD_B(function(e){t.form.adressList=e}),this.getTableData_WRP_IrrBTCanalSystem(function(e){t.form.qudaoList=e}),this.axios.get("/guanqu/hedaoshuiqing/lishi_ribiao?_page_size="+this.list_input.pagesize+"&_page="+this.list_input.current+this.searchs,{params:{TM:this.form.date,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,_orderby:this.form.field}}).then(function(e){console.log(e),t.loading=!1,t.Tables.data=e.data.list;for(var a=0;a<t.Tables.data.length;a++)t.Tables.data[a].MA_UPZ=t.Z_Filter(t.Tables.data[a].MA_UPZ),t.Tables.data[a].MA_DWZ=t.Z_Filter(t.Tables.data[a].MA_DWZ),t.Tables.data[a].MWQ=t.Z_Filter(t.Tables.data[a].MWQ,3),t.Tables.data[a].MA_Q=t.Z_Filter(t.Tables.data[a].MA_Q,3)})},CurrentChange:function(t){this.list_input.current=t,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()}}},v=x,w=Object(m["a"])(v,p,b,!1,null,null,null),y=w.exports,T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Content",{style:{padding:"24px",background:"#fff"}},[a("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",gutter:16,justify:"start"}},[a("Col",[t._v("\n                    时间:\n                        "),a("el-date-picker",{staticStyle:{width:"180px"},attrs:{type:"month",placeholder:"选择日期",format:"yyyy 年 MM 月","value-format":"yyyy-MM",size:"small",clearable:!1},on:{change:t.timechange},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("Col",[t._v("\n                        行政区划:\n                        "),a("el-cascader",{attrs:{clearable:"",size:"small",placeholder:"请选择地址",options:t.form.adressList,"change-on-select":""},on:{change:t.XZQHsearch},model:{value:t.form.model_adress,callback:function(e){t.$set(t.form,"model_adress",e)},expression:"form.model_adress"}})],1),a("Col",[t._v("\n                        渠道:\n                        "),a("el-cascader",{staticStyle:{width:"180px"},attrs:{clearable:"",size:"small",placeholder:"请选择渠道",options:t.form.qudaoList,"change-on-select":""},on:{change:t.QDsearch},model:{value:t.form.model_qudao,callback:function(e){t.$set(t.form,"model_qudao",e)},expression:"form.model_qudao"}})],1),a("Col",[t._v("\n                        归属单位:\n                        "),a("Select",{staticStyle:{width:"120px","margin-left":"5px"},attrs:{clearable:""},on:{"on-change":t.STGRsearch},model:{value:t.form.gsdw,callback:function(e){t.$set(t.form,"gsdw",e)},expression:"form.gsdw"}},t._l(t.gsdwlist,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("Col",{staticClass:"btn_baobiao",staticStyle:{display:"flex","justify-content":"flex-start"}},[a("Input",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.form.searchmsg,callback:function(e){t.$set(t.form,"searchmsg",e)},expression:"form.searchmsg"}}),a("Button",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")]),a("Button",{staticStyle:{width:"auto","margin-right":"0px"},attrs:{type:"primary"},on:{click:t.optable}},[t._v("综合报表")])],1)],1),a("Divider"),a("Row",{staticStyle:{"font-size":"16px"}},[a("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("总站数："+t._s(t.Tables.total)+" \n                  单位：水位 m，流量 m³/s，累计流量 10⁶m³")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"",height:"480"},on:{"cell-click":t.cellclick,"sort-change":t.sort_change}},[a("el-table-column",{attrs:{label:" ",type:"index",align:"center",width:"65",index:t.indexMethod}}),a("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"RZ",label:"平均水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"CV",label:"水势",sortable:"custom",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{style:{color:"↑"==e.row.CV?"red":"↓"==e.row.CV?"blue":"black"}},[t._v(t._s(e.row.CV))])]}}])}),a("el-table-column",{attrs:{prop:"INQ",label:"平均流量",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"MW",label:"月流量",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Max_RZ",label:"月最高水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Max_TM",label:"月最高水位时刻",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Min_RZ",label:"月最低水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Min_TM",label:"月最低水位时刻",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"AWL",label:"警戒水位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"STGR",label:"归属单位",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"Canal_Name",label:"渠道",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{prop:"AD_NM",label:"地址",sortable:"custom",align:"center"}})],1),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.list_input.total,current:t.list_input.current,"show-sizer":"","page-size":t.list_input.pagesize,"page-size-opts":t.list_input.pagesizeopts,"show-total":"","show-elevator":""},on:{"on-change":t.CurrentChange,"on-page-size-change":t.PagesizeChange}})],1)])],1),a("el-dialog",{attrs:{title:"综合报表",visible:t.dialog_detail_showing,width:"1200px","append-to-body":""},on:{"update:visible":function(e){t.dialog_detail_showing=e}}},[a("Row",[a("Col",{staticStyle:{"text-align":"center","font-size":"20px"}},[t._v("\n                    "+t._s(this.form.date)+" 河道水情月表\n                  ")])],1),a("Row",[a("Col",[t._v("\n                      总站数："+t._s(t.Tables.total)+"，单位水位 m，流量 m³/s，累计流量 10⁶m³\n                  ")]),a("Col",{staticStyle:{position:"absolute",right:"0",bottom:"0px"}},[a("Button",{staticStyle:{width:"auto","margin-right":"20px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")])],1)],1),a("Divider"),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.Tables.data,border:"",height:"500"},on:{"sort-change":t.sort_change}},[a("el-table-column",{attrs:{prop:"Canal_Name",label:"渠道",sortable:"custom",align:"center",width:"200"}}),a("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"custom",align:"center",width:""}}),a("el-table-column",{attrs:{prop:"RZ",label:"平均水位",sortable:"custom",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"INQ",label:"平均流量",sortable:"custom",align:"center",width:"140"}}),a("el-table-column",{attrs:{prop:"MW",label:"月流量",sortable:"custom",align:"center",width:"150"}})],1)],1)],1)},C=[],S={data:function(){return{loading:!1,dialog_detail_showing:!1,gsdwlist:[{value:"1",label:"国家重要站"},{value:"2",label:"省级重要站"},{value:"3",label:"一般站"},{value:"4",label:"实验或专用站"},{value:"5",label:"山洪站"},{value:"6",label:"临时站"},{value:"7",label:"其他站"},{value:"8",label:"灌区站"}],form:{adressList:[],qudaoList:[],model_adress:"",zdlx:"",model_qudao:"",date:"",searchmsg:"",field:""},date:"",data:[],xzqhdata:[],xzqh:"",list_input:{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1},Tables:{title:"",total:"",data:[]},searchs:"",search1:"&STNM=",search2:"&TM=",search3:"&",search4:"&",search5:"&",timesearch:""}},mixins:[c["a"],d["a"]],mounted:function(){var t=new Date,e=t.getMonth()+1;this.form.date=t.getFullYear()+"-"+e,this.form.YE=t.getFullYear(),this.form.MON=e,this.Reload()},methods:{sort_change:function(t){console.log(t),"ascending"==t.order&&(this.form.field=t.prop,this.Reload()),"descending"==t.order&&(this.form.field=t.prop+" desc",this.Reload()),null==t.order&&(this.form.field="",this.Reload())},optable:function(){this.dialog_detail_showing=!0},cellclick:function(t,e,a,s){var l=new Object;l.graphic=new Object,l.graphic.attributes=t,l.graphic.attributes.itype="hedaoshuiqing",l.graphic.attributes.rowinfo=JSON.parse(n()(t)),l.graphic.attributes.rowinfo.tableType={hdsq:"monthTable"};var o=new Object;o.itype="hedaoshuiqing",console.log("evt",l),this.$App.showDrawer(l,o)},err:function(){this.$Message.warning("该功能还在开发中...")},indexMethod:function(t){return t+1+this.list_input.pagesize*(this.list_input.current-1)},search:function(){""!=this.form.searchmsg?this.searchs="&STNM="+this.form.searchmsg:this.searchs="",this.Reload()},timechange:function(){console.log(this.form.date),this.form.YE=this.form.date.substring(0,4),this.form.MON=this.form.date.substring(6,7),this.Reload()},XZQHsearch:function(){console.log(this.form.model_adress),this.Reload()},QDsearch:function(){console.log(this.form.model_qudao),this.Reload()},TYPEsearch:function(){console.log(this.form.zdlx),this.Reload()},Reload:function(){var t=this;if(this.loading=!0,this.loading=!1,0==this.form.model_adress.length&&(this.form.xzqh=""),1==this.form.model_adress.length){var e=this.form.model_adress[0];e=e.substring(0,6),this.form.xzqh=e}if(2==this.form.model_adress.length){var a=this.form.model_adress[1];a=a.substring(0,9),this.form.xzqh=a}if(3==this.form.model_adress.length){var s=this.form.model_adress[2];s=s.substring(0,12),this.form.xzqh=s}0==this.form.model_qudao.length&&(this.form.qd=""),1==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[0]),2==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[1]),this.axios.get("/guanqu/hedaoshuiqing/lishi_yuebiao?_page_size="+this.list_input.pagesize+"&_page="+this.list_input.current+this.searchs,{params:{YR:this.form.YE,MON:this.form.MON,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,CTYPE:"",STGR:this.form.zdlx,_orderby:""}}).then(function(e){console.log(e),t.loading=!1,t.data=e.data.list,t.list_input.total=e.data.total,t.Tables.title=t.data[0].YE+"-"+t.data[0].MON;for(var a=0;a<t.data.length;a++)t.data[a].RZ=t.Z_Filter(t.data[a].RZ),t.data[a].AWL=t.Z_Filter(t.data[a].AWL),t.data[a].Max_RZ=t.Z_Filter(t.data[a].Max_RZ),t.data[a].Min_RZ=t.Z_Filter(t.data[a].Min_RZ),t.data[a].MWQ=t.Z_Filter(t.data[a].MWQ,3),t.data[a].MA_Q=t.Z_Filter(t.data[a].MA_Q,3),"1"==t.data[a].CTYPE&&(t.data[a].CTYPE="闸门"),"2"==t.data[a].CTYPE&&(t.data[a].CTYPE="阀门"),t.data[a].CV=t.data[a].CV>0?"↑":t.data[a].CV<0?"↓":0==t.data[a].CV?"-":" "}),this.axios.get("/guanqu/hedaoshuiqing/lishi_yuebiao?_page_size="+this.list_input.pagesize+"&_page="+this.list_input.current+this.searchs,{params:{YR:this.form.YE,MON:this.form.MON,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,CTYPE:"",STGR:this.form.zdlx,_orderby:""}}).then(function(e){console.log(e),t.loading=!1,t.Tables.data=e.data.list;for(var a=0;a<t.Tables.data.length;a++)t.Tables.data[a].RZ=t.Z_Filter(t.Tables.data[a].RZ),t.Tables.data[a].MA_DWZ=t.Z_Filter(t.Tables.data[a].MA_DWZ),t.Tables.data[a].MWQ=t.Z_Filter(t.Tables.data[a].MWQ,3),t.Tables.data[a].MA_Q=t.Z_Filter(t.Tables.data[a].MA_Q,3)}),this.axios.get("/guanqu/table/ST_RSVR_R1").then(function(e){t.Tables.total=e.data.total}),this.getTableData_WRP_AD_B(function(e){t.form.adressList=e}),this.getTableData_WRP_IrrBTCanalSystem(function(e){t.form.qudaoList=e})},CurrentChange:function(t){this.list_input.current=t,this.data[0].ID=t*this.list_input.pagesize,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()}},components:{},created:function(){console.dir("showDrawer",this.$showDrawer)}},q=S,z=Object(m["a"])(q,T,C,!1,null,null,null),M=z.exports,R=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Content",{style:{padding:"24px",background:"#fff"}},[a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{span:t.span1}},[a("Row",{staticStyle:{margin:"10px","line-height":"32px"},attrs:{gutter:16,type:"flex",justify:"start",z:""}},[a("Col",[t._v("\n                        时间:\n                        "),a("el-date-picker",{staticStyle:{width:"340px"},attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期",align:"right","value-format":"yyyy-MM-dd HH:mm:ss",clearable:!1,size:"small",width:"200"},on:{change:t.timechange},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("Col",[a("Button",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.cellclick}},[t._v("站点详情\n                        ")])],1),a("Col",[a("Button",{staticStyle:{width:"auto","margin-right":"20px","margin-left":"10px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出\n                        ")])],1)],1),a("div",{staticClass:"switch",on:{click:t.Menu_toggle}},[t.Menu.show_Controller?a("i",{staticClass:"el-icon-d-arrow-left"}):t._e(),t.Menu.show_Controller?t._e():a("i",{staticClass:"el-icon-d-arrow-right"})]),a("Divider"),a("Row",[a("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("站名："+t._s(t.CZMC)+"，\n                        水位：m，累计流量 m³/s\n                    ")])],1),a("Row",{staticStyle:{display:"flex"},attrs:{gutter:24}},[a("Col",{staticStyle:{width:"600px"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"600px"},attrs:{data:t.data1,border:"",height:"500"},on:{"sort-change":t.sort_change}},[a("el-table-column",{attrs:{label:" ",type:"index",align:"center",width:"60",index:t.indexMethod}}),a("el-table-column",{attrs:{prop:"tm",label:"时间",sortable:"custom",align:"center"}}),a("el-table-column",{attrs:{label:"水位",sortable:"custom",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("span",{style:{color:e.row.Z>e.row.AWL?"red":"black"}},[t._v("\n                              "+t._s(e.row.Z)+"\n                          ")])])]}}])}),a("el-table-column",{attrs:{prop:"Q",label:"流量",sortable:"custom",align:"center"}})],1),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.list_input.total,current:t.list_input.current,"show-sizer":"","page-size":t.list_input.pagesize,"page-size-opts":t.list_input.pagesizeopts,size:"small","show-total":"","show-elevator":""},on:{"on-change":t.CurrentChange,"on-page-size-change":t.PagesizeChange}})],1)])],1),a("Col",{attrs:{span:"12"}},[a("div",{ref:"achart",staticStyle:{width:"100%",height:"400px","margin-top":"1%","margin-bottom":"50px"}})])],1)],1),a("transition",{attrs:{name:"el-fade-in-linear"}},[a("Col",{directives:[{name:"show",rawName:"v-show",value:t.show1,expression:"show1"}],attrs:{span:t.span2}},[a("Row",{staticStyle:{"margin-top":"10px","line-height":"32px"}},[a("Col",[a("Input",{staticStyle:{width:"auto","margin-right":"20px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.searchmsg,callback:function(e){t.searchmsg=e},expression:"searchmsg"}})],1)],1),a("Row",{staticStyle:{"margin-top":"30px","margin-left":"20px"}},[a("Col",{staticStyle:{"max-height":"600px","overflow-y":"auto"}},[a("Button",{attrs:{shape:"circle"},on:{click:t.changeTree}},[t._v("切换树形图")]),t.xingzhengquhua?a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.Treedata2,"filter-node-method":t.filterNode},on:{"node-click":t.xingzheng_tree}}):t._e(),t.qudao?a("el-tree",{ref:"tree",staticClass:"filter-tree",attrs:{data:t.Treedata,"filter-node-method":t.filterNode},on:{"node-click":t.qudao_tree}}):t._e()],1)],1)],1)],1)],1)],1)],1)},D=[],Z=(a("6b54"),a("28a5"),a("e814")),k=a.n(Z),A={data:function(){return{loading:!1,qudao:!0,xingzhengquhua:!1,show1:!0,Menu:{show_Controller:!1},span1:"19",span2:"5",Treedata:[{title:"xxx灌区",expand:!0,children:[{title:"xxx渠道",expand:!0,children:[{title:"站点A"},{title:"站点B"}]},{title:"xxx渠道",children:[{title:"站点C"}]},{title:"xxx渠道",children:[{title:"站点D"}]}]}],Treedata2:[],GD:"",data1:[],data2:[],changebtn:"切换线形图",date:"",STinfo:{},searchs:"",timesearch:"",CZMC:"",A_AWL:"",echarts:{TM:[],Q:[],UPZ:[],DWZ:[]},form:{searchmsg:"",date:"",field:""},searchmsg:"",MaxY1:0,MaxY2:0,MinY1:0,MinY2:0,list_input:{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1}}},mixins:[c["a"],d["a"]],mounted:function(){var t=this,e=new Date,a=e.getMonth()+1,s=new Array,l=e.getHours(),o=e.getMinutes(),i=e.getSeconds();l<10&&(l="0".concat(l)),o<10&&(o="0".concat(o)),i<10&&(i="0".concat(i)),a<10&&(a="0".concat(a)),s[0]="".concat(e.getFullYear(),"-").concat(a,"-").concat(e.getDate()," 00:00:00"),s[1]="".concat(e.getFullYear(),"-").concat(a,"-").concat(e.getDate()," ").concat(l,":").concat(o,":").concat(i),this.form.date=s,console.log(this.form.date),this.axios.get("/guanqu/table/xingzhen_tree?type=3").then(function(e){console.log(e),t.Treedata2=t.XingZheng_Tree_Filter("650000000000",e.data).data}),this.axios.get("/guanqu/table/qudao_tree?type=3").then(function(e){t.Treedata=t.QuDao_Tree_Filter(e.data).data,t.CZMC=t.QuDao_Tree_Filter(e.data).siteinfo.canal_name,t.STinfo.STNM=t.QuDao_Tree_Filter(e.data).siteinfo.canal_name,t.STinfo.STCD=t.QuDao_Tree_Filter(e.data).siteinfo.canal_code,t.searchs=t.QuDao_Tree_Filter(e.data).siteinfo.canal_code,t.Reload(),console.log("渠道",t.QuDao_Tree_Filter(e.data))})},methods:{sort_change:function(t){console.log(t),"ascending"==t.order&&(this.form.field=t.prop,this.Reload()),"descending"==t.order&&(this.form.field=t.prop+" desc",this.Reload()),null==t.order&&(this.form.field="",this.Reload())},Menu_toggle:function(){this.Menu.show_Controller=!this.Menu.show_Controller,this.show1=!this.show1,1==this.show1?(this.span1="19",this.span2="5",this.data2={},this.Reload()):(this.span1="24",this.span2="0",this.data2={},this.Reload())},test1:function(t){if(this.Menu.show_Controller=!t,t){if("24"==this.span1)return this.span2="0",void this.asyncExecute();this.span1="19",this.span2="5",this.data2={},this.asyncExecute()}else{if("24"==this.span1)return this.span2="0",void this.asyncExecute();this.span1="19",this.span2="5",this.data2={},this.asyncExecute()}},asyncExecute:function(){setTimeout(this.Reload,100)},qudao_tree:function(t){console.log(t),0==t.bj&&(this.searchs=t.canal_code,this.STinfo=t,this.CZMC=t.label.replace("【站点】",""),this.Reload())},xingzheng_tree:function(t){console.log(t),0==t.bj&&(this.searchs=t.ad_cd,this.STinfo=t,this.CZMC=t[0].title.replace("【站点】",""),this.Reload())},filterNode:function(t,e,a){return this.filterTreeData.push(a),!t||-1!==e.label.indexOf(t)},search:function(){var t=this;this.filterTreeData=[],this.$refs.tree.filter(this.searchmsg),""!=this.searchmsg?(this.filterTreeData.some(function(e,a){return e.visible&&"0"==e.data.bj&&e.data.canal_code?(console.log("++++++++++++++++++",e),e.isCurrent=!0,t.STinfo=e.data,t.searchs=e.data.canal_code,t.CZMC=e.label.replace("【站点】",""),console.log("this.searchmsg",t.searchmsg),!0):e.visible&&"0"==e.data.bj&&e.data.ad_cd?(console.log(e),e.isCurrent=!0,t.STinfo=e.data,t.searchs=e.data.ad_cd,t.CZMC=e.label.replace("【站点】",""),!0):void 0}),this.Reload()):(this.STinfo.STCD="",this.Reload())},timechange:function(){console.log(this.form.date),this.Reload()},cellclick:function(){if(console.log(n()(this.STinfo)),"{}"==n()(this.STinfo))this.$Message.warning("请先选择站点");else{this.STinfo.bj&&(this.STinfo.STCD=this.STinfo.canal_code,this.STinfo.STNM=this.STinfo.canal_name);var t=new Object;t.graphic=new Object,t.graphic.attributes=this.STinfo,console.log(this.STinfo),t.graphic.attributes.itype="hedaoshuiqing",t.graphic.attributes.rowinfo=JSON.parse(n()(this.STinfo)),t.graphic.attributes.rowinfo.tableType={hdsq:"historyTable"};var e=new Object;e.itype="hedaoshuiqing",console.log("evt",t),this.$App.showDrawer(t,e)}},drawchart:function(){var t=this.$echarts.init(this.$refs.achart);console.log(t),t.resize(),t.setOption({title:{text:""},tooltip:{trigger:"axis"},legend:{data:["流量","水位"]},calculable:!0,xAxis:[{type:"category",boundaryGap:!1,data:this.data2.x.list.reverse(),axisLabel:{interval:k()(this.data2.x.list.length/3.2),rotate:50}}],grid:{x:70,x2:40,y2:100},yAxis:[{name:"流量",type:"value",min:this.data2.y1.min,max:this.data2.y1.max},{name:"水位",type:"value",min:this.data2.y2.min,max:this.data2.y2.max}],series:[{name:"水位",type:"line",yAxisIndex:1,data:this.data2.y1.list.reverse()},{name:"流量",type:"line",yAxisIndex:0,data:this.data2.y2.list.reverse(),itemStyle:{normal:{color:"#006400",lineStyle:{color:"#006400"}}}}]})},err:function(){this.$Message.warning("该功能还在开发中...")},changeTree:function(){this.qudao=!this.qudao,this.xingzhengquhua=!this.xingzhengquhua},Reload:function(){var t=this;this.loading=!0,this.axios.get("/guanqu/hedaoshuiqing/lishi_lishibiao?_page_size="+this.list_input.pagesize+"&_page="+this.list_input.current,{params:{Time_min:this.form.date[0].substr(0,19),STCD:this.searchs,STNM:this.CZMZ,Time_max:this.form.date[1].substr(0,19)}}).then(function(e){console.log(e),t.data1=e.data.list,e.data.total,t.list_input.total=e.data.list.length,t.loading=!1;for(var a=0;a<t.data1.length;a++)t.data1[a].Q=t.Z_Filter(t.data1[a].Q,3),t.data1[a].Z=t.Z_Filter(t.data1[a].Z),t.data1[a].AWL=t.Z_Filter(t.data1[a].AWL),console.log(t.data1[a].Z>t.data1[a].AWL)}),this.axios.get("/guanqu/hedaoshuiqing/lishi_lishibiao?_page=1&_page_size=99999",{params:{Time_min:this.form.date[0].substr(0,19),STCD:this.searchs,STNM:this.CZMZ,Time_max:this.form.date[1].substr(0,19)}}).then(function(e){t.data2=e.data.list,t.data2=t.transform_HDSQ_data_into_ehart_data(t.data2,"historyTable"),console.log(t.data2),t.drawchart()}),this.axios.get("/guanqu/table/ST_RIVER_Alarm?STCD="+this.STinfo.STCD).then(function(e){console.log(e),e=e.data.list[0],console.log(e.AWL);var a=e.AWL.toString().split(".");void 0===a[1]?e.AWL="".concat(e.AWL,".00"):1===a[1].length?e.AWL="".concat(e.AWL,"0"):a[1].length>=3?e.AWL=item.substring(0,e.AWL.length-1):e.AWL=e.AWL,console.log(e.AWL),t.A_AWL=e.AWL})},indexMethod:function(t){return t+1+this.list_input.pagesize*(this.list_input.current-1)},CurrentChange:function(t){this.list_input.current=t,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()}},computed:{balabala:function(){return this.$store.state.anniu}},watch:{balabala:function(t,e){console.log(t),this.test1(t)}},created:function(){}},O=A,j=(a("aa59"),Object(m["a"])(O,R,D,!1,null,null,null)),Q=j.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Content",{style:{padding:"24px",background:"#fff"}},[a("Row",{attrs:{type:"flex",gutter:16,justify:"end"}},[a("Col",[t._v("\n                        归属单位:\n                        "),a("Select",{staticStyle:{width:"120px","margin-left":"5px"},attrs:{clearable:""},on:{"on-change":t.TYPEsearch},model:{value:t.form.zdlx,callback:function(e){t.$set(t.form,"zdlx",e)},expression:"form.zdlx"}},t._l(t.gsdwlist,function(e){return a("Option",{key:e.value,attrs:{value:e.value}},[t._v(t._s(e.label))])}),1)],1),a("Col",[a("Button",{staticStyle:{width:"auto","margin-right":"10px"},attrs:{type:"primary"},on:{click:t.err}},[t._v("导出")])],1),a("Col",[a("Input",{staticStyle:{width:"auto","margin-right":"20px"},attrs:{search:"","enter-button":"",suffix:"ios-search",placeholder:"请输入站名"},on:{"on-search":t.search},model:{value:t.form.searchmsg,callback:function(e){t.$set(t.form,"searchmsg",e)},expression:"form.searchmsg"}})],1)],1),a("Row",{staticStyle:{margin:"10px"},attrs:{type:"flex",gutter:16,justify:"end"}},[a("Col",[t._v("\n                    时间:\n                        "),a("el-date-picker",{attrs:{type:"year",size:"small",placeholder:"选择年"},model:{value:t.form.date,callback:function(e){t.$set(t.form,"date",e)},expression:"form.date"}})],1),a("Col",[t._v("\n                        行政区划:\n                        "),a("el-cascader",{attrs:{clearable:"",size:"small",placeholder:"请选择地址",options:t.form.adressList,"change-on-select":""},on:{change:t.XZQHsearch},model:{value:t.form.model_adress,callback:function(e){t.$set(t.form,"model_adress",e)},expression:"form.model_adress"}})],1),a("Col",[t._v("\n                        渠道:\n                        "),a("el-cascader",{attrs:{clearable:"",size:"small",placeholder:"请选择渠道",options:t.form.qudaoList,"change-on-select":""},on:{change:t.QDsearch},model:{value:t.form.model_qudao,callback:function(e){t.$set(t.form,"model_qudao",e)},expression:"form.model_qudao"}})],1)],1),a("Divider",{staticStyle:{margin:"20px 0"}}),a("Row",{staticStyle:{"font-size":"16px"}},[a("Col",{staticClass:"borsLine",staticStyle:{"font-size":"14px"}},[t._v("共"+t._s(t.Tables.total)+"个站点"),a("br"),t._v("\n                    年最高水位：m，对应流量：m³/s")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.data,border:"",height:"480"},on:{"cell-click":t.cellclick,"sort-change":t.sort_change}},[a("el-table-column",{attrs:{label:" ",type:"index",align:"center",width:"65",index:t.indexMethod}}),a("el-table-column",{attrs:{prop:"STNM",label:"站名",sortable:"custom",align:"center",width:""}}),a("el-table-column",{attrs:{prop:"TMHZ",label:"最高水位时间",sortable:"custom",align:"center",width:"130"}}),a("el-table-column",{attrs:{prop:"THZ",label:"年最高水位",sortable:"custom",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"YHZQ",label:"对应流量",sortable:"custom",align:"center",width:"120"}}),a("el-table-column",{attrs:{prop:"OTQ",label:"归属单位",sortable:"custom",align:"center",width:"130"}}),a("el-table-column",{attrs:{prop:"DW",label:"渠道",sortable:"custom",align:"center",width:"110"}}),a("el-table-column",{attrs:{prop:"FWL",label:"地址",sortable:"custom",align:"center",width:"140"}})],1),a("div",{staticStyle:{margin:"10px",overflow:"hidden"}},[a("div",{staticStyle:{float:"right"}},[a("Page",{attrs:{total:t.list_input.total,current:t.list_input.current,"show-sizer":"","page-size":t.list_input.pagesize,"page-size-opts":t.list_input.pagesizeopts,"show-total":"","show-elevator":""},on:{"on-change":t.CurrentChange,"on-page-size-change":t.PagesizeChange}})],1)])],1)],1)},N=[],L={data:function(){var t;return t={loading:!1,dialog_detail_showing:!1,gsdwlist:[{value:"1",label:"国家重要站"},{value:"2",label:"省级重要站"},{value:"3",label:"一般站"},{value:"4",label:"实验或专用站"},{value:"5",label:"山洪站"},{value:"6",label:"临时站"},{value:"7",label:"其他站"},{value:"8",label:"灌区站"}],Tables:{title:"",total:"",data:[]},form:{adressList:[],qudaoList:[],model_adress:"",zdlx:"",model_qudao:"",date:"",searchmsg:"",xzqh:"",qd:"",field:""}},Object(_["a"])(t,"Tables",{title:"",total:"",data:[]}),Object(_["a"])(t,"searchs",""),Object(_["a"])(t,"search1","&STNM=like,"),Object(_["a"])(t,"search2","&TM="),Object(_["a"])(t,"search3","&"),Object(_["a"])(t,"search4","&"),Object(_["a"])(t,"search5","&"),Object(_["a"])(t,"timesearch",""),Object(_["a"])(t,"data",[]),Object(_["a"])(t,"nodata",[]),Object(_["a"])(t,"list_input",{total:100,pagesize:50,pagesizeopts:[10,20,50,75,100,200],current:1}),t},mounted:function(){var t=new Date;t.getMonth();this.Reload()},mixins:[c["a"],d["a"]],methods:{sort_change:function(t){console.log(t),"ascending"==t.order&&(this.form.field=t.prop,this.Reload()),"descending"==t.order&&(this.form.field=t.prop+" desc",this.Reload()),null==t.order&&(this.form.field="",this.Reload())},optable:function(){this.dialog_detail_showing=!0},cellclick:function(t,e,a,s){var l=new Object;l.graphic=new Object,l.graphic.attributes=t,l.graphic.attributes.itype="zhafashuiqing",l.graphic.attributes.rowinfo=JSON.parse(n()(t)),l.graphic.attributes.rowinfo.tableType={zfsq:"dayTable"};var o=new Object;o.itype="zhafashuiqing",console.log("evt",l),this.$App.showDrawer(l,o)},err:function(){this.$Message.warning("该功能还在开发中...")},timechange:function(t){console.log(t),this.form.date=t,this.Reload()},indexMethod:function(t){return t+1+this.list_input.pagesize*(this.list_input.current-1)},search:function(){""!=this.form.searchmsg?this.searchs="&STNM=like,"+this.form.searchmsg:this.searchs="",this.Reload()},XZQHsearch:function(){console.log(this.form.model_adress),this.Reload()},QDsearch:function(){console.log(this.form.model_qudao),this.Reload()},TYPEsearch:function(){console.log(this.form.zdlx),this.Reload()},Reload:function(){var t=this;if(this.loading=!0,0==this.form.model_adress.length&&(this.form.xzqh=""),1==this.form.model_adress.length){var e=this.form.model_adress[0];e=e.substring(0,6),this.form.xzqh="like,"+e}if(2==this.form.model_adress.length){var a=this.form.model_adress[1];a=a.substring(0,9),this.form.xzqh="like,"+a}if(3==this.form.model_adress.length){var s=this.form.model_adress[2];s=s.substring(0,12),this.form.xzqh=s}0==this.form.model_qudao.length&&(this.form.qd=""),1==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[0]),2==this.form.model_qudao.length&&(this.form.qd=this.form.model_qudao[1]),this.axios.get("/guanqu/table/ST_G_RIVER?_page_size="+this.list_input.pagesize+"&_page="+this.list_input.current+this.searchs,{params:{TM:this.form.date,ADDVCD:this.form.xzqh,Canal_Code:this.form.qd,CTYPE:this.form.zdlx,_orderby:this.form.field}}).then(function(e){if(console.log(e),t.loading=!1,0==e.data.total);else{t.data=e.data.rows,t.list_input.total=e.data.total,t.Tables.title=t.data[0].TM;for(var a=0;a<t.data.length;a++)t.data[a].DA_UPZ=t.Z_Filter(t.data[a].DA_UPZ),t.data[a].DA_DWZ=t.Z_Filter(t.data[a].DA_DWZ),t.data[a].DA_Q=t.Z_Filter(t.data[a].DA_Q,3),t.data[a].DWQ=t.Z_Filter(t.data[a].DWQ,3),"1"==t.data[a].CTYPE&&(t.data[a].CTYPE="闸门"),"2"==t.data[a].CTYPE&&(t.data[a].CTYPE="阀门")}}),this.axios.get("/guanqu/table/ST_G_RIVER").then(function(t){}),this.getTableData_WRP_AD_B(function(e){t.form.adressList=e}),this.getTableData_WRP_IrrBTCanalSystem(function(e){t.form.qudaoList=e})},CurrentChange:function(t){this.list_input.current=t,this.Reload()},PagesizeChange:function(t){this.list_input.pagesize=t,this.Reload()}}},F=L,P=Object(m["a"])(F,W,N,!1,null,null,null),$=P.exports,E={data:function(){return{}},mounted:function(){},methods:{},computed:{},components:{Tablehour:f,Tableday:y,Tablemonth:M,Tablehistory:Q,Tabletop:$}},Y=E,V=Object(m["a"])(Y,s,l,!1,null,null,null);e["default"]=V.exports},3846:function(t,e,a){a("9e1e")&&"g"!=/./g.flags&&a("86cc").f(RegExp.prototype,"flags",{configurable:!0,get:a("0bfb")})},"6b54":function(t,e,a){"use strict";a("3846");var s=a("cb7c"),l=a("0bfb"),o=a("9e1e"),i="toString",r=/./[i],n=function(t){a("2aba")(RegExp.prototype,i,t,!0)};a("79e5")(function(){return"/a/b"!=r.call({source:"a",flags:"b"})})?n(function(){var t=s(this);return"/".concat(t.source,"/","flags"in t?t.flags:!o&&t instanceof RegExp?l.call(t):void 0)}):r.name!=i&&n(function(){return r.call(this)})},"753f":function(t,e,a){},aa59:function(t,e,a){"use strict";var s=a("afd5"),l=a.n(s);l.a},afd5:function(t,e,a){},e4b5:function(t,e,a){"use strict";var s=a("753f"),l=a.n(s);l.a}}]);