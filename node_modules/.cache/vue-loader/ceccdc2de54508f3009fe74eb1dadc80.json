{"remainingRequest":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-Medatainfo.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\src\\warm\\warm-detail\\Detail-Medatainfo.vue","mtime":1645514491023},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\work2022\\gvisualplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nexport default {\r\n    props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n       //上传文件信息\r\n      mefileInfo: {},\r\n      // 整块区域的加载控制\r\n      boxLoading: false,\r\n      //审核栏\r\n      audin:false,\r\n      data:[],\r\n    list_input1:{\r\n        total:100,\r\n        pagesize:50,\r\n        pagesizeopts:[10,20,50,75,100,200],\r\n        current:1,\r\n    },\r\n    form:{\r\n        audiTm:'',\r\n        audiMan:''\r\n    },\r\n    }\r\n  },\r\n  methods: {\r\n    // 处理页码切换\r\n    CurrentChange(index) {\r\n        this.list_input1.current = index;\r\n        this.Reload();\r\n    },\r\n    // 处理每页显示条数切换\r\n    PagesizeChange(pagesize) {\r\n        this.list_input1.pagesize = pagesize;\r\n        this.list_input1.current=1;\r\n        this.Reload();  \r\n    },\r\n    Reload(){\r\n    this.boxLoading = true;\r\n    var _currentPage = this.list_input1.current;\r\n    var _pageSizes = this.list_input1.pagesize;\r\n    var _bgincount=(_currentPage - 1) * _pageSizes+1;\r\n    var _endcount=_currentPage * _pageSizes; \r\n    \r\n      // 获取详情数据\r\n    this.axios.get(`/strealmanage/filedetail`,{params:{meCode:this.info.ME_CODE,begincount:_bgincount,endcount:_endcount}})\r\n      .then(res => {\r\n        this.mefileInfo=res.data.info;\r\n        this.data = res.data.rows;\r\n        this.list_input1.total = res.data.total;\r\n        this.boxLoading = false;     \r\n      });\r\n    },\r\n    onSubmit(auditing){\r\n        if(this.form.audiTm==''){\r\n            this.$message({ type: 'warning', message: '请输入审核时间！' });\r\n              return;\r\n        }\r\n        if(this.form.audiMan==''){\r\n            this.$message({ type: 'warning', message: '请输入审核人员！' });\r\n              return;\r\n        }\r\n        this.axios.get(`/strealmanage/auditing`,{params:{meCode:this.info.ME_CODE,audiTm:this.form.audiTm,audiMan:this.form.audiMan,audinting:auditing}})\r\n        .then(res => {\r\n            if(res.data==\"ok\"){\r\n                if(auditing==2){\r\n                    this.$message({ type: 'success', message: this.info.FILE_NAME+'审核通过！' }); \r\n                }else{\r\n                    this.$message({ type: 'success', message: this.info.FILE_NAME+'作废！' });\r\n                }\r\n                this.$emit('closedailog');\r\n            }    \r\n        });      \r\n    },\r\n  },\r\n  mounted() {\r\n      var date = new Date();\r\n            var Month = date.getMonth() + 1;\r\n            Month=Month<10?\"0\"+Month:Month;\r\n            var day=date.getDate();\r\n            day=day<10?\"0\"+day:day;\r\n      this.form.audiTm=date.getFullYear() + '-' + Month + '-' + day;\r\n      this.audin=this.info.audin;\r\n      this.Reload();\r\n  }\r\n};\r\n",{"version":3,"sources":["Detail-Medatainfo.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Detail-Medatainfo.vue","sourceRoot":"src/warm/warm-detail","sourcesContent":["<template>\r\n  <div v-loading=\"boxLoading\">\r\n              <table cellspacing=\"0\" width=\"100%\" class=\"table_detail\">\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">上传日期：</td>\r\n                  <td align=\"center\" class=\"dt_vale\" style=\"border-right: 1px solid #C7CCD6\">{{ mefileInfo.TMSTR || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\" >上传人员：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{mefileInfo.UP_MAN|| \"&nbsp;\"}}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">测量人：</td>\r\n                  <td align=\"center\" class=\"dt_vale\" style=\"border-right: 1px solid #C7CCD6\">{{ mefileInfo.ME_MAN || \"&nbsp;\" }}</td>\r\n                  <td align=\"right\" class=\"dt_name\">审核状态：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">{{ mefileInfo.RESULT || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr>\r\n                  <td align=\"right\" class=\"dt_name\">备注：</td>\r\n                  <td align=\"center\" class=\"dt_vale\" colspan=\"3\" style=\"padding-left:10px;padding-right:10px;\">{{ mefileInfo.MEMO || \"&nbsp;\" }}</td>\r\n                </tr>\r\n                <tr v-if=\"audin\">\r\n                  <td align=\"right\" class=\"dt_name\">审核日期：</td>\r\n                  <td align=\"center\" class=\"dt_vale\" style=\"border-right: 1px solid #C7CCD6\">\r\n                      <el-date-picker\r\n                            style=\"width: 160px\"\r\n                            v-model=\"form.audiTm\"\r\n                            type=\"date\"\r\n                            placeholder=\"选择日期\"\r\n                            format=\"yyyy 年 MM 月 dd 日\"\r\n                            value-format=\"yyyy-MM-dd\"\r\n                            size=\"small\"\r\n                            :clearable=\"false\">\r\n                    </el-date-picker>\r\n                    <span style=\"color:red\">*</span>\r\n                  </td>\r\n                  <td align=\"right\" class=\"dt_name\" >审核人员：</td>\r\n                  <td align=\"center\" class=\"dt_vale\">\r\n                      <Input v-model=\"form.audiMan\" :value=\"form.audiMan\" clearable style=\"width:160px\"/>\r\n                      <span style=\"color:red\">*</span>\r\n                  </td>\r\n                </tr>\r\n              </table>\r\n              <el-table\r\n                        :data=\"data\"\r\n                        border\r\n                        :height=\"350\"\r\n                        style=\"width: 100%;margin-top:5px;\"\r\n                        >\r\n                        <el-table-column\r\n                          label=\" \"\r\n                          prop=\"ROWID\"\r\n                          align=\"center\"\r\n                          width=\"45\"\r\n                          fixed=\"left\"\r\n                        >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                          prop=\"STNM\"\r\n                          label=\"测量站名\"\r\n                          align=\"center\"\r\n                          fixed=\"left\"\r\n                          min-width=\"120\">\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                          prop=\"ME_TMSTR\"\r\n                          label=\"测量日期\"\r\n                          align=\"center\"\r\n                          min-width=\"120\"\r\n                          >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                          prop=\"Z\"\r\n                          label=\"水深\"\r\n                          align=\"center\"\r\n                          min-width=\"90\"\r\n                          >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                          prop=\"Q\"\r\n                          label=\"流量\"\r\n                          align=\"center\"\r\n                          show-overflow-tooltip=\"true\" \r\n                          min-width=\"90\"\r\n                          >\r\n                        </el-table-column>\r\n                        <el-table-column\r\n                          prop=\"CANAL_NAME\"\r\n                          label=\"所属渠道\"\r\n                          align=\"center\"\r\n                          min-width=\"150\">\r\n                        </el-table-column>\r\n                      </el-table>\r\n                    <div style=\"margin: 10px;overflow: hidden;\">\r\n                        <div style=\"float: right;font-size:12px;\">\r\n                            <Page \r\n                            :total=\"list_input1.total\" \r\n                            :current=\"list_input1.current\" show-sizer \r\n                            :page-size=\"list_input1.pagesize\" :page-size-opts=\"list_input1.pagesizeopts\"\r\n                            @on-change=\"CurrentChange\"\r\n                            @on-page-size-change=\"PagesizeChange\"\r\n                            size=\"small\"\r\n                            show-total\r\n                            show-elevator\r\n                            ></Page>\r\n                        </div>\r\n                    </div>\r\n  <div v-if=\"audin\">\r\n                <div style=\"width:100%;text-align:center;\">\r\n                    <Button type=\"primary\" @click=\"onSubmit(2)\" >审核通过</Button>\r\n                    <Button type=\"primary\" @click=\"onSubmit(3)\" style=\"margin-left:20px;\">作废</Button>\r\n                </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n<script type=\"text/javascript\">\r\nexport default {\r\n    props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n       //上传文件信息\r\n      mefileInfo: {},\r\n      // 整块区域的加载控制\r\n      boxLoading: false,\r\n      //审核栏\r\n      audin:false,\r\n      data:[],\r\n    list_input1:{\r\n        total:100,\r\n        pagesize:50,\r\n        pagesizeopts:[10,20,50,75,100,200],\r\n        current:1,\r\n    },\r\n    form:{\r\n        audiTm:'',\r\n        audiMan:''\r\n    },\r\n    }\r\n  },\r\n  methods: {\r\n    // 处理页码切换\r\n    CurrentChange(index) {\r\n        this.list_input1.current = index;\r\n        this.Reload();\r\n    },\r\n    // 处理每页显示条数切换\r\n    PagesizeChange(pagesize) {\r\n        this.list_input1.pagesize = pagesize;\r\n        this.list_input1.current=1;\r\n        this.Reload();  \r\n    },\r\n    Reload(){\r\n    this.boxLoading = true;\r\n    var _currentPage = this.list_input1.current;\r\n    var _pageSizes = this.list_input1.pagesize;\r\n    var _bgincount=(_currentPage - 1) * _pageSizes+1;\r\n    var _endcount=_currentPage * _pageSizes; \r\n    \r\n      // 获取详情数据\r\n    this.axios.get(`/strealmanage/filedetail`,{params:{meCode:this.info.ME_CODE,begincount:_bgincount,endcount:_endcount}})\r\n      .then(res => {\r\n        this.mefileInfo=res.data.info;\r\n        this.data = res.data.rows;\r\n        this.list_input1.total = res.data.total;\r\n        this.boxLoading = false;     \r\n      });\r\n    },\r\n    onSubmit(auditing){\r\n        if(this.form.audiTm==''){\r\n            this.$message({ type: 'warning', message: '请输入审核时间！' });\r\n              return;\r\n        }\r\n        if(this.form.audiMan==''){\r\n            this.$message({ type: 'warning', message: '请输入审核人员！' });\r\n              return;\r\n        }\r\n        this.axios.get(`/strealmanage/auditing`,{params:{meCode:this.info.ME_CODE,audiTm:this.form.audiTm,audiMan:this.form.audiMan,audinting:auditing}})\r\n        .then(res => {\r\n            if(res.data==\"ok\"){\r\n                if(auditing==2){\r\n                    this.$message({ type: 'success', message: this.info.FILE_NAME+'审核通过！' }); \r\n                }else{\r\n                    this.$message({ type: 'success', message: this.info.FILE_NAME+'作废！' });\r\n                }\r\n                this.$emit('closedailog');\r\n            }    \r\n        });      \r\n    },\r\n  },\r\n  mounted() {\r\n      var date = new Date();\r\n            var Month = date.getMonth() + 1;\r\n            Month=Month<10?\"0\"+Month:Month;\r\n            var day=date.getDate();\r\n            day=day<10?\"0\"+day:day;\r\n      this.form.audiTm=date.getFullYear() + '-' + Month + '-' + day;\r\n      this.audin=this.info.audin;\r\n      this.Reload();\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"less\" scope>\r\n\r\n.table_detail {\r\n border:1px solid #C7CCD6;\r\n border-collapse:collapse; \r\n  td {\r\n    height: 35px;\r\n    border-top: none;\r\n    border:1px solid #C7CCD6;\r\n  }\r\n\r\n  .dt_name {\r\n    width: 20%;\r\n  }\r\n\r\n  .dt_vale {\r\n    width: 30%;\r\n  }\r\n}\r\n</style>"]}]}