{"remainingRequest":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\huangcaiplace\\zhihuiguanqu\\src\\components\\Details\\Details-shipinzhan.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\huangcaiplace\\zhihuiguanqu\\src\\components\\Details\\Details-shipinzhan.vue","mtime":1583996482430},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\huangcaiplace\\zhihuiguanqu\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\r\nimport FilterMethods from \"../../assets/commonJS/FilterMethods\"; // 过滤方法\r\nimport GetDataMethods from \"../../assets/commonJS/GetDataMethods\"; // 获取数据方法\r\nimport { timingSafeEqual } from \"crypto\";\r\nexport default {\r\n  props: {\r\n    info: {}\r\n  },\r\n  data() {\r\n    return {\r\n      // 激活标签栏\r\n      activeName: \"shipin\",\r\n      // 站点信息\r\n      siteInfo: {},\r\n      //   多选框对象\r\n      checkBox: {\r\n        shuiqingList: [\r\n          {\r\n            value: \"historyTable\",\r\n            size: \"large\",\r\n            // iconType: \"logo-facebook\",\r\n            title: \"历史表\"\r\n          },\r\n          {\r\n            value: \"hourTable\",\r\n            size: \"large\",\r\n            // iconType: \"logo-facebook\",\r\n            title: \"小时表\"\r\n          },\r\n          {\r\n            value: \"dayTable\",\r\n            size: \"large\",\r\n            // iconType: \"logo-facebook\",\r\n            title: \"日表\"\r\n          },\r\n          {\r\n            value: \"nightTable\",\r\n            size: \"large\",\r\n            // iconType: \"logo-facebook\",\r\n            title: \"月表\"\r\n          }\r\n        ],\r\n        // 水情多选框绑定值\r\n        shuiqing_social: [\"historyTable\", \"hourTable\", \"dayTable\", \"nightTable\"]\r\n      },\r\n      //   选择框对象\r\n      select: {\r\n        searchList: [\r\n          {\r\n            value: \"quick\",\r\n            label: \"快速查询\"\r\n          },\r\n          {\r\n            value: \"vague\",\r\n            label: \"模糊查询\"\r\n          }\r\n        ]\r\n      },\r\n      // 表格数据\r\n      table: {\r\n        // 水情\r\n        shuiqing: {\r\n          // 表头设置\r\n          columns: [\r\n            {\r\n              title: \"序号\",\r\n              type: \"index\",\r\n              width: 80,\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"时间\",\r\n              key: \"date\",\r\n              // width: 100,\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"水位(m)\",\r\n              width: 110,\r\n              key: \"waterLever\",\r\n              align: \"center\"\r\n            },\r\n            {\r\n              width: 120,\r\n              title: \"流量(m³/s)\",\r\n              key: \"flowLever\",\r\n              align: \"center\"\r\n            }\r\n          ],\r\n          // 表体内容\r\n          Rows: [\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            },\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            },\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            }\r\n          ],\r\n          // 表格是否加载中\r\n          loading: false\r\n        },\r\n        // 关系曲线\r\n        guanxiquxian: {\r\n          // 表头设置\r\n          columns: [\r\n            {\r\n              title: \"序号\",\r\n              key: \"index\",\r\n              width: 100,\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"测站编码\",\r\n              key: \"date\",\r\n              // width: 100,\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"水位\",\r\n              width: 100,\r\n              key: \"waterLever\",\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"流量(m³/s)\",\r\n              key: \"flowLever\",\r\n              align: \"center\"\r\n            },\r\n            {\r\n              width: 100,\r\n              title: \"启用标志\",\r\n              key: \"flowLever\",\r\n              align: \"center\"\r\n            },\r\n            {\r\n              width: 100,\r\n              title: \"备注\",\r\n              key: \"flowLever\",\r\n              align: \"center\"\r\n            }\r\n          ],\r\n          // 表体内容\r\n          Rows: [\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            },\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            },\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            }\r\n          ],\r\n          // 表格是否加载中\r\n          loading: false\r\n        },\r\n        // 特征水位\r\n        tezhengshuiqing: {\r\n          // 表头设置\r\n          columns: [\r\n            {\r\n              title: \"序号\",\r\n              key: \"index\",\r\n              width: 100,\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"测站编码\",\r\n              key: \"date\",\r\n              // width: 100,\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"最大流量时间\",\r\n              width: 130,\r\n              key: \"waterLever\",\r\n              align: \"center\"\r\n            },\r\n            {\r\n              title: \"年最大流量(m³/s)\",\r\n              key: \"flowLever\",\r\n              align: \"center\"\r\n            },\r\n            {\r\n              width: 100,\r\n              title: \"水位\",\r\n              key: \"flowLever\",\r\n              align: \"center\"\r\n            }\r\n          ],\r\n          // 表体内容\r\n          Rows: [\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            },\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            },\r\n            {\r\n              index: 1,\r\n              date: \"2019-4-18\",\r\n              waterLever: \"10\",\r\n              flowLever: \"11\"\r\n            }\r\n          ],\r\n          // 表格是否加载中\r\n          loading: false\r\n        }\r\n      },\r\n      //   日期数据\r\n      date: {\r\n        shuiqing: \"\"\r\n      },\r\n      // 输入框对象\r\n      input: {\r\n        // 关系曲线换算的\r\n        huansuan: {\r\n          waterLever: \"\",\r\n          flowLever: \"\"\r\n        }\r\n      },\r\n      //   列表对象\r\n      list: {\r\n        imageList: []\r\n      },\r\n      //   导出按钮加载控制\r\n      outPutLoading: false,\r\n      //   导出确认对话框控制\r\n      outPutModal: false,\r\n      //   整块区域加载控制\r\n      boxLoading: false\r\n    };\r\n  },\r\n  mixins: [FilterMethods, GetDataMethods],\r\n  methods: {\r\n    //   导出站点信息\r\n    outPutSiteInfo() {\r\n      //   关闭导出确认对话框\r\n      this.outPutModal = false;\r\n      //   按钮加载\r\n      this.outPutLoading = true;\r\n      setTimeout(() => {\r\n        this.outPutLoading = false;\r\n        this.$Modal.success({\r\n          title: \"关于导出\",\r\n          content: \"站点信息表导出成功\"\r\n        });\r\n      }, 500);\r\n    },\r\n    developing_tip() {\r\n      this.$Message.warning(\"从功能正在开发中...\");\r\n    },\r\n    //   确认导出\r\n    outPutSure() {\r\n      this.outPutSiteInfo();\r\n    },\r\n    // 搜索\r\n    search() {\r\n      // 表格加载中\r\n      this.table.loading = true;\r\n      setTimeout(() => {\r\n        // var newList = this.featrue.Rows.map((val, index) => {\r\n        //   return val.attributes;\r\n        // });\r\n\r\n        // this.table.Rows = newList;\r\n        // 取消表格加载\r\n        this.table.loading = false;\r\n      }, 1000);\r\n    },\r\n    // 绘图\r\n    createChart(idName) {\r\n      let myChart = this.$echarts.init(document.getElementById(idName));\r\n\r\n      myChart.setOption({\r\n        title: { text: \"水位\" },\r\n        tooltip: {},\r\n        xAxis: {\r\n          data: [\"闸阀前\", \"闸阀后\"]\r\n        },\r\n        yAxis: {\r\n          name: \"单位：米\"\r\n        },\r\n        series: [\r\n          {\r\n            name: \"水位\",\r\n            type: \"bar\",\r\n            data: [5, 10]\r\n          }\r\n        ]\r\n      });\r\n    },\r\n    // 加载表格数据\r\n    loadTableData(list, data) {\r\n      this.table[list].Rows = data;\r\n      console.log('表格',this.table[list].Rows);\r\n    },\r\n    // 加载站点数据\r\n    loadSiteData(data) {\r\n      this.siteInfo = data;\r\n      console.log('站点',this.siteInfo);\r\n    },\r\n    // 根据行政区划编码获取行政区划\r\n    getCompartmentByADDVCD(callback) {\r\n      var ADDVCD = this.info.ADDVCD;\r\n      if (ADDVCD && ADDVCD != \"\") {\r\n        this.axios\r\n          .get(`/guanqu/admin/WRP_AD_B`, {\r\n            params: {\r\n              AD_CD: ADDVCD\r\n            }\r\n          })\r\n          .then(res => {\r\n            var data = res.data.rows;\r\n            if (typeof callback == \"function\") {\r\n              callback(data);\r\n            }\r\n          });\r\n      }\r\n    },\r\n  },\r\n\r\n  mounted() {\r\n    //判断浏览器是否为ie\r\n    var u = navigator.userAgent;\r\n    if (u.indexOf('Trident') > -1) {\r\n      \r\n    }else{\r\n      this.$message({\r\n          message: '提示：请确保在IE浏览器下使用视频监控功能！',\r\n          type: 'warning'\r\n      });\r\n    }\r\n    // 区域加载中\r\n    this.boxLoading = true;\r\n    // 获取详情数据\r\n    this.axios\r\n      .get(`/guanqu/gis/details?ID=${this.info.STCD}&pk=STCD`)\r\n      .then(res => {\r\n\r\n\r\n        this.getCompartmentByADDVCD(data => {\r\n          this.siteInfo.AD_NM = data[0].AD_NM;\r\n        });\r\n        // 根据河流编码获取河流名\r\n        this.$GetData.Base_R_I({\r\n          RVCD: this.info.RVCD\r\n        },true,(data) => {\r\n          this.siteInfo.RVCD = data.data[0].RVNM;\r\n        })\r\n\r\n        // 根据流域编码获取流域名\r\n        this.$GetData.Base_B_I({\r\n          CTCD: this.info.CTCD\r\n        },true,(data) => {\r\n          this.siteInfo.CTCD = data.data[0].CTNM;\r\n        })\r\n        // 加载站点数据\r\n        this.loadSiteData(res.data);\r\n\r\n        var details_data = res.data;\r\n        // console.log(details_data);\r\n        if (details_data.CSTYPE==3) {\r\n          var video_iframe = document.getElementById(\"video\");\r\n          video_iframe.src = 'em-playvideo.html?61.187.248.226:8866'+','+details_data.PUID+','+details_data.IDX+','+details_data.STNM\r\n        }\r\n        if (details_data.CSTYPE==1) {\r\n          var video_iframe = document.getElementById(\"video\");\r\n          // details_data.WWWPath\r\n          video_iframe.src = 'webdemo/index.html?'+details_data.PUID;\r\n        }\r\n        \r\n        // 取数据的条数\r\n        // var count = 0\r\n        // for (let key in res.data) {\r\n        //   count++\r\n        // }\r\n        // alert(count)\r\n        // 加载取消\r\n        this.boxLoading = false;\r\n      });\r\n  }\r\n};\r\n",null]}